MPASM  5.51     PROGRAM_STERUJACY_WERSJA2.ASM   8-7-2014  19:31:38         PAGE  1


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00001            
                      00002            LIST   P=PIC16F916
                      00003         include  "p16f916.inc"
                      00001         LIST
                      00002 
                      00003 ;==========================================================================
                      00004 ;  MPASM PIC16F916 processor include
                      00005 ; 
                      00006 ;  (c) Copyright 1999-2013 Microchip Technology, All rights reserved
                      00007 ;==========================================================================
                      00008 
                      01057         LIST
                      00004 
2007   3CE2           00005         __CONFIG _HS_OSC & _MCLRE_ON & _WDT_OFF & _PWRTE_ON & _BOD_OFF &  _CPD_OFF &  _CP_OFF & _DEBUG_O
                            FF
                      00006         ; __CONFIG _HS_OSC & _MCLRE_ON & _WDT_OFF & _PWRTE_ON & _BOD_OFF &  _CPD_OFF &  _CP_OFF & _DEBUG
                            _ON
                      00007 
                      00008 ;definicje sÄ… w odzielnym pliku
                      00009 
                      00010         ;include "def_var.h"
                      00011 
  20000000            00012 czestotliwosc    equ    20000000
                      00013 
                      00014          
                      00015 ;2011.03.10
                      00016 ;poczatek programu - tzn inicjacja ekranu    
                      00017 ;program poswiecony jest testowi biblioteki lcd, 
                      00018 ; w celu sprawdzenia i zachowania sposobu dzialania
                      00019 
                      00020 ;do tego dobry algorytm obs³ugi klawiatury
                      00021 
                      00022 ;program obsluguje trzy klawisze - 
                      00023 
                      00024 ;pierwszy - zmiana gora
                      00025 ;drugi - zmiana dol
                      00026 ;trzeci - wybor
                      00027 
                      00028 ;aby zmienic opcje 1 - przechodzimy gwiazdka (innym znacznikiem na t¹ opcjê) oraz wciskamy klawisz enter
                      00029 ; wartoœæ wypisana obok mo¿e byæ zmieniana
                      00030 
                      00031 ;po wybraniu opcji wystarczy wcisn¹æ przycisk Wyboru i opcja jest zapamietana
                      00032 
                      00033 ;w menu s¹ tylko dwie opcje - ekran dwuliniowy
                      00034 
                      00035 ;oraz menu wewnetrzne - dwie inne opcje
                      00036 
                      00037 ;moze byc opcji wiecej - przy przechodzeniu w dol - pojawiaja sie kolejne opcje - gorna znika a pojawia 
                            sie nowa dolna, a poprzednia dolna jest na gorze
                      00038 
                      00039 
                      00040 
                      00041 
MPASM  5.51     PROGRAM_STERUJACY_WERSJA2.ASM   8-7-2014  19:31:38         PAGE  2


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00042 ;menu wewnetrznego
                      00043 
                      00044 ;oraz dobra obsluga przerwan
                      00045 
                      00046 ;klawisze i menu do zmiany na dowolny program
                      00047 
                      00048 
                      00049 ;PORTB -7 - ICD2
                      00050 ;PORTB -6 - ICD2
                      00051 ;PORTB -5 - czujnik DS18B20
                      00052 ;PORTB -4 - 
                      00053 ;PORTB -3 - 
                      00054 ;PORTB -2 - 
                      00055 ;PORTB -1 -  wyjscie sterowania lodówka - sterowanie uruchamianiem kompresora
                      00056 ;PORTB -0 -  wyjscie sterowania lodówka - sterowanie sygna³ drzwi i napiêcie pompy
                      00057 
                      00058          
                      00059 ;POrtc - 0 - LCD 4
                      00060 ;POrtc - 1 - LCD 5
                      00061 ;PORTC - 2 - LCD 6
                      00062 ;POrtc - 3 - LCD 7
                      00063 ;POrtc - 4 - RS
                      00064 ;POrtc - 5 - RW 
                      00065 ;POrtc - 6 -   E
                      00066 ;POrtc - 7 -  
                      00067 
                      00068 ;PORTA - 0 - 
                      00069 ;PORTA - 1 - 
                      00070 ;PORTA - 2 - klawisz zmiana
                      00071 ;PORTA - 3 - klawisz enter
                      00072 ;PORTA - 4 - klawisz dol
                      00073 ;PORTA - 5 - lampka do ewentualnego migania
                      00074 
                      00075 
                      00076 
                      00077 ;2011.06.24
                      00078 
                      00079 ;sposób obs³ugi kwarcu trzeba poprawiæ program dzia³a zupe³nie dobrze na kwarcu 4 MHZ 
                      00080 ;ale co z innymi kwarcami?
                      00081 ;zupe³nie dobrze pracuje te¿ na czêstotliwoœci 8 Mhz - zmienia siê tylko dzia³anie i szybkoœæ reakcji kl
                            awiszy
                      00082 ; dzia³a te¿ dobrze przy 16 MHz
                      00083 
                      00084 
                      00085 ;2012.04.02
                      00086 
                      00087 
                      00088 ;timer0     - u¿ywany przez klawisze  
                      00089 ;timer1   -    co ile robic pomiary dsem
                      00090 ;timer2  -   uzywany do ds18b20 
                      00091 
                      00092 ;2014.04.06
                      00093 ;ten program s³u¿y do sterowania lodówka AMICA
MPASM  5.51     PROGRAM_STERUJACY_WERSJA2.ASM   8-7-2014  19:31:38         PAGE  3


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00094 ;dodano czujnik DS18B20
                      00095 ;obs³uga jego poprawiona do wsolpracy z procesorem PIC16F916
                      00096 ;w ten sposób uda³o siê dokonaæ pomiaru temperatury zamra¿arki
                      00097 ;jedyny problem jest z histereza poniewa¿ temperatura zapisywana jest w postaci inwersji - ujemna
                      00098 
                      00099 ; nale¿y zmieniæ ten program tak aby po ponownym uruchomieniu znowu od razu dzia³a³
                      00100 
                      00101 ;usunac miganie LED
                      00102 
                      00103 ;dodaæ drugi czujnik umieszczony w lodowce
                      00104 ; w tej wersji poprawiono obs³ugê regulacji temperatury
                      00105 
                      00106 
                      00107          cblock   20h
                      00108          
  00000020            00109          w_temp
  00000021            00110          status_temp
  00000022            00111          pclath_temp
                      00112         
                      00113                        
  00000023            00114          n
  00000024            00115          tmp
  00000025            00116          tmp7
                      00117                    
  00000026            00118          stan_key
                      00119          
  00000027            00120         dec100
  00000028            00121         dec10
  00000029            00122         dec1
  0000002A            00123          reszta_operacji
                      00124          
  0000002B            00125         dec100_temp
  0000002C            00126         dec10_temp
  0000002D            00127         dec1_temp
  0000002E            00128         dec01_temp
                      00129          
  0000002F            00130                 wynik001
  00000030            00131         wynik01
  00000031            00132         wynik
  00000032            00133         wynikh
                      00134 
  00000033            00135         wynik001_temp
  00000034            00136         wynik01_temp
  00000035            00137         wynik_temp
  00000036            00138         wynikh_temp
                      00139                  
                      00140          
                      00141          
                      00142 ;liczba przez ktora dziele lub mnoze (2 bajtowa)
  00000037            00143         operandh
  00000038            00144         operandl
                      00145         
  00000039            00146          mnozonah
MPASM  5.51     PROGRAM_STERUJACY_WERSJA2.ASM   8-7-2014  19:31:38         PAGE  4


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

  0000003A            00147          mnozona
                      00148          
                      00149          
  0000003B            00150         dzielona
  0000003C            00151         dzielonah
                      00152 ;starszy bajt ulamku
  0000003D            00153         ulamekh
                      00154 ;mlodszy bajt ulamku
  0000003E            00155         ulamekl
                      00156          
                      00157                   
                      00158 ;dla przerwan     
                      00159          
  0000003F            00160          dane_lcd
  00000040            00161          tmp_lcd
  00000041            00162          fsr_temp
                      00163          
                      00164          
  00000042            00165         zliczenia_przerwania_TMR0
                      00166          
                      00167          
                      00168                   
                      00169          
                      00170          
  00000043            00171          markers
                      00172             
  00000044            00173         markers_klawisze
  00000045            00174          markers_pomiary
                      00175 ;menu
  00000046            00176          opcja_menu     ; zmienna przechowuj¹ca opcjê przy której jest gwiazdka
                      00177          
  00000047            00178          polozenie_gwiazdka
                      00179          
  00000048            00180          znaczniki_klawiszy_menu
                      00181          
  00000049            00182          stan_menu
                      00183          
                      00184          
                      00185          ;kolejne numery znakow umieszczane w liniach 
  0000004A            00186          znak_linia
                      00187          
                      00188   ;tu musza byc rejestry przechowujace opcje w kolejnosci     
  0000004B            00189          wartosc_opcji_uruchom
  0000004C            00190          wartosc_opcji_nastawa
  0000004D            00191          wartosc_opcji_temp
  0000004E            00192          wartosc_opcji_hex
                      00193          
                      00194          
                      00195        
                      00196          
  0000004F            00197          ile_zliczen_przerwania_TMR2_PWM
  00000050            00198          ile_zliczen_TMR2_do_100
                      00199          
MPASM  5.51     PROGRAM_STERUJACY_WERSJA2.ASM   8-7-2014  19:31:38         PAGE  5


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

  00000051            00200         wartosc_opcji_czas_wlaczenia01
                      00201          
  00000052            00202          ile_zliczen_do_pomiaru_temp
                      00203          
  00000053            00204          tmp_linia
                      00205          
  00000054            00206          nastawa_temp
  00000055            00207          nastawa_temp_01
                      00208          
  00000056            00209          nastawa_temp_histereza
  00000057            00210          nastawa_temp_01_histereza
  00000058            00211          jak_duzo_bajtow_odbieram_z_ds
  00000059            00212          znak_rozkazu_ds
  0000005A            00213          polecenie_wysylane
  0000005B            00214          bajt_CRC
                      00215          
  0000005C            00216          inicjacja_wynik
                      00217          
                      00218          endc
                      00219                   
                      00220          cblock   0a0h
  000000A0            00221          dane_odebrane_z_ds       
                      00222          endc
                      00223          
                      00224          
                      00225          
                      00226          
                      00227 ;        cblock 110h
                      00228                   
                      00229 ;        endc
                      00230 
                      00231                   
                      00232          cblock   0
                      00233 
                      00234          endc
                      00235 ;rejestry nieuzywane wykorzystuje jako dane
                      00236 
                      00237 ;        equ      TMR1L
                      00238 
                      00239 ;        equ      TMR1H
                      00240 
                      00241 ;                 equ      CCPR1H
                      00242 ;linia            equ      CCPR1L
                      00243 
                      00244 
                      00245 
                      00246 
                      00247 
                      00248 
                      00249 
  0000002A            00250 marker_opcji      equ      0x2a
                      00251 
                      00252 
MPASM  5.51     PROGRAM_STERUJACY_WERSJA2.ASM   8-7-2014  19:31:38         PAGE  6


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00253 
                      00254 
                      00255 
                      00256 
                      00257 ;;;markers
  00000000            00258 poprzednio_cyfra_zero      equ      0
  00000001            00259 wartosc_ujemna                equ       1
  00000002            00260 wykonaj_pomiar                  equ 2
  00000003            00261 aktualizuj_temp_co_sekunde      equ   3
  00000004            00262 reguluj                         equ     4
  00000007            00263 odswiez_ekran                       equ       7  
                      00264 ;znaczniki klawiszy MENU
                      00265 
  00000000            00266 opcje_po_przycisku_dol     equ      0
  00000001            00267 opcje_po_przycisku_gora     equ      1
  00000002            00268 opcja_bez_przycisku        equ       2
                      00269                 
                      00270 
                      00271 
                      00272 ;stan MENU
  00000000            00273 menu_glowne       equ      0
  00000001            00274 wybor_opcji       equ     1                
                      00275   
                      00276   
                      00277   
                      00278 ; 4 opcje od 0 do 3 - tu trzeba wpisaæ jak du¿o opcji
                      00279 
                      00280 ;jezeli 4 opcji to ostatnia jest 3
                      00281 ;jezeli 5 opcji to ostatnia jest 4
  00000003            00282 koncowa_opcja_menu   equ            3
                      00283 
                      00284 
                      00285 
                      00286 
                      00287 
                      00288 
                      00289 
                      00290 
                      00291 
                      00292 
                      00293 ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
                      00294 ;numery opcji odpowiadaj¹ce po³o¿eniu w menu
                      00295 
  00000000            00296 numer_opcji_uruchom                equ      0
  00000001            00297 numer_opcji_nastawa             equ      1
  00000002            00298 numer_opcji_temperatura        equ   2
                      00299 
                      00300 ;;;;;;;;;;;;;;OPCJE i ich wartoœci
                      00301 ;;;;;;;;;;;;;;;;;;;;;;;;
                      00302 
                      00303 ;mam tu kilka mo¿liwoœci pracy PWM
                      00304 
                      00305 ;b. szybkie i wolniejsze
MPASM  5.51     PROGRAM_STERUJACY_WERSJA2.ASM   8-7-2014  19:31:38         PAGE  7


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00306 
                      00307 ;1 - na timer2
                      00308 
                      00309 ; 195*X*4/20e6 = 
                      00310 
                      00311 ; ustawienia mno¿nika x1, x5, x20,x100,x256
                      00312 
                      00313 ; max_temp        equ   0xfe
  00000008            00314 max_temp        equ   0x08
  00000001            00315 o_ile_zmieniam_temp      equ   1
  000000E1            00316 min_temp        equ   0xe1
                      00317 
                      00318 
  00000001            00319 max_uruchom              equ      1
  00000001            00320 o_ile_zmieniam_uruchom       equ      1
  00000000            00321 min_uruchom        equ      0
                      00322 
  000000C3            00323 ile_TMR2_dla_PWM        equ     0xc3
                      00324 
                      00325 
                      00326 
                      00327 
                      00328 
                      00329 ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
                      00330 ;;;;; OPCJE KLAWISZY
                      00331 ;;;;;
                      00332 
                      00333 
                      00334 
                      00335 ;tu wpisz ile zliczen TMR0 zanim sprawdzi klawisz
  00000003            00336 jak_duzo_zliczen_TMR0   equ             3
                      00337 
                      00338 ;definicje klawiszy - port przypisany do kazdego z klawiszy moze byc tym samym portem 
                      00339 
  00000005            00340 port_klawisz_gora               equ             PORTA
  00000005            00341 port_klawisz_dol                equ             PORTA
  00000005            00342 port_klawisz_enter              equ             PORTA
                      00343 
                      00344 
  00000004            00345 pin_klawisz_gora                equ             4
  00000003            00346 pin_klawisz_enter               equ             3
  00000002            00347 pin_klawisz_dol                 equ             2
                      00348 
                      00349 
                      00350 
                      00351 
                      00352 
                      00353 ;stan_key
                      00354 ;w tym rejestrze przechowuje ktore klawisze zostaly wcisniete
                      00355 ;sens tego jest taki, ze musi byc sprawdzone co jakis czas czy ten sam klawisz jest wciaz wcisniety
                      00356 ;wszystkie bity te same co w port_key
                      00357 
  00000000            00358 wcisniety_jest_klawisz_dol      equ     0
MPASM  5.51     PROGRAM_STERUJACY_WERSJA2.ASM   8-7-2014  19:31:38         PAGE  8


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

  00000001            00359 wcisniety_jest_klawisz_zmiana   equ     1
  00000002            00360 wcisniety_jest_klawisz_enter    equ     2
                      00361 
                      00362 
  00000006            00363 kb_wcisnieto      equ      6
  00000007            00364 kb_sprawdz        equ      7
                      00365 
                      00366 
                      00367 
                      00368 
                      00369 
                      00370 
                      00371 
                      00372 
                      00373 
                      00374 
                      00375 
                      00376 
                      00377 ;markers_klawisze
                      00378 
  00000000            00379 wcisnieto_klawisz               equ             0
  00000001            00380 minal_czas_zlicz_po_wcisnieciu          equ             1
                      00381 
                      00382 
                      00383 ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
                      00384 ;;;;;;;;;                                               ustawienie LCD
                      00385 ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
                      00386 ;definicja bitow uzywanych w 4 bitowym przesylaniu 0 - uzywany 1 - nieuzywany
                      00387 ;zwiazane z opcja kasowania
  000000F0            00388 ktore_bity_uzywane_na_lcd     equ   0xf0
                      00389 
  0000000F            00390 ktore_bity_lcd_tris           equ   0x0f
  00000080            00391 normalne_ustawienie_tris_lcd  equ   b'10000000'
                      00392 
                      00393 ;jaka inicjalizacja ekranu
                      00394 
                      00395 ;;                                1, DL (1 - 8 bit, 0 -4 bit), N - ilosc linii (1 - 2 linie), F = font  
                             
  00000028            00396 set_4bit                  equ      b'00101000' ;  4bit, 2 linie,font 5x8
                      00397 ;;;                                 DCB  D = display 0 -wylacz, Cursor = 1/0 Blinking=1/0 
  0000000C            00398 display_set         equ      b'00001100' ;ustawia blinking,cursor,
                      00399 
                      00400 ;;;ustawiam entry                           I,S 
  00000006            00401 set_entry           equ             b'00000110' ;increment I=1, Shift = 1/0
                      00402 
                      00403 
                      00404 
                      00405 
                      00406 
                      00407 
                      00408 
                      00409 
                      00410 
MPASM  5.51     PROGRAM_STERUJACY_WERSJA2.ASM   8-7-2014  19:31:38         PAGE  9


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00411 
  00000007            00412 port_lcd          equ      PORTC
  00000007            00413 port_lcd_e        equ      PORTC
  00000007            00414 port_lcd_rw       equ      PORTC
  00000007            00415 port_lcd_rs       equ      PORTC
  00000087            00416 tris_lcd          equ      TRISC
                      00417 
                      00418 
  00000006            00419 enable            equ      6
  00000004            00420 rs                equ      4
  00000005            00421 rw                equ      5
                      00422 
                      00423 
  00000016            00424 ile_znakow        equ      16
                      00425 
                      00426 ; jezeli 4 bity lcd znajduja sie obok siebie w rejestrze
                      00427 ;w dolnych 4 bitach to tu ma byc 0
  00000000            00428 polozenie_danych_lcd  equ    0
                      00429 
                      00430 
                      00431 
  00000006            00432 port_start_lodowki                equ       PORTB
  00000000            00433 pin_kompresor                 equ      0
  00000001            00434 pin_start_all                 equ      1
                      00435 
  00000005            00436 port_lampka                     equ       PORTA
  00000005            00437 pin_lampka                      equ     5
                      00438 
                      00439 
  00000009            00440 polozenie_wartosci    equ      0x09
  00000008            00441 polozenie_gwiazdki_opcji    equ      0x08
                      00442 
                      00443 
                      00444 ;       pomiary temp
                      00445 ;jak_duzo_zliczen_TMR1_do_pomiaru        equ     0xf
                      00446 
                      00447 ;0x40 - 64 próbki
                      00448 ;0x80  - 128 próbek
                      00449 ;jak_duzo_probek            equ      0x80
                      00450 
                      00451 
                      00452 ;dla 20MHz
                      00453 ;*5
  00000024            00454 t2con_dla_60us           equ   b'00100100'
                      00455 ;*10
  0000004C            00456 t2con_dla_480us          equ   b'01001100'
                      00457 
                      00458 ;0x3f - dla 4 MHz
                      00459 ;
                      00460 ;movlw   
                      00461 ;movwf    T2CON
  0000003C            00462 czas_oczekiwania_60us         equ   0x3c
  000000F0            00463 czas_oczekiwania_480us        equ   0xf0
MPASM  5.51     PROGRAM_STERUJACY_WERSJA2.ASM   8-7-2014  19:31:38         PAGE 10


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00464 
  00000006            00465 port_ds1820      equ      PORTB
  00000086            00466 tris_ds1820      equ      TRISB
  00000005            00467 czujnik_ds1820_1  equ      5       
                      00468 
  00000040            00469 histereza       equ      0x40
                      00470 
                      00471 ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;markers_pomiary     
                      00472 
  00000000            00473 czy_wykonuje_pomiar_DS1                equ      0
  00000001            00474 czy_wywoluje_inicjacje_ds_call               equ      1              
  00000002            00475 czy_czytam_ID_DS1             equ   2     
  00000003            00476 czekam_na_odczyt_DS1          equ   3        
  00000004            00477 odczytaj_pomiar_DS1           equ   4
  00000005            00478 wyswietl_wartosc_dziesietna   equ   5
  00000006            00479 wysylam_rozkaz_pomiaru          equ     6
  00000007            00480 wysylam_rozkaz_odbioru          equ   7
                      00481 
  0000000A            00482 jak_duzo_zliczen_TMR1_do_pomiaru        equ     0xa
                      00483 
                      00484 
                      00485 
                      00486 
                      00487 
                      00488 
                      00489 
                      00490 
                      00491 
                      00492 
                      00493 
                      00494 
                      00495 ;
0000                  00496          org      0000h
0000                  00497 BEGIN
                      00498          ;bsf      PCLATH,3
                      00499          ;bcf      PCLATH,4
                      00500 
0000   158A 120A      00501                  Pagesel inicjacja
                      00502          
Message[306]: Crossing page boundary -- ensure page bits are set.
0002   2800           00503          goto     inicjacja
                      00504                   
                      00505          
0004                  00506          org      0004h
                      00507          
0004                  00508 przerwanie        
                      00509 ;zachowuje rejestr W
0004   00A0           00510          movwf    w_temp
                      00511 ;zachowuje rejestr STATUS
0005   0E03           00512          swapf    STATUS,w
0006   0183           00513          clrf     STATUS
0007   00A1           00514          movwf    status_temp
                      00515                 
MPASM  5.51     PROGRAM_STERUJACY_WERSJA2.ASM   8-7-2014  19:31:38         PAGE 11


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

0008   080A           00516          movf     PCLATH,w
0009   00A2           00517          movwf    pclath_temp
000A   018A           00518          clrf     PCLATH
000B   0804           00519          movf     FSR,w
000C   00C1           00520          movwf    fsr_temp
                      00521          
                      00522 ;po to by wszystkie ustawienia banki itd byly na 0    
                      00523          ;bcf      STATUS,RP0
                      00524 
                      00525          ;btfss    INTCON,RBIE
                      00526          ;goto     przerwanie_0
                      00527          ;btfss    INTCON,RBIF
                      00528          ;goto     przerwanie_0
                      00529          
                      00530          ;bsf      markers,przerwanie_rb
                      00531          
                      00532          ;goto     wyjscie_przerwanie
                      00533          
                      00534          
                      00535          ;btfss    PIE1,RCIE
                      00536          ;goto     przerwanie_0
                      00537          
000D   1683 1303      00538          banksel  PIE1
                      00539          
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
000F   1C8C           00540          btfss    PIE1,TMR2IE
0010   2815           00541          goto     przerwanie_0
                      00542          
0011   1283 1303      00543          banksel  PIR1
0013   188C           00544          btfsc    PIR1,TMR2IF
0014   2842           00545          goto     wykryto_t2
                      00546          
                      00547          
                      00548          
0015                  00549 przerwanie_0
                      00550         ; banksel  PIE1
                      00551         ; btfss    PIE1,ADIE
                      00552         ; goto     przerwanie_1
                      00553          
                      00554         ; banksel  PIR1
                      00555          ; btfsc    PIR1,ADIF
                      00556          ; goto     przerwanie_pomiaru
                      00557 
0015                  00558 przerwanie_1      
0015   1683 1303      00559         banksel  PIE1
                      00560          
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
0017   1C0C           00561          btfss    PIE1,TMR1IE
0018   281D           00562          goto     przerwanie_2
                      00563          
0019   1283 1303      00564         banksel  PIR1
001B   180C           00565          btfsc    PIR1,TMR1IF
001C   2837           00566          goto     wykryto_t1
MPASM  5.51     PROGRAM_STERUJACY_WERSJA2.ASM   8-7-2014  19:31:38         PAGE 12


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00567 
001D                  00568 przerwanie_2  
001D   1283 1303      00569         banksel  0
001F   1E8B           00570          btfss     INTCON,T0IE
0020   2823           00571          goto      przerwanie_3
                      00572 
                      00573          
0021   190B           00574          btfsc    INTCON,T0IF
0022   282C           00575          goto     wykryto_t0 
0023                  00576 przerwanie_3      
                      00577 
                      00578          
0023                  00579 przerwanie_4
                      00580        
0023                  00581 przerwanie_5
                      00582          
                      00583          
                      00584         
                      00585          
                      00586 ;        jezeli nic nie wykryto
                      00587          
0023                  00588 wyjscie_przerwanie
0023   0841           00589       movf     fsr_temp,w
0024   0084           00590          movwf    FSR
0025   0822           00591          movf     pclath_temp,w
0026   008A           00592          movwf    PCLATH
0027   0E21           00593          swapf    status_temp,w
0028   0083           00594          movwf    STATUS
0029   0EA0           00595          swapf    w_temp,f
002A   0E20           00596          swapf    w_temp,w
                      00597          
                      00598 ;        bsf      INTCON,GIE
                      00599 ;        bsf      
002B   0009           00600          retfie
                      00601 
                      00602 
                      00603          
002C                  00604 wykryto_t0
                      00605 ;uzywam z klawiszami
002C   110B           00606          bcf      INTCON,T0IF
002D   1283 1303      00607                  banksel  0
                      00608                  ;decf          zliczenia_przerwania_TMR0,f
                      00609                  ;bsf           portlampki,pin_lampki   
002F   0BC2           00610          decfsz   zliczenia_przerwania_TMR0,f
0030   2823           00611          goto     wyjscie_przerwanie                  
                      00612 ;jezeli minelo ilosc zliczen zegara TMR0, trzeba sprawdzic czy dalej jest wcisniety klawisz
                      00613 
0031   3003           00614          movlw    jak_duzo_zliczen_TMR0
0032   00C2           00615          movwf          zliczenia_przerwania_TMR0
                      00616 
                      00617 ;jezeli wciaz wcisniety jest przycisk to sprawdz to
                      00618 
                      00619 ;wylacz przerwanie tmr0
MPASM  5.51     PROGRAM_STERUJACY_WERSJA2.ASM   8-7-2014  19:31:38         PAGE 13


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

0033   110B           00620          bcf      INTCON,T0IF
0034   128B           00621          bcf      INTCON,T0IE         
                      00622 
                      00623 ;wlacz znacznik ktory oznacza ze nalezy przejsc do procedury przycisku
0035   14C4           00624          bsf     markers_klawisze,minal_czas_zlicz_po_wcisnieciu 
                      00625    
0036   2823           00626          goto     wyjscie_przerwanie                  
                      00627                                    
0037                  00628 wykryto_t1
0037   100C           00629          bcf      PIR1,TMR1IF
                      00630          
                      00631          ;u¿ywany do kontroli pomiaru temperatury ds - em
                      00632 
                      00633          ; co sekunde
                      00634          
                      00635         
                      00636         ; btfsc    port_start_lodowki,pin_start_all
                      00637         ; goto    zapal_t1
                      00638         
                      00639         
                      00640         ; bsf     port_start_lodowki,pin_start_all     
                      00641         ; goto    wykryto_t1_1
                      00642 ; zapal_t1        
                      00643         
                      00644         ; bcf     port_start_lodowki,pin_start_all     
                      00645          
                      00646          
                      00647 ; wykryto_t1_1         
0038   0BD2           00648         decfsz  ile_zliczen_do_pomiaru_temp,f
0039   2823           00649         goto     wyjscie_przerwanie                  
                      00650         
                      00651          ;wylacz przerwanie tmr1
                      00652          
                      00653          ; banksel  PIE1
                      00654          ; bcf      PIE1,TMR1IE
                      00655          ; banksel  0
                      00656 
                      00657          
                      00658         
                      00659         ;je¿eli  min¹³ czas zliczania TMR1 to w³¹cz polecenie pomiaru
                      00660         ; bcf     PIR1,ADIF
                      00661         ; bsf     ADCON0,GO_DONE
                      00662         
003A   300A           00663         movlw    jak_duzo_zliczen_TMR1_do_pomiaru
003B   00D2           00664         movwf    ile_zliczen_do_pomiaru_temp
                      00665          
003C   19C5           00666          btfsc  markers_pomiary,czekam_na_odczyt_DS1
003D   2840           00667          goto   wykryto_t1_nakaz_odczytu
                      00668          
003E   1543           00669          bsf    markers,wykonaj_pomiar
                      00670          
                      00671          
                      00672          
MPASM  5.51     PROGRAM_STERUJACY_WERSJA2.ASM   8-7-2014  19:31:38         PAGE 14


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

003F   2823           00673          goto     wyjscie_przerwanie                  
                      00674 
0040                  00675 wykryto_t1_nakaz_odczytu
0040   1645           00676         bsf      markers_pomiary,odczytaj_pomiar_DS1
                      00677         
                      00678         ; btfsc    port_lampka,pin_lampka
                      00679         ; goto    zapal_t1
                      00680         
                      00681         
                      00682         ; bsf     port_lampka,pin_lampka
                      00683         ; goto    wykryto_t1_1
0041                  00684 zapal_t1        
                      00685         
                      00686         ; bcf     port_lampka,pin_lampka
                      00687          
                      00688          
0041                  00689 wykryto_t1_1         
                      00690         
0041   2823           00691         goto     wyjscie_przerwanie                  
                      00692         
                      00693 
                      00694 
                      00695                            
                      00696 
                      00697          
                      00698 
                      00699          
0042                  00700 wykryto_t2
                      00701 ;uzywam w dzkialaniu czujnika ds
0042   108C           00702         bcf      PIR1,TMR2IF
                      00703         
                      00704  
                      00705         
0043   2823           00706         goto     wyjscie_przerwanie
                      00707 
                      00708 
                      00709 
                      00710     
                      00711         
                      00712          
                      00713          
                      00714          
                      00715          
                      00716          
                      00717          
                      00718          
                      00719 
                      00720 
                      00721 
                      00722 ;;;;;;;;;;;;;;;;;;;;;MENU
                      00723 
                      00724 
                      00725 
MPASM  5.51     PROGRAM_STERUJACY_WERSJA2.ASM   8-7-2014  19:31:38         PAGE 15


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00726 
                      00727 
                      00728 ;;;;;;;;;;;;;;;;;;;;;;;;Procedura która wyœwietla opcje aktualne!
0044                  00729 Znajdz_wartosc_opcji
                      00730 ;
                      00731 ;tu wybieram opcje do wyswietlenia obok opcji w menu
                      00732 ;
                      00733          
0044   1043           00734          bcf    markers,poprzednio_cyfra_zero
0045   0824           00735          movf     tmp,w
                      00736          
                      00737          
                      00738          
                      00739          
0046   0084           00740          movwf    FSR
                      00741          
                      00742          ;sprawdz czy nie mam wyswietlac temperatury
                      00743          
                      00744          
                      00745          
                      00746          
                      00747          
                      00748          
0047   304B           00749          movlw    wartosc_opcji_uruchom
0048   0784           00750          addwf    FSR,f
                      00751          
                      00752          
0049   304D           00753          movlw   wartosc_opcji_temp
004A   0604           00754          xorwf    FSR,w
004B   1903           00755          btfsc   STATUS,Z
004C   2859           00756          goto     Znajdz_wartosc_opcji_temper
                      00757          
                      00758          
004D   304C           00759          movlw   wartosc_opcji_nastawa
004E   0604           00760          xorwf    FSR,w
004F   1903           00761          btfsc   STATUS,Z
0050   2882           00762          goto     Znajdz_wartosc_opcji_nastawy
                      00763          
                      00764          
                      00765          
0051   304E           00766          movlw   wartosc_opcji_hex
0052   0604           00767          xorwf    FSR,w
0053   1903           00768          btfsc   STATUS,Z
0054   28AF           00769          goto     Znajdz_wartosc_opcji_hex
                      00770          
                      00771          
0055   01BC           00772          clrf     dzielonah
                      00773          ;jezeli wyswietlam czas trwania w³¹czenia
                      00774          ;to wtedy mam te¿ starszy bajt do podzia³u
                      00775          
                      00776          
0056   0800           00777          movf     INDF,w
                      00778          
MPASM  5.51     PROGRAM_STERUJACY_WERSJA2.ASM   8-7-2014  19:31:38         PAGE 16


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

0057   2274           00779          call     wyswietl_liczbe_1bajtowa
                      00780          
                      00781          
                      00782          
0058   0008           00783          return
                      00784 
                      00785          
0059                  00786 Znajdz_wartosc_opcji_temper
0059   10C3           00787         bcf     markers,wartosc_ujemna
005A   15C3           00788         bsf     markers,aktualizuj_temp_co_sekunde
                      00789         
005B   1FCD           00790         btfss   wartosc_opcji_temp,7
005C   2862           00791         goto    Znajdz_wartosc_opcji_temper_1
                      00792         
005D   14C3           00793         bsf     markers,wartosc_ujemna
                      00794         
005E   2185           00795         call     check_busy4bit
005F   302D           00796         movlw   _minus
0060   2163           00797         call     write_lcd
0061   2185           00798         call     check_busy4bit
                      00799         
                      00800         
                      00801         
0062                  00802 Znajdz_wartosc_opcji_temper_1        
0062   084D           00803         movf     wartosc_opcji_temp,w
                      00804         
0063   1BCD           00805         btfsc   wartosc_opcji_temp,7
0064   094D           00806         comf    wartosc_opcji_temp,w
                      00807         
0065   00A9           00808         movwf   dec1
                      00809         
                      00810         
0066   0834           00811         movf     wynik01_temp,w
0067   1FCD           00812         btfss   wartosc_opcji_temp,7
0068   286D           00813         goto     Znajdz_wartosc_opcji_temper_2
                      00814         
0069   0934           00815         comf    wynik01_temp,w
                      00816         
                      00817         
006A   3E01           00818         addlw   1
                      00819         
                      00820         
006B   1903           00821         btfsc   STATUS,Z
006C   0AA9           00822         incf    dec1,f
                      00823         
                      00824         
                      00825         
006D                  00826 Znajdz_wartosc_opcji_temper_2        
006D   00AE           00827         movwf   dec01_temp
                      00828         
006E   0829           00829         movf    dec1,w
006F   2274           00830         call     wyswietl_liczbe_1bajtowa
                      00831         
MPASM  5.51     PROGRAM_STERUJACY_WERSJA2.ASM   8-7-2014  19:31:38         PAGE 17


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

0070   2185           00832          call     check_busy4bit
0071   302E           00833          movlw    _kropka
0072   2163           00834          call     write_lcd
                      00835         
0073   082E           00836         movf   dec01_temp,w
                      00837 
0074   2234           00838          call     hex2dec_ulamek_tysieczny
                      00839          
0075   2185           00840          call     check_busy4bit
                      00841          
0076   0827           00842          movf     dec100,w         
0077   3E30           00843          addlw    0x30
0078   2163           00844          call     write_lcd
                      00845          
0079   2185           00846          call     check_busy4bit
                      00847          
007A   0828           00848          movf     dec10,w         
007B   3E30           00849          addlw    0x30
007C   2163           00850          call     write_lcd
                      00851 
007D   2185           00852          call     check_busy4bit
                      00853          
007E   0829           00854          movf     dec1,w         
007F   3E30           00855          addlw    0x30
0080   2163           00856          call     write_lcd
                      00857         ;wyswietl ulamek
                      00858         
0081   0008           00859         return
                      00860                 
                      00861          
                      00862          
                      00863          
                      00864 
                      00865 
                      00866 
                      00867 
                      00868 
                      00869 
                      00870 
                      00871 
0082                  00872 Znajdz_wartosc_opcji_nastawy
                      00873 ;w tej procedurze przeksztalcam liczbe ujemna zapisana jako inwersja liczby bez znaku
                      00874 ; dzieki temu latwiej bedzie porownywac z temperatura z ds
                      00875          
                      00876          ; clrf   wynik01_temp
                      00877          ; clrf   nastawa_temp_01
                      00878          
0082   084C           00879          movf   wartosc_opcji_nastawa,w
0083   00D4           00880          movwf  nastawa_temp
                      00881          
                      00882          ;jezeli ustawiony 7 bit znaczy ze jest to wiecej niz 127 czyli teraz jest -127
0084   1BD4           00883          btfsc   nastawa_temp,7 
0085   14C3           00884          bsf     markers,wartosc_ujemna
MPASM  5.51     PROGRAM_STERUJACY_WERSJA2.ASM   8-7-2014  19:31:38         PAGE 18


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00885          
                      00886          ;jezeli jest 0 w nastawie temperatury
                      00887          ; movf     wartosc_opcji_nastawa,w
                      00888          ; btfs
                      00889          ; movf     nastawa_temp_01,w
                      00890          
                      00891          
                      00892          
0086   1CC3           00893          btfss    markers,wartosc_ujemna
0087   2889           00894          goto     Znajdz_wartosc_opcji_nastawy1
                      00895          
0088   09D4           00896          comf     nastawa_temp,f         
                      00897          
                      00898          
                      00899          ;btfsc    markers,wartosc_ujemna
                      00900          ;incf     nastawa_temp,f
                      00901          ; movf     nastawa_temp_01,w
                      00902          
                      00903          
                      00904          
                      00905          
                      00906          
                      00907          ; movf     nastawa_temp,w
                      00908          ; bcf    STATUS,C
                      00909          ; rrf      nastawa_temp,f
                      00910          
                      00911          ; movlw  0x80
                      00912          ; btfsc  STATUS,C
                      00913          
                      00914          ; movwf     nastawa_temp_01
                      00915          
0089                  00916 Znajdz_wartosc_opcji_nastawy1         
0089   2185           00917          call     check_busy4bit
008A   3020           00918          movlw  _puste
                      00919          
008B   18C3           00920          btfsc  markers,wartosc_ujemna
008C   302D           00921          movlw  _minus         
008D   2163           00922          call     write_lcd         
008E   2185           00923          call     check_busy4bit
                      00924          
                      00925          
                      00926          
008F   0854           00927          movf     nastawa_temp,w
0090   2274           00928          call     wyswietl_liczbe_1bajtowa
                      00929          
0091   2185           00930          call     check_busy4bit
0092   302E           00931          movlw    _kropka
0093   2163           00932          call     write_lcd
0094   2185           00933          call     check_busy4bit
                      00934          
0095   0855           00935          movf     nastawa_temp_01,w
0096   2234           00936          call     hex2dec_ulamek_tysieczny
                      00937          
MPASM  5.51     PROGRAM_STERUJACY_WERSJA2.ASM   8-7-2014  19:31:38         PAGE 19


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00938          
                      00939          
0097   0827           00940          movf     dec100,w         
0098   3E30           00941          addlw    0x30
0099   2163           00942          call     write_lcd
                      00943          
009A   2185           00944          call     check_busy4bit
                      00945          
009B   0828           00946          movf     dec10,w         
009C   3E30           00947          addlw    0x30
009D   2163           00948          call     write_lcd
                      00949 
009E   2185           00950          call     check_busy4bit
                      00951          
009F   0829           00952          movf     dec1,w         
00A0   3E30           00953          addlw    0x30
00A1   2163           00954          call     write_lcd
                      00955 
                      00956          
00A2   10C3           00957          bcf     markers,wartosc_ujemna
00A3   0008           00958          return         
                      00959          
                      00960          
                      00961          
                      00962          
00A4                  00963 zamien_na_hex
                      00964 ;jezeli po odjeciu 0a jest niezanaczony bit C
                      00965 ;to znaczy ze dodaj 
00A4   00A5           00966          movwf    tmp7
00A5   300A           00967          movlw    0x0a
00A6   0225           00968          subwf    tmp7,w
00A7   1C03           00969          btfss    STATUS,C
00A8   28AC           00970          goto     cyfry_0_9
00A9   0825           00971          movf     tmp7,w
00AA   3E37           00972          addlw    0x37
00AB   0008           00973          return
00AC                  00974 cyfry_0_9         
00AC   0825           00975          movf     tmp7,w
00AD   3E30           00976          addlw    0x30
00AE   0008           00977          return
                      00978          
                      00979          
                      00980          
00AF                  00981 Znajdz_wartosc_opcji_hex         
00AF   2185           00982          call     check_busy4bit
                      00983          
                      00984          
00B0   30A0           00985          movlw    dane_odebrane_z_ds
00B1   0084           00986          movwf    FSR
                      00987          
                      00988          
00B2   0A84           00989          incf   FSR,f
                      00990          
MPASM  5.51     PROGRAM_STERUJACY_WERSJA2.ASM   8-7-2014  19:31:38         PAGE 20


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00991          
00B3   0E00           00992          swapf  INDF,w
00B4   390F           00993          andlw  0x0f
                      00994          
00B5   20A4           00995          call   zamien_na_hex
00B6   2163           00996          call     write_lcd
00B7   2185           00997          call     check_busy4bit
                      00998          
00B8   0800           00999          movf   INDF,w
                      01000          
00B9   390F           01001          andlw  0x0f
                      01002          
00BA   20A4           01003          call  zamien_na_hex
                      01004          
00BB   2163           01005          call     write_lcd
00BC   2185           01006          call     check_busy4bit
                      01007          
00BD   0384           01008          decf   FSR,f
                      01009          
                      01010          
00BE   0E00           01011          swapf  INDF,w
00BF   390F           01012          andlw  0x0f
                      01013          
00C0   20A4           01014          call  zamien_na_hex
                      01015          
00C1   2163           01016          call     write_lcd
00C2   2185           01017          call     check_busy4bit
                      01018          
00C3   0800           01019          movf   INDF,w
                      01020          
00C4   390F           01021          andlw  0x0f
                      01022          
00C5   20A4           01023          call  zamien_na_hex
                      01024          
00C6   2163           01025          call     write_lcd
00C7   2185           01026          call     check_busy4bit
                      01027          
                      01028          
                      01029          
00C8   0008           01030          return
                      01031          
                      01032 
                      01033 
                      01034 
                      01035 
                      01036 
                      01037 
                      01038 
                      01039 
                      01040 
                      01041          
                      01042          
00C9                  01043 Znajdz_litere_dla_linii
MPASM  5.51     PROGRAM_STERUJACY_WERSJA2.ASM   8-7-2014  19:31:38         PAGE 21


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      01044 
00C9   3009           01045          movlw HIGH opcja0
00CA   008A           01046          movwf    PCLATH
                      01047          
                      01048          
00CB   0824           01049          movf     tmp,w
00CC   3A00           01050          xorlw    0
00CD   1903           01051          btfsc    STATUS,Z
Message[306]: Crossing page boundary -- ensure page bits are set.
00CE   2900           01052          goto     opcja0
                      01053          
00CF   0824           01054          movf     tmp,w
00D0   3A01           01055          xorlw    1
00D1   1903           01056          btfsc    STATUS,Z
Message[306]: Crossing page boundary -- ensure page bits are set.
00D2   290C           01057          goto     opcja1
                      01058          
00D3   0824           01059          movf     tmp,w
00D4   3A02           01060          xorlw    2
00D5   1903           01061          btfsc    STATUS,Z
Message[306]: Crossing page boundary -- ensure page bits are set.
00D6   2918           01062          goto     opcja2
                      01063 
                      01064 
00D7   0824           01065          movf     tmp,w
00D8   3A03           01066          xorlw    3
00D9   1903           01067          btfsc    STATUS,Z
Message[306]: Crossing page boundary -- ensure page bits are set.
00DA   2920           01068          goto     opcja3
                      01069          
                      01070          ; movf     tmp,w
                      01071          ; xorlw    4
                      01072          ; btfsc    STATUS,Z
                      01073          ; goto     opcja4
                      01074          
                      01075          ;movf     tmp,w
                      01076          ;xorlw    5
                      01077          ;btfsc    STATUS,Z
                      01078          ; goto     opcja5
                      01079          
                      01080          ; movf     tmp,w
                      01081          ; xorlw    6
                      01082          ; btfsc    STATUS,Z
                      01083          ; goto     opcja6
                      01084          
                      01085          
                      01086          
00DB   0008           01087          return
                      01088          
                      01089          
                      01090 
                      01091 
                      01092 
MPASM  5.51     PROGRAM_STERUJACY_WERSJA2.ASM   8-7-2014  19:31:38         PAGE 22


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      01093 
                      01094 
                      01095 
                      01096 
                      01097          
                      01098          
                      01099          
00DC                  01100 Wyswietlanie_Menu
                      01101 
                      01102 
00DC   11C3           01103         bcf     markers,aktualizuj_temp_co_sekunde
00DD   13C3           01104          bcf    markers,odswiez_ekran
                      01105          ;czyszczenie ca³ego ekranu
00DE   2185           01106          call     check_busy4bit
00DF   3001           01107          movlw    display_clear
00E0   214D           01108          call     send
                      01109          ;opcja_menu   - tu przechowywana jest wartoœæ wskazywanej opcji
                      01110          
                      01111          
                      01112          
                      01113          
                      01114          ;numer opcji jest wartoœci¹ rejestru w którym jest przechowywana tablica z adresami tablic z op
                            cjami ekranu
00E1   2185           01115          call     check_busy4bit
                      01116          
00E2   01CA           01117          clrf     znak_linia
                      01118          ;clrf     znak_linia2
                      01119          
00E3   3080           01120          movlw   linia_pierwsza
00E4   3E01           01121          addlw    0x01
00E5   214D           01122          call    send
                      01123          
00E6                  01124 Wyswietlanie_Menu_linia_1   
                      01125 
                      01126 
00E6   2185           01127          call     check_busy4bit
                      01128               
                      01129         
                      01130          
                      01131          
                      01132          
                      01133          
                      01134          
                      01135          ;movf     znak_linia1,w
                      01136          ;jezeli jest wyswietlana opcja 0 i przycisk nie byl wcisniety to wyswietl tu opcja0
                      01137          
00E7   0846           01138          movf     opcja_menu,w
00E8   00A4           01139          movwf    tmp
                      01140                 
00E9   1848           01141          btfsc    znaczniki_klawiszy_menu,opcje_po_przycisku_dol
00EA   03A4           01142          decf     tmp,f
                      01143          
                      01144          ;ale jezeli jest 0
MPASM  5.51     PROGRAM_STERUJACY_WERSJA2.ASM   8-7-2014  19:31:38         PAGE 23


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      01145          
00EB   18C8           01146          btfsc    znaczniki_klawiszy_menu,opcje_po_przycisku_gora
00EC   0000           01147          nop
                      01148          
00ED   1948           01149          btfsc    znaczniki_klawiszy_menu,opcja_bez_przycisku
00EE   0000           01150          nop
                      01151           
                      01152         
                      01153          
                      01154          ;jezeli opcja_menu == 0 wyswietl t¹ opcje:
                      01155          
00EF   20C9           01156          call     Znajdz_litere_dla_linii
                      01157          
                      01158          
00F0   018A           01159          clrf     PCLATH
                      01160 
00F1   3A00           01161          xorlw    0
00F2   1903           01162          btfsc    STATUS,Z
00F3   28F7           01163          goto     Wyswietlanie_Menu_linia_1_Value
                      01164          
00F4   0ACA           01165          incf     znak_linia,f
00F5   2163           01166          call     write_lcd
                      01167 
00F6   28E6           01168          goto    Wyswietlanie_Menu_linia_1
                      01169 
00F7                  01170 Wyswietlanie_Menu_linia_1_Value
                      01171          
00F7   2185           01172          call     check_busy4bit
                      01173          
                      01174          
                      01175          ;je¿eli wyœwietlam opcje z kolejnoœci¹ cylindrów wtedy  polozenie wartoœci jest mniejsze
                      01176          
                      01177          
                      01178          ; movlw    numer_opcji_czas_wlacz
                      01179          ; xorwf    tmp,w
                      01180          ; btfss    STATUS,Z
                      01181          ; goto     Wyswiet_Menu_linia_1_Value_Norm
                      01182          
                      01183          ; movlw    linia_gorna
                      01184          ; addlw    polozenie_wartosci
                      01185          
                      01186 ; Wyswiet_Menu_linia_1_Value_Norm         
00F8   3080           01187          movlw    linia_gorna
00F9   3E09           01188          addlw    polozenie_wartosci
                      01189          
                      01190          
00FA   214D           01191          call     send
                      01192 
00FB   2044           01193          call     Znajdz_wartosc_opcji
                      01194          
00FC   2902           01195          goto     Wyswietl_Menu_linia_2_poczatek
                      01196          
00FD                  01197 Wyswiet_Menu_linia_1_Val_kol_cyl
MPASM  5.51     PROGRAM_STERUJACY_WERSJA2.ASM   8-7-2014  19:31:38         PAGE 24


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

00FD   3080           01198          movlw    linia_gorna
00FE   3E07           01199          addlw    7
                      01200 
                      01201          
00FF   214D           01202          call     send
                      01203 
0100   2044           01204          call     Znajdz_wartosc_opcji
                      01205          
0101   2902           01206          goto     Wyswietl_Menu_linia_2_poczatek
                      01207          
0102                  01208 Wyswietl_Menu_linia_2_poczatek
0102   2185           01209       call     check_busy4bit
                      01210 
0103   30C0           01211          movlw   linia_druga
0104   3E01           01212          addlw    0x01
0105   214D           01213          call    send
                      01214  
0106   01CA           01215          clrf     znak_linia
                      01216          
0107                  01217 Wyswietlanie_Menu_linia_2      
                      01218          
0107   2185           01219          call     check_busy4bit
                      01220         
                      01221 
                      01222          
0108   0846           01223          movf     opcja_menu,w
0109   00A4           01224          movwf    tmp
                      01225             
                      01226 
                      01227          ;na drugiej linii po nacisnieciu przycisku w dol jest wyswietlana wybrana opcja   
010A   1848           01228          btfsc    znaczniki_klawiszy_menu,opcje_po_przycisku_dol
010B   0000           01229          nop
                      01230          ;na drugiej linii po nacisnieciu przycisku w gore jest wyswietlana opcja nastepna - nie wybrana
                               
010C   18C8           01231          btfsc    znaczniki_klawiszy_menu,opcje_po_przycisku_gora
010D   0AA4           01232          incf     tmp,f
                      01233          
010E   1948           01234          btfsc    znaczniki_klawiszy_menu,opcja_bez_przycisku
010F   0AA4           01235          incf     tmp,f
                      01236           
                      01237                  
                      01238                  
0110   20C9           01239          call     Znajdz_litere_dla_linii
                      01240           
0111   018A           01241           clrf     PCLATH
                      01242 
0112   3A00           01243          xorlw    0
0113   1903           01244          btfsc    STATUS,Z
0114   2918           01245          goto     Wyswietlanie_Menu_linia_2_Value
                      01246 
0115   0ACA           01247          incf     znak_linia,f
                      01248          
0116   2163           01249          call     write_lcd
MPASM  5.51     PROGRAM_STERUJACY_WERSJA2.ASM   8-7-2014  19:31:38         PAGE 25


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      01250 
0117   2907           01251          goto    Wyswietlanie_Menu_linia_2
                      01252 
0118                  01253 Wyswietlanie_Menu_linia_2_Value
                      01254          
0118   2185           01255          call     check_busy4bit
                      01256          
                      01257          
                      01258                ;je¿eli wyœwietlam opcje z kolejnoœci¹ cylindrów wtedy  polozenie wartoœci jest mniejsze
                      01259          
                      01260          
                      01261          
0119   30C0           01262          movlw    linia_dolna
011A   3E09           01263          addlw    polozenie_wartosci
                      01264          
011B   214D           01265          call     send
                      01266 
011C   2044           01267          call     Znajdz_wartosc_opcji
                      01268         
                      01269          
011D   2923           01270          goto     Wyswietlanie_Menu_gwiazdka
                      01271          
011E                  01272 Wyswiet_Menu_linia_2_Val_kol_cyl
011E   30C0           01273          movlw    linia_dolna
011F   3E07           01274          addlw    7
                      01275 
                      01276          
0120   214D           01277          call     send
                      01278 
0121   2044           01279          call     Znajdz_wartosc_opcji
                      01280          
0122   2923           01281          goto     Wyswietlanie_Menu_gwiazdka
                      01282          
                      01283          
                      01284          
                      01285          
                      01286           
0123                  01287 Wyswietlanie_Menu_gwiazdka
                      01288 
                      01289 
                      01290          ;czyszczenie gwiazdek
0123   2185           01291          call     check_busy4bit
0124   3080           01292          movlw    linia_gorna
0125   214D           01293          call send
                      01294          
                      01295          
0126   2185           01296          call     check_busy4bit
0127   3020           01297          movlw    _puste
0128   2163           01298          call   write_lcd
                      01299          
0129   2185           01300          call     check_busy4bit
012A   30C0           01301          movlw    linia_dolna
012B   214D           01302          call send
MPASM  5.51     PROGRAM_STERUJACY_WERSJA2.ASM   8-7-2014  19:31:38         PAGE 26


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      01303          
                      01304          
012C   2185           01305          call     check_busy4bit
012D   3020           01306          movlw    _puste
012E   2163           01307          call   write_lcd
                      01308          
                      01309          
012F   2185           01310          call     check_busy4bit
                      01311          
                      01312          
0130   3080           01313          movlw    linia_gorna
                      01314          
0131   1848           01315          btfsc    znaczniki_klawiszy_menu,opcje_po_przycisku_dol
0132   30C0           01316          movlw    linia_dolna
                      01317          
0133   18C8           01318          btfsc    znaczniki_klawiszy_menu,opcje_po_przycisku_gora
0134   3080           01319          movlw    linia_gorna
                      01320          
                      01321          
                      01322          ;je¿eli ustawiono opcjê kolejnoœci to wtedy gwiazdka powinna siê znaleŸæ w innym miejscu
                      01323          
0135   00D3           01324          movwf     tmp_linia
                      01325          ;jezeli ustawiono zmiane opcji to dodaj jeszcze przesuniecie do opcji -1
0136   1CC9           01326          btfss    stan_menu,wybor_opcji
0137   293A           01327          goto     Wyswie_Menu_gwiazd_normal_opcje
                      01328          
0138   3E08           01329          addlw    polozenie_gwiazdki_opcji
                      01330          
0139   00D3           01331          movwf    tmp_linia
                      01332          
                      01333          ;movlw    numer_opcji_kol_cylindr
                      01334          ;xorwf    opcja_menu,w
                      01335          ;btfss    STATUS,Z
                      01336          ;goto      Wyswie_Menu_gwiazd_normal_opcje   
                      01337          
                      01338          ;movlw    1
                      01339          ;subwf    wynikh,f
                      01340          
                      01341 
013A                  01342 Wyswie_Menu_gwiazd_normal_opcje         
                      01343          ;movf     polozenie_gwiazdka,w
                      01344          
013A   0853           01345          movf     tmp_linia,w
013B   214D           01346          call     send
                      01347          
013C   2185           01348          call     check_busy4bit
                      01349          
013D   302A           01350          movlw    marker_opcji
013E   2163           01351          call     write_lcd
                      01352          
                      01353          
013F   0008           01354          return
                      01355          
MPASM  5.51     PROGRAM_STERUJACY_WERSJA2.ASM   8-7-2014  19:31:38         PAGE 27


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      01356          
                      01357          
                      01358          
                      01359 
                      01360 
                      01361 
                      01362 
                      01363 
                      01364 
                      01365 
                      01366 
                      01367 
                      01368 
                      01369 
                      01370 
                      01371 
                      01372 
                      01373 
                      01374 
                      01375 
                      01376 
                      01377 
                      01378 
                      01379 
                      01380 
                      01381 
                      01382 
                      01383 
                      01384 
                      01385 
                      01386          
                      01387          
                      01388          
                      01389          
                      01390          
                      01391          
                      01392          
                      01393          
                      01394          
                      01395          
                      01396          
                      01397          
                      01398          
                      01399          
                      01400          
                      01401          
                      01402          
                      01403          
                      01404 
                      01405 
                      01406 
                      01407 
                      01408 ;;;;;;;;;;;;;;;;;;;;;;;;
MPASM  5.51     PROGRAM_STERUJACY_WERSJA2.ASM   8-7-2014  19:31:38         PAGE 28


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      01409 ;;;PROGRAM
                      01410 ;;;;;;;;;;;;;;;;;;;;;;;;;
                      01411       include "libs/lcd.h"
                      00001  ;;ten dokument zawiera definicje wszystkich funkcji
                      00002 ;;uytych do wywietlania danych na LCD
                      00003 ;;wywietlanie 8 bitowe
                      00004 
                      00005 ;def lcd
                      00006 ;cay port RB0-RB7 uyty jako dane do LCD
                      00007 ;init
                      00008 ;to idzie na port zwizany z danymi
                      00009 
                      00010 
                      00011 
  00000030            00012 init_8bit       equ     b'00110000'
  0000003C            00013 set_8bit        equ     b'00111100' ; 8bit, 2 linie,font 5x8
  00000008            00014 function_set2   equ     b'00001000' ;ustawia 2 linie i 5x8 font
                      00015 ;init_4bit          equ      b'00100010' ;ustawia 2 linie i 5x8 font
                      00016 
  00000008            00017 display_off     equ     b'00001000' ;ustawia blinking,cursor,
  00000006            00018 entry           equ     b'00000110' ;increment
  00000080            00019 dd_addres_set   equ     b'10000000' ;od rb6 do rb0 wstawiï¿½adres
                      00020 
  00000001            00021 display_clear   equ     b'00000001'
  0000000C            00022 display_on      equ     b'00001100';bez kursora
  0000000F            00023 display_2       equ     b'00001111'
  00000010            00024 write_4bit      equ     b'00010000' ;pisz na ekranie
  00000040            00025 write           equ     b'01000000' ;zacz rd6 - rs
                      00026 
  00000002            00027 disp_home       equ     b'00000010'
                      00028 
                      00029 
                      00030 ;;dla 4bitï¿½
  00000003            00031 function_set1_4b        equ     b'00000011' ;- ustawia 4 bit
  00000008            00032 function_set2_4b        equ     b'00001000' ;ustawia 2 linie i 5x8 font
  00000000            00033 display1_4b     equ     b'00000000'
  0000000F            00034 display2_4b     equ     b'00001111' ;ustawia blinking,cursor,
  00000000            00035 entry1_4b               equ     b'00000000'
  0000000C            00036 entry2_4b               equ     b'00001100' ;increment
  00000000            00037 display_clear1_4b       equ     b'00000000'
  00000001            00038 display_clear2_4b       equ     b'00000001'
                      00039 
                      00040 
  00000030            00041 _0              equ     b'00110000'
  00000031            00042 _1              equ     b'00110001'
  00000032            00043 _2              equ     b'00110010'
  00000033            00044 _3              equ     b'00110011'
  00000034            00045 _4              equ     b'00110100'
  00000035            00046 _5              equ     b'00110101'
  00000036            00047 _6              equ     b'00110110'
  00000037            00048 _7              equ     b'00110111'
  00000038            00049 _8              equ     b'00111000'
  00000039            00050 _9              equ     b'00111001'
MPASM  5.51     PROGRAM_STERUJACY_WERSJA2.ASM   8-7-2014  19:31:38         PAGE 29


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

  0000003A            00051 _dwukropek      equ     b'00111010'
  00000020            00052 _puste          equ     b'00100000'
  0000002E            00053 _kropka         equ     b'00101110'
  000000DF            00054 _stopni         equ     b'11011111'
  0000002D            00055 _minus          equ     0x2d
  0000002B            00056 _plus           equ     0x2b
  00000041            00057 _A              equ     b'01000001'
  00000042            00058 _B              equ     b'01000010'
  00000043            00059 _C              equ     b'01000011'
  00000044            00060 _D              equ     b'01000100'
  00000045            00061 _E              equ     b'01000101'
  00000046            00062 _F              equ     b'01000110'
  00000047            00063 _G              equ     b'01000111'
  00000048            00064 _H              equ     b'01001000'
  00000049            00065 _I              equ     b'01001001'
  0000004A            00066 _J              equ     b'01001010'
  0000004B            00067 _K              equ     b'01001011'
  0000004C            00068 _L              equ     b'01001100'
  0000004D            00069 _M              equ     b'01001101'
  0000004E            00070 _N              equ     b'01001110'
  0000004F            00071 _O              equ     b'01001111'
  00000050            00072 _P              equ     b'01010000'
  00000051            00073 _Q              equ     b'01010001'
  00000052            00074 _R              equ     b'01010010'
  00000053            00075 _S              equ     b'01010011'
  00000054            00076 _T              equ     b'01010100'
  00000055            00077 _U              equ     b'01010101'
  00000056            00078 _V              equ     b'01010110'
  00000057            00079 _W              equ     b'01010111'
  00000058            00080 _X              equ     b'01011000'
  00000059            00081 _Y              equ     b'01011001'
  0000005A            00082 _Z              equ     b'01011010'
                      00083 
  00000061            00084 _a              equ     b'01100001'
  00000062            00085 _b              equ     b'01100010'
  00000063            00086 _c              equ     b'01100011'
  00000064            00087 _d              equ     b'01100100'
  00000065            00088 _e              equ     b'01100101'
  00000066            00089 _f              equ     b'01100110'
  00000067            00090 _g              equ     b'01100111'
  00000068            00091 _h              equ     b'01101000'
  00000069            00092 _i              equ     b'01101001'
  0000006A            00093 _j              equ     b'01101010'
  0000006B            00094 _k              equ     b'01101011'
  0000006C            00095 _l              equ     b'01101100'
  0000006D            00096 _m              equ     b'01101101'
  0000006E            00097 _n              equ     b'01101110'
  0000006F            00098 _o              equ     b'01101111'
  00000070            00099 _p              equ     b'01110000'
  00000071            00100 _q              equ     b'01110001'
  00000072            00101 _r              equ     b'01110010'
  00000073            00102 _s              equ     b'01110011'
  00000074            00103 _t              equ     b'01110100'
MPASM  5.51     PROGRAM_STERUJACY_WERSJA2.ASM   8-7-2014  19:31:38         PAGE 30


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

  00000075            00104 _u              equ     b'01110101'
  00000076            00105 _v              equ     b'01110110'
  00000077            00106 _w              equ     b'01110111'
  00000078            00107 _x              equ     b'01111000'
  00000079            00108 _y              equ     b'01111001'
  0000007A            00109 _z              equ     b'01111010'
                      00110 
  0000002A            00111 _star           equ     0x2a
  0000005E            00112 _up             equ     b'01011110'
  0000002C            00113 _przecinek      equ     0x2c
  0000003C            00114 _mniejszosci      equ      0x3c
  0000003E            00115 _wiekszosci       equ      0x3e
  0000007C            00116 _linia_pionowa    equ         0x7c
  00000025            00117 _procent          equ      0x25
                      00118 
                      00119 
                      00120 
  00000080            00121 linia_pierwsza  equ     0x80
  00000080            00122 linia_gorna     equ     0x80
                      00123 
  000000C0            00124 linia_dolna     equ     0xc0
  000000C0            00125 linia_druga     equ     0xc0
                      00126 
  00000090            00127 linia_trzecia   equ     0x90
  000000D0            00128 linia_czwarta   equ     0xd0
                      00129 ;
                      00130 
                      01412 
                      01413 
                      01414 
                      01415 
                      01416       include "libs/lcd4bit.asm"
                      00001 
0140                  00002 wait
                      00003         ;x4  dla 20 Mhz
0140   1D0B           00004         btfss   INTCON,T0IF      
0141   2940           00005         goto    wait
0142   110B           00006         bcf     INTCON,T0IF  
0143                  00007 wait1
0143   1D0B           00008         btfss   INTCON,T0IF      
0144   2943           00009         goto    wait1
0145   110B           00010         bcf     INTCON,T0IF  
0146                  00011 wait2        
0146   1D0B           00012         btfss   INTCON,T0IF      
0147   2946           00013         goto    wait2
0148   110B           00014         bcf     INTCON,T0IF  
0149                  00015 wait3        
0149   1D0B           00016         btfss   INTCON,T0IF      
014A   2949           00017         goto    wait3
014B   110B           00018         bcf     INTCON,T0IF  
                      00019         
014C   0008           00020         return
                      00021         
MPASM  5.51     PROGRAM_STERUJACY_WERSJA2.ASM   8-7-2014  19:31:38         PAGE 31


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00022          
                      00023 ;funkcja wysy?aj?ca
                      00024 ;LCD
                      00025 ;;;;;;;;;;;;;;;;;;;;;;;;;
                      00026 
                      00027 
                      00028 ;przed wywolaniem funkcji umiesc w Wreg dane do wyslania
014D                  00029 send4bit
014D                  00030 send
                      00031 ;np PORTA bity 0-3  sa uzywane przez 4 bitowy ekran lcd
                      00032 ;najpierw wysylane sa 4bity gorne
                      00033 
014D   00BF           00034          movwf    dane_lcd
                      00035          
                      00036          ;bsf      port_lcd_e,enable
                      00037          
                      00038       IF (polozenie_danych_lcd == 0) 
                      00039 ;jezli linia LCD jest na dolnych bitach portu przypisanego do LCD, wtedy to co jest
                      00040 ;wysylane musi byc najpierw starsze wyslane, wiec to co jest w rejestrze dane_lcd musi byc obrocone tak 
                            by starsze bity znalazly sie na miejscy mlodszych (dolnych)
014E   0EBF           00041          swapf    dane_lcd,f
014F   30F0           00042                  movlw  0xf0
0150   0587           00043                  andwf   port_lcd,f 
                      00044       ENDIF
                      00045             
                      00046       IF (polozenie_danych_lcd == 1)        
                      00047 ;jesli linia LCD jest podlaczona do gornych linii portu LCD nie na razie nie obracam
                      00048             
                      00049          movlw  0x0f
                      00050                  andwf   port_lcd,f 
                      00051       ENDIF
                      00052                   
                      00053 
0151   300F           00054          movlw    ktore_bity_lcd_tris
0152   053F           00055          andwf    dane_lcd,w
0153   0787           00056          addwf    port_lcd,f
                      00057          
0154   1707           00058          bsf      port_lcd_e,enable
0155   0000           00059          nop
0156   0000           00060          nop
0157   1307           00061          bcf      port_lcd_e,enable
                      00062 
                      00063          
                      00064 
                      00065 ;jesli linia LCD jest podlaczona do gornych linii portu LCD, to wysylajac w drugiej kolejnosci mlodsze b
                            ity
                      00066 ;musze teraz obrcocic polowki bajtu, by dolne bity byly w miejscy starszych
0158   0EBF           00067          swapf    dane_lcd,f
                      00068 
                      00069   IF (polozenie_danych_lcd == 0) 
                      00070 ;jezli linia LCD jest na dolnych bitach portu przypisanego do LCD, wtedy to co jest
                      00071 ;wysylane musi byc najpierw starsze wyslane, wiec to co jest w rejestrze dane_lcd musi byc obrocone tak 
                            by starsze bity znalazly sie na miejscy mlodszych (dolnych)
MPASM  5.51     PROGRAM_STERUJACY_WERSJA2.ASM   8-7-2014  19:31:38         PAGE 32


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00072         
0159   30F0           00073                  movlw  0xf0
015A   0587           00074                  andwf   port_lcd,f 
                      00075       ENDIF
                      00076             
                      00077       IF (polozenie_danych_lcd == 1)        
                      00078 ;jesli linia LCD jest podlaczona do gornych linii portu LCD nie na razie nie obracam
                      00079             
                      00080          movlw  0x0f
                      00081                  andwf   port_lcd,f 
                      00082       ENDIF
                      00083 
015B   300F           00084          movlw    ktore_bity_lcd_tris
015C   053F           00085          andwf    dane_lcd,w
015D   0787           00086          addwf    port_lcd,f
                      00087          
015E   1707           00088          bsf      port_lcd_e,enable
015F   0000           00089          nop
0160   0000           00090          nop
0161   1307           00091          bcf      port_lcd_e,enable
                      00092             
                      00093          
0162   0008           00094          return
                      00095 
                      00096          
                      00097          
                      00098          
                      00099          
                      00100          
                      00101          
                      00102          
                      00103 ;funkcja pisz?ca na ekranie
0163                  00104 write_lcd
                      00105 
                      00106          
0163   1607           00107          bsf      port_lcd_rs,rs
                      00108          
0164   214D           00109          call     send4bit
                      00110          
0165   1207           00111          bcf      port_lcd_rs,rs
0166   0008           00112          return
                      00113 
                      00114 ;funkcja czyszcz?ca ekran
                      00115 
0167                  00116 cmd_off
                      00117 
                      00118          
0167   1207           00119          bcf      port_lcd_rs,rs
                      00120          
                      00121          
0168   0008           00122         return
                      00123          
                      00124 
MPASM  5.51     PROGRAM_STERUJACY_WERSJA2.ASM   8-7-2014  19:31:38         PAGE 33


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00125 
                      00126 ;funkcja czysci cala linie
                      00127 ; przed jej wywolaniem w W umi#1esc adres linii
                      00128 ;po zakonczeniu z powrotem w niej umieszcza adres
                      00129 ;stara wersja - dziala na cala linie
                      00130 
0169                  00131 clear_line_old
0169   00A3           00132          movwf    n
016A   1207           00133          bcf      port_lcd_rs,rs
                      00134          
016B   0823           00135          movf     n,w
016C   00C0           00136          movwf    tmp_lcd
016D   214D           00137          call     send
016E   3016           00138          movlw    ile_znakow
016F   00A5           00139          movwf    tmp7
0170   3EFF           00140          addlw    0xff
0171   00A4           00141          movwf    tmp
0172                  00142 clear_line_old2
0172   2185           00143          call     check_busy4bit
0173   3020           00144          movlw    _puste
0174   00C0           00145          movwf    tmp_lcd
0175   2163           00146          call     write_lcd
                      00147          
0176   0BA5           00148          decfsz   tmp7,f
0177   2972           00149          goto     clear_line_old2
                      00150          
0178   2167           00151          call     cmd_off
0179   0823           00152          movf     n,w
017A   0008           00153          return
                      00154          
017B                  00155 clear_line
                      00156 ;przed wywolaniem do n trzeba wrzucic ilosc kasowanych znakow
                      00157 ;a w W musi byc adres linii         
017B   00BF           00158          movwf    dane_lcd
017C   214D           00159          call     send
                      00160          
017D                  00161 clear_line_petla
017D   2185           00162          call     check_busy4bit
017E   3020           00163          movlw    _puste
017F   00BF           00164          movwf    dane_lcd
0180   2163           00165          call     write_lcd
                      00166          
0181   0BA3           00167          decfsz   n,f
0182   297D           00168          goto     clear_line_petla
                      00169          
0183   2167           00170          call     cmd_off
                      00171         
0184   0008           00172          return
                      00173 
                      00174          
                      00175 
                      00176 
                      00177 
MPASM  5.51     PROGRAM_STERUJACY_WERSJA2.ASM   8-7-2014  19:31:38         PAGE 34


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00178 
                      00179 
                      00180 
                      00181 
                      00182          
0185                  00183 check_busy4bit
                      00184 
                      00185       IF (polozenie_danych_lcd == 1)        
                      00186 ;czyszcze bity gorne, a dolne bez zmian
                      00187          movlw    0x0f         
                      00188          andwf    port_lcd,f
                      00189       ENDIF
                      00190 
                      00191 
                      00192       IF (polozenie_danych_lcd == 0)        
                      00193 ;czyszcze bity dolne
0185   30F0           00194          movlw    0xf0         
0186   0587           00195          andwf    port_lcd,f
                      00196       ENDIF
                      00197        
0187   1683 1303      00198          banksel tris_lcd
                      00199          
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
0189   0807           00200          movf     tris_lcd,w
018A   380F           00201          iorlw    ktore_bity_lcd_tris
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
018B   0087           00202          movwf    tris_lcd    
                      00203          
018C   1283 1303      00204          banksel 0
                      00205          
                      00206          
                      00207                   
018E   1687           00208          bsf      port_lcd_rw,rw
018F   1207           00209          bcf      port_lcd_rs,rs
                      00210 
0190                  00211 check
                      00212          
0190   1707           00213          bsf      port_lcd_e,enable
                      00214          
                      00215          
                      00216          
                      00217          
                      00218          
                      00219          
                      00220       IF (polozenie_danych_lcd == 0) 
                      00221 ;jezli linia LCD jest na dolnych bitach portu przypisanego do LCD, wtedy to co jest najpierw (starsze) t
                            rzeba przesunac na starsze bity
0191   0E07           00222          swapf    port_lcd,w
0192   39F0           00223          andlw    0xf0   
                      00224       ENDIF
                      00225             
                      00226       IF (polozenie_danych_lcd == 1)        
                      00227 ;jesli na gorze bitow port d
MPASM  5.51     PROGRAM_STERUJACY_WERSJA2.ASM   8-7-2014  19:31:38         PAGE 35


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00228             
                      00229          movf    port_lcd,w
                      00230          andlw    0xf0   
                      00231       ENDIF
                      00232          
                      00233          
0193   00C0           00234          movwf    tmp_lcd
                      00235          
0194   1307           00236          bcf      port_lcd_e,enable
                      00237             
                      00238          
                      00239          
0195   1707           00240          bsf      port_lcd_e,enable
                      00241          
                      00242          
                      00243          
                      00244          
                      00245          
                      00246       IF (polozenie_danych_lcd == 1) 
                      00247 ;jesli na gorze bitow port d
                      00248          swapf    port_lcd,w
                      00249       ENDIF
                      00250             
                      00251       IF (polozenie_danych_lcd == 0)        
                      00252 
                      00253             
0196   0807           00254          movf    port_lcd,w
                      00255       ENDIF         
                      00256          
0197   1307           00257          bcf      port_lcd_e,enable    
                      00258          ;bo mlodsza polowke zapisuje
0198   390F           00259          andlw    0x0f
                      00260          
0199   07C0           00261          addwf    tmp_lcd,f
                      00262          
                      00263          
                      00264             
019A   1BC0           00265          btfsc    tmp_lcd,7
019B   2990           00266          goto     check
                      00267          
019C   1683 1303      00268          banksel tris_lcd
019E   3080           00269          movlw   normalne_ustawienie_tris_lcd
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
019F   0087           00270          movwf    tris_lcd
                      00271          
01A0   1283 1303      00272          banksel 0
                      00273          
                      00274          
01A2   1287           00275          bcf      port_lcd_rw,rw
01A3   1207           00276          bcf      port_lcd_rs,rs
01A4   0008           00277          return
                      00278 
                      00279 
MPASM  5.51     PROGRAM_STERUJACY_WERSJA2.ASM   8-7-2014  19:31:38         PAGE 36


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00280 
                      00281 ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;                           
                      00282 ;pocz?tek dzia?ania ekranu
                      00283 
01A5                  00284 lcd_init
01A5   2167           00285          call     cmd_off
01A6   0187           00286          clrf     port_lcd
                      00287 ;wylaczam przerwanie
                      00288         
01A7   0181           00289          clrf     TMR0
01A8   128B           00290          bcf    INTCON,T0IE
01A9   110B           00291         bcf     INTCON,T0IF
                      00292 ;wylaczam przerwania tmr0         
01AA   3003           00293          movlw    3
01AB   00A4           00294          movwf    tmp
01AC   2140           00295         call     wait     ;fosc/4/256/256 (tak jest ustawiony tmr0) dla 4Mhz 64 ms dla 8 Mhz 32 ms dla 2
                            0Mhz = 13 ms
                      00296                 ;dwa bity nizsze musza byc zaznaczone przez okolo 64ms
                      00297 
01AD                  00298 lcd_init_3_petla
                      00299          
                      00300          
                      00301 
                      00302 
                      00303      IF (polozenie_danych_lcd == 0) 
                      00304 ;jezli linia LCD jest na dolnych bitach portu przypisanego do LCD, wtedy to co jest
                      00305 ;wysylane musi byc najpierw starsze wyslane, wiec to co jest w rejestrze dane_lcd musi byc obrocone tak 
                            by starsze bity znalazly sie na miejscy mlodszych (dolnych)
01AD   3003           00306          movlw    b'00000011'
01AE   0787           00307         addwf     port_lcd,f
                      00308 
                      00309       ENDIF
                      00310            
                      00311  
                      00312       IF (polozenie_danych_lcd == 1)        
                      00313 ;jesli linia LCD jest podlaczona do gornych linii portu LCD nie na razie nie obracam
                      00314          movlw    b'00110000'
                      00315          addwf    port_lcd,f
                      00316             
                      00317          
                      00318       ENDIF
                      00319 
01AF   1707           00320         bsf      port_lcd_e,enable
01B0   0000           00321          nop
01B1   0000           00322          nop
01B2   1307           00323          bcf      port_lcd_e,enable
                      00324         
                      00325         
                      00326          
                      00327          
01B3   0181           00328          clrf     TMR0 ;64 ms
01B4   128B           00329         bcf    INTCON,T0IE
01B5   110B           00330         bcf     INTCON,T0IF
MPASM  5.51     PROGRAM_STERUJACY_WERSJA2.ASM   8-7-2014  19:31:38         PAGE 37


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

01B6   2140           00331          call     wait
                      00332          
01B7   0181           00333          clrf     TMR0 ;64 ms
01B8   128B           00334         bcf    INTCON,T0IE
01B9   110B           00335         bcf     INTCON,T0IF
01BA   2140           00336          call     wait
                      00337          
01BB   0BA4           00338          decfsz   tmp,f
01BC   29AD           00339          goto     lcd_init_3_petla
                      00340 
                      00341          IF (polozenie_danych_lcd == 0) 
                      00342 ;jezli linia LCD jest na dolnych bitach portu przypisanego do LCD, wtedy to co jest
                      00343 ;wysylane musi byc najpierw starsze wyslane, wiec to co jest w rejestrze dane_lcd musi byc obrocone tak 
                            by starsze bity znalazly sie na miejscy mlodszych (dolnych)
01BD   3002           00344          movlw    b'00000010'
01BE   0787           00345         addwf     port_lcd,f
                      00346 
                      00347       ENDIF
                      00348            
                      00349  
                      00350       IF (polozenie_danych_lcd == 1)        
                      00351 ;jesli linia LCD jest podlaczona do gornych linii portu LCD nie na razie nie obracam
                      00352          movlw    b'00100000'
                      00353          addwf    port_lcd,f
                      00354             
                      00355          
                      00356       ENDIF
                      00357          
                      00358          
                      00359          
                      00360          
01BF   1707           00361          bsf      port_lcd_e,enable
01C0   0000           00362          nop
01C1   0000           00363          nop
01C2   1307           00364          bcf      port_lcd_e,enable
                      00365          
01C3   0181           00366          clrf     TMR0 ;64 ms
01C4   2140           00367          call     wait       
                      00368          
                      00369 
01C5   2185           00370                 call     check_busy4bit
                      00371 
01C6   3028           00372          movlw   set_4bit
                      00373          
01C7   214D           00374          call     send4bit
                      00375          
01C8   2185           00376          call     check_busy4bit
                      00377          
                      00378          ;movlw    display_clear
                      00379          
01C9   300C           00380          movlw    display_set
                      00381          
                      00382          
MPASM  5.51     PROGRAM_STERUJACY_WERSJA2.ASM   8-7-2014  19:31:38         PAGE 38


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

01CA   214D           00383          call     send4bit
                      00384         
01CB   2185           00385         call     check_busy4bit
                      00386         
01CC   3001           00387          movlw    display_clear
01CD   214D           00388          call     send4bit
                      00389         
01CE   2185           00390         call     check_busy4bit
                      00391         
01CF   3006           00392          movlw   set_entry
                      00393          
01D0   214D           00394          call     send4bit
                      00395         
01D1   2185           00396         call     check_busy4bit
01D2   0008           00397         return
                      01417         
                      01418         
                      01419       
                      01420 
                      01421       include "libs/dzielenie.asm"
                      00001 ;to jest dzieleni max 2-bajtowe i z ulamkiem w jednym bajcie
                      00002 ;wynikh
                      00003 ;wynik
                      00004 ;wynik01    
                      00005 ;wynik001  - reszta z dzielenia bajt mlodszy 
                      00006 
                      00007 
                      00008 
01D3                  00009 dzielenie
01D3   01B1           00010         clrf    wynik
01D4   01B2           00011         clrf    wynikh
01D5   01AA           00012         clrf     reszta_operacji
01D6   00B8           00013         movwf   operandl
                      00014 ;jeeli probuje przez 0 to wyjdz z procedury     
01D7   0838           00015         movf    operandl,w
01D8   1D03           00016         btfss   STATUS,Z
01D9   29DD           00017         goto    brak_zera_przejdz_do_dzielenia
                      00018         
01DA   0837           00019         movf   operandh,w
01DB   1903           00020         btfsc   STATUS,Z
01DC   0008           00021         return
                      00022         
01DD                  00023 brak_zera_przejdz_do_dzielenia
01DD                  00024 petla_dzielenia
                      00025 
01DD   083C           00026         movf    dzielonah,w
01DE   00B0           00027         movwf   wynik01
                      00028         
01DF   083B           00029       movf      dzielona,w
01E0   00AF           00030         movwf   wynik001
                      00031         
01E1   0838           00032         movf    operandl,w
01E2   02BB           00033         subwf   dzielona,f
MPASM  5.51     PROGRAM_STERUJACY_WERSJA2.ASM   8-7-2014  19:31:38         PAGE 39


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

01E3   1C03           00034         btfss   STATUS,C
01E4   29ED           00035         goto    dzielenie_end;je?eli koniec
                      00036 
01E5   0837           00037       movf      operandh,w
01E6   02BC           00038         subwf   dzielonah,f
01E7   1C03           00039         btfss   STATUS,C
01E8   29ED           00040         goto    dzielenie_end; jezeli przekroczono zawartosc dzielonah
                      00041         
01E9                  00042 petla_dzielenia2        
01E9   0AB1           00043         incf    wynik,f
                      00044         
01EA   1903           00045         btfsc   STATUS,Z
01EB   0AB2           00046         incf    wynikh,f
                      00047         
01EC   29DD           00048         goto    petla_dzielenia
                      00049         
01ED                  00050 dzielenie_end
                      00051 ;je¿eli w operandh jest jakas wartoœæ to ju¿ skoñcz dzielenie, bo
                      00052 ;przekroczono w czasie odejmowania obydwa bajty
                      00053       
                      00054 
01ED   0837           00055         movf    operandh,w
01EE   1D03           00056         btfss   STATUS,Z
01EF   0008           00057         return
                      00058 
                      00059 ;jezeli operandh == 0 to po przekroczeniu  w czasie odejmowania 
                      00060 ;rejestru dzielona zmniejsz dzielonah, chyba ¿e jest tam 0 to te¿ skoncz
                      00061 
01F0   083C           00062         movf            dzielonah,w
                      00063 
01F1   1903           00064         btfsc           STATUS,Z
01F2   0008           00065         return
                      00066         
01F3   03BC           00067         decf            dzielonah,f
                      00068                         
01F4   29E9           00069         goto    petla_dzielenia2
                      00070         
                      00071 
                      00072 
                      00073 
                      00074 
                      00075 
                      00076 
                      00077 
                      00078 
                      00079         
01F5                  00080 dzielenie_ulamek
                      00081          ;jak obliczyc ulamek tzn jaka czesc liczby przez ktora dziele stanowi liczba w wynik01
                      00082          ;ulamek   =   wynik01/operandl*256
                      00083          
                      00084          ;jezeli nie ma ulamka - nic nie zostalo to nie licz ulamka
                      00085          
                      00086          ;jezeli brak jest wartosci w wynik01 tzn brak jest reszty w starszym bajcie 
MPASM  5.51     PROGRAM_STERUJACY_WERSJA2.ASM   8-7-2014  19:31:38         PAGE 40


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

01F5   0830           00087          movf     wynik01,w
                      00088          
01F6   1903           00089          btfsc    STATUS,Z
01F7   2A17           00090          goto     dzielenie_ulamek_1bajt
                      00091          
                      00092 
01F8                  00093 dzielenie_ulamek_2bajty
                      00094 ;kiedy dwa bajty sa reszta wyniku
                      00095 
01F8   00AA           00096          movwf    reszta_operacji 
                      00097          ;najpierw dziele 0x100/operandl
                      00098          
                      00099          ;najpierw mnoze reszta z dzielenia * 0x64 (100)
                      00100          
                      00101          
01F9   3001           00102          movlw    0x01
01FA   00BC           00103          movwf    dzielonah
01FB   3000           00104          movlw    0x00
01FC   00BB           00105          movwf    dzielona
01FD   01BD           00106          clrf   ulamekh
01FE   01BE           00107         clrf    ulamekl
                      00108          
01FF                  00109 dzielenie_ulamek_petla_2bajty
01FF   083B           00110          movf   dzielona,w
                      00111         ;movwf  wynik001
0200   0838           00112         movf    operandl,w
0201   02BB           00113         subwf   dzielona,f
0202   1C03           00114         btfss   STATUS,C
0203   2A06           00115         goto    dzielenie_ulamek_end_2bajty
                      00116          
0204   0ABE           00117          incf     ulamekl,f
                      00118          
0205   29FF           00119          goto     dzielenie_ulamek_petla_2bajty
                      00120          
0206                  00121 dzielenie_ulamek_end_2bajty         
0206   083C           00122          movf           dzielonah,w
                      00123 
0207   1903           00124         btfsc           STATUS,Z
0208   2A0C           00125         goto     mnoze_przez_wynik01_2bajty
0209   03BC           00126         decf            dzielonah,f
020A   0ABE           00127         incf     ulamekl,f              
020B   29FF           00128         goto    dzielenie_ulamek_petla_2bajty
                      00129  
020C                  00130 mnoze_przez_wynik01_2bajty
                      00131          ;mnoze ulamekl przez to co jest w wynik01
020C   0830           00132          movf     wynik01,w
020D   00B8           00133          movwf    operandl
                      00134          
020E   083E           00135          movf     ulamekl,w
020F   00BA           00136          movwf    mnozona
                      00137          
0210   01B0           00138          clrf     wynik01
                      00139          
MPASM  5.51     PROGRAM_STERUJACY_WERSJA2.ASM   8-7-2014  19:31:38         PAGE 41


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

0211                  00140 mnoze_przez_wynik01_2bajty_LOOP
0211   083A           00141          movf     mnozona,w
0212   07B0           00142          addwf    wynik01,f
                      00143          
0213   03B8           00144          decf     operandl,f
                      00145          
0214   1D03           00146          btfss    STATUS,Z
0215   2A11           00147          goto     mnoze_przez_wynik01_2bajty_LOOP
                      00148 
0216   0008           00149          return
                      00150          
                      00151          
                      00152          
                      00153          
                      00154          
                      00155 
                      00156 
                      00157 ;procedury gdy jest tylko 1 bajt reszty 
                      00158 ;dzielenie przez 256          
0217                  00159 dzielenie_ulamek_1bajt
                      00160          ;;;;;;;;movwf    reszta_operacji 
                      00161          
                      00162          ;najpierw dziele 0x100/operandl
                      00163          
                      00164          ;najpierw mnoze reszta z dzielenia * 0x100/ operandl
                      00165          
                      00166          ;czyli zapisuje jako wynik01  jako dzielonah
                      00167          
0217   082F           00168          movf     wynik001,w
0218   00BC           00169          movwf    dzielonah
0219   3000           00170          movlw    0x00
021A   00BB           00171          movwf    dzielona
                      00172          
021B   01BD           00173          clrf   ulamekh
021C   01BE           00174          clrf   ulamekl
                      00175          
021D   0838           00176          movf   operandl,w
                      00177          
021E   21D3           00178          call   dzielenie
                      00179          
021F   0831           00180          movf   wynik,w
0220   00B0           00181          movwf   wynik01
                      00182          
0221   01AF           00183          clrf   wynik001
                      00184          
0222   0008           00185          return
                      00186          
                      00187  
                      01422       include "libs/hextodec.asm"      
                      00001 ;zamiana liczb 16 na postac 10 do wyswietlenia
                      00002 
0223                  00003 hex2dec
                      00004          
MPASM  5.51     PROGRAM_STERUJACY_WERSJA2.ASM   8-7-2014  19:31:38         PAGE 42


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

0223   00BB           00005          movwf    dzielona
                      00006          
0224   01BC           00007          clrf     dzielonah
0225   01B7           00008          clrf     operandh
0226   3064           00009          movlw    064h ;dzielenie przez 100
                      00010 
0227   21D3           00011          call     dzielenie
0228   0831           00012          movf     wynik,w
                      00013 ;dodaje wynik dzielenia przez 100 do ilosci 100-etek w dec100
0229   00A7           00014          movwf    dec100
                      00015          ;
022A                  00016 dziesiatki
022A   082F           00017          movf     wynik001,w
022B   00BB           00018          movwf    dzielona
022C   01BC           00019          clrf     dzielonah
                      00020 ;dzielenie przez 10 reszty ktÃ³ra zostaÅ‚a z dzielenia przez 100
022D   300A           00021          movlw    0ah 
022E   21D3           00022          call     dzielenie
                      00023 
022F   0831           00024          movf     wynik,w
0230   00A8           00025          movwf    dec10
0231                  00026 jednosci
0231   082F           00027          movf     wynik001,w
                      00028 ;tu sÄ… jednoÅ›ci
0232   00A9           00029          movwf    dec1
0233   0008           00030          return
                      00031          
                      00032          
                      00033          
                      00034          
                      00035 ;zamiana ulamka 16 na postac 10 do wyswietlenia
                      00036 ;wyswietlanie z dokladnoÅ›ciÄ… do 1000 wartoÅ›ci
                      00037 
0234                  00038 hex2dec_ulamek_tysieczny
                      00039 
                      00040 
0234   00B8           00041          movwf    operandl
0235   01B7           00042          clrf     operandh
                      00043 ;mnoÅ¼Ä™ wartoÅ›Ä‡ uÅ‚amka przez liczbÄ™
                      00044 ;3.90625
                      00045 ;tzn szesnatkowo 3 i w ulamkuh 232 0xe8
                      00046 
                      00047 
0236   3003           00048          movlw    3
0237   00BA           00049          movwf    mnozona
0238   01B9           00050          clrf     mnozonah
0239   30E8           00051          movlw    0xe8
023A   00BD           00052          movwf    ulamekh
023B   01BE           00053          clrf     ulamekl
023C   0838           00054          movf    operandl,w
023D   2250           00055          call     mnozenie
                      00056          
                      00057                   
MPASM  5.51     PROGRAM_STERUJACY_WERSJA2.ASM   8-7-2014  19:31:38         PAGE 43


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00058          
023E   0832           00059          movf     wynikh,w
023F   00BC           00060          movwf    dzielonah
0240   0831           00061          movf     wynik,w
0241   00BB           00062          movwf    dzielona         
                      00063          
                      00064          
                      00065          ;dzielenie przez 256         
0242   01B7           00066          clrf    operandh         
0243   3064           00067          movlw    0x64
0244   21D3           00068          call     dzielenie         
0245   0831           00069          movf     wynik,w
                      00070 ;dodaje wynik dzielenia przez 100 do ilosci 100-etek w dec100
0246   00A7           00071          movwf    dec100
                      00072          ;
                      00073 
0247   082F           00074          movf     wynik001,w
0248   00BB           00075          movwf    dzielona
                      00076 ;dzielenie przez 10 reszty ktÃ³ra zostaÅ‚a z dzielenia przez 100
0249   300A           00077          movlw    0ah 
024A   21D3           00078          call     dzielenie
                      00079 
024B   0831           00080          movf     wynik,w
024C   00A8           00081          movwf    dec10
                      00082 
                      00083          
024D   082F           00084          movf     wynik001,w
                      00085 ;tu sÄ… jednoÅ›ci
024E   00A9           00086          movwf    dec1
024F   0008           00087          return         
                      01423       include "libs/mnozenie.asm"   
                      00001 ;procedura mnozy dowolnÄ… liczbe
                      00002 ;zapisana w ;
                      00003 ;mnozonah i mnozona 
                      00004 ;ulamki w ulamekh i ulamekl
                      00005 ;przez zawrtosc
                      00006 ;rejestru operandl
                      00007 ;i operandh
                      00008 ;wynik obejmuje rowniez ulamki
                      00009 
0250                  00010 mnozenie 
0250   00B8           00011          movwf    operandl
0251   01B1           00012          clrf     wynik
0252   01B2           00013          clrf     wynikh
0253   01B0           00014          clrf     wynik01
0254   01AF           00015          clrf     wynik001
                      00016 
0255                  00017 mnozenie_l
                      00018          ;decf    operandl,f
                      00019          
0255   0838           00020          movf     operandl,w
0256   1903           00021          btfsc    STATUS,Z
0257   2A6E           00022          goto     mnozenie_h
MPASM  5.51     PROGRAM_STERUJACY_WERSJA2.ASM   8-7-2014  19:31:38         PAGE 44


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00023          
0258   03B8           00024          decf     operandl,f
                      00025          
                      00026          ;btfsc   STATUS,Z
                      00027          ;goto    mnozenie_h
                      00028 
0259                  00029 mnozenie_l2       
                      00030          ;goto             
0259   0839           00031          movf     mnozonah ,w
025A   07B2           00032          addwf    wynikh,f
                      00033          
025B   083A           00034          movf     mnozona,w
025C   07B1           00035          addwf    wynik,f
                      00036          
025D   1803           00037          btfsc    STATUS,C
025E   0AB2           00038          incf     wynikh,f
                      00039                   
025F   083D           00040          movf     ulamekh,w         
0260   07B0           00041          addwf    wynik01,f
                      00042          
0261   1C03           00043          btfss    STATUS,C
0262   2A66           00044          goto     ulamek22
                      00045 ;jezeli           
                      00046          
                      00047          ;movf    
                      00048          ;comf    wynik001,w
                      00049          
                      00050          
                      00051          ;btfss   STATUS,Z
                      00052          
                      00053          
0263   0AB1           00054          incf     wynik,f
                      00055          
0264   1903           00056          btfsc    STATUS,Z
0265   0AB2           00057          incf     wynikh,f
                      00058          
                      00059          ;
0266                  00060 ulamek22 
0266   083E           00061          movf     ulamekl,w         
0267   07AF           00062          addwf    wynik001,f
                      00063          
0268   1C03           00064          btfss    STATUS,C
0269   2A55           00065          goto     mnozenie_l
                      00066          
026A   0AB0           00067          incf     wynik01,f
                      00068          
026B   1903           00069          btfsc    STATUS,Z
026C   0AB1           00070          incf     wynik,f
                      00071          
                      00072          
                      00073 ;jezeli po zwiekszeniu bylo 0, tzn ze przekroczylem 256
                      00074          
                      00075          
MPASM  5.51     PROGRAM_STERUJACY_WERSJA2.ASM   8-7-2014  19:31:38         PAGE 45


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

026D   2A55           00076          goto     mnozenie_l
                      00077          
026E                  00078 mnozenie_h
026E   0837           00079          movf     operandh,w
026F   1903           00080          btfsc    STATUS,Z
0270   0008           00081          return
                      00082          
0271   03B7           00083          decf     operandh,f
                      00084          
                      00085          ;btfsc   STATUS,Z
                      00086          ;return
                      00087          
0272   03B8           00088          decf     operandl,f
                      00089          
0273   2A59           00090          goto     mnozenie_l2
                      01424       include "libs/wyswietlanie_liczb.asm"  
                      00001 ;przed uruchomieniem nale¿y umieœciæ w WREG
                      00002 
                      00003 ;liczbê do przetworzenia
                      00004 
                      00005 
                      00006 ;wymaga do dzia³ania wyœwietlania lcd
                      00007 
0274                  00008 wyswietl_liczbe_1bajtowa
                      00009          
0274   2223           00010          call     hex2dec
                      00011                  
                      00012          
0275   2185           00013          call     check_busy4bit
                      00014          
0276   0827           00015          movf     dec100,w         
0277   1D03           00016          btfss    STATUS,Z
0278   2A7C           00017          goto     Znajdz_wartosc_opcji_100
                      00018          
0279                  00019 Znajdz_wartosc_100_zero
0279   1443           00020          bsf    markers,poprzednio_cyfra_zero
027A   3020           00021          movlw    _puste
027B   2A7E           00022          goto     Znajdz_wartosc_100_pisz
                      00023          
                      00024          
                      00025 
027C                  00026 Znajdz_wartosc_opcji_100 
027C   1043           00027          bcf    markers,poprzednio_cyfra_zero         
027D   3E30           00028          addlw    0x30
                      00029 
027E                  00030 Znajdz_wartosc_100_pisz                 
027E   2163           00031          call     write_lcd
                      00032          
027F   2185           00033          call     check_busy4bit
0280                  00034 Znajdz_wartosc_10         
0280   0828           00035          movf     dec10,w
0281   1D03           00036          btfss    STATUS,Z
0282   2A87           00037          goto     Znajdz_wartosc_opcji_10
MPASM  5.51     PROGRAM_STERUJACY_WERSJA2.ASM   8-7-2014  19:31:38         PAGE 46


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00038          
0283                  00039 Znajdz_wartosc_10_zero 
0283   1C43           00040          btfss    markers,poprzednio_cyfra_zero
0284   2A87           00041          goto     Znajdz_wartosc_opcji_10
                      00042          
0285   3020           00043          movlw    _puste
0286   2A89           00044          goto     Znajdz_wartosc_10_pisz
                      00045 
0287                  00046 Znajdz_wartosc_opcji_10         
0287   1043           00047          bcf    markers,poprzednio_cyfra_zero    
0288   3E30           00048          addlw    0x30
                      00049 
0289                  00050 Znajdz_wartosc_10_pisz          
0289   2163           00051          call     write_lcd
                      00052          
028A   2185           00053          call     check_busy4bit
                      00054          
028B   0829           00055          movf     dec1,w
028C   3E30           00056          addlw    0x30
                      00057          
028D   2163           00058          call     write_lcd
                      00059          
                      00060          
028E   0008           00061          return
                      01425         
028F                  01426 Start
                      01427          ;przesuwam kursor o 4 znaki
                      01428 ;        movlw    2
                      01429 ;        addlw    0x0f
028F   0187           01430       clrf  port_lcd
0290   21A5           01431          call     lcd_init
                      01432          ;call     check_busy4bit
                      01433          
                      01434          ;call     cmd_off
                      01435         
                      01436          
                      01437 ;        call     check_busy
                      01438 
                      01439 
0291   3000           01440          movlw    0
0292   00C6           01441          movwf    opcja_menu
                      01442 
                      01443          
0293   1548           01444          bsf znaczniki_klawiszy_menu,opcja_bez_przycisku
                      01445          
0294   1449           01446          bsf  stan_menu,menu_glowne
                      01447          
                      01448            
                      01449          ;test opcji w menu
                      01450          
0295   3001           01451          movlw    0x1
0296   00CB           01452          movwf    wartosc_opcji_uruchom
                      01453          
MPASM  5.51     PROGRAM_STERUJACY_WERSJA2.ASM   8-7-2014  19:31:38         PAGE 47


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

0297   1486           01454          bsf    port_start_lodowki,pin_start_all      
                      01455          
                      01456          
                      01457          ; movlw    0xed
0298   30E2           01458          movlw    0xe2
0299   00CC           01459          movwf    wartosc_opcji_nastawa
                      01460          
                      01461          
                      01462           ; movlw    1
                      01463          
029A   300A           01464          movlw   jak_duzo_zliczen_TMR1_do_pomiaru
029B   00D2           01465          movwf   ile_zliczen_do_pomiaru_temp
029C   01CA           01466          clrf     znak_linia
                      01467          ;clrf     znak_linia2
                      01468 
029D   3080           01469          movlw    linia_gorna
029E   00C7           01470          movwf    polozenie_gwiazdka
                      01471          
                      01472          
                      01473          
                      01474          
                      01475 ;druga strona pamieci tAM umieszczam wszystkie slowa menu
                      01476 
                      01477                 
                      01478 
                      01479 
029F   178B           01480         bsf      INTCON,GIE
02A0   170B           01481          bsf      INTCON,PEIE
                      01482 
                      01483                   
02A1   20DC           01484          call       Wyswietlanie_Menu  
02A2   2CA9           01485          goto LOOP
                      01486 
                      01487 
                      01488 
                      01489 
                      01490          
                      01491      
                      01492 
                      01493 
                      01494 
                      01495 
                      01496 
                      01497 
                      01498 
                      01499 
                      01500 
                      01501 
                      01502 
                      01503       
                      01504       
                      01505       
                      01506       
MPASM  5.51     PROGRAM_STERUJACY_WERSJA2.ASM   8-7-2014  19:31:38         PAGE 48


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      01507       
02A3                  01508 PIN_HI_1
02A3   1683 1303      01509         banksel  tris_ds1820
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
02A5   1686           01510         BSF     tris_ds1820, czujnik_ds1820_1          ; high impedance
02A6   1283 1303      01511         banksel  TMR0
                      01512         
02A8   0008           01513         RETURN
                      01514 
02A9                  01515 PIN_LO_1
02A9   1286           01516         BCF     port_ds1820,czujnik_ds1820_1
02AA   1683 1303      01517         banksel  tris_ds1820
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
02AC   1286           01518         BCF     tris_ds1820, czujnik_ds1820_1         ; low impedance zero
02AD   1283 1303      01519         banksel  TMR0
                      01520         
02AF   0008           01521         RETURN
                      01522         
02B0                  01523 send_one_1
02B0   0191           01524          clrf     TMR2
02B1   108C           01525          bcf      PIR1,TMR2IF
02B2   22A9           01526          call     PIN_LO_1
02B3   0000           01527          nop
02B4   22A3           01528          call     PIN_HI_1
                      01529         
02B5                  01530 petla_send_one_1
02B5   1C8C           01531          btfss    PIR1,TMR2IF        
02B6   2AB5           01532          goto     petla_send_one_1
                      01533          
02B7   0008           01534          return
                      01535 
02B8                  01536 send_zero_1
                      01537         
02B8   22A9           01538          call     PIN_LO_1
02B9   0191           01539          clrf     TMR2
02BA   0000           01540          nop
                      01541          
02BB   108C           01542          bcf      PIR1,TMR2IF
                      01543          
02BC   1286           01544          bcf      port_ds1820,czujnik_ds1820_1
02BD                  01545 petla_send_zero_1
02BD   1C8C           01546          btfss    PIR1,TMR2IF        
02BE   2ABD           01547          goto     petla_send_zero_1
02BF   22A3           01548          call     PIN_HI_1
                      01549          
02C0   0008           01550          return
                      01551 
                      01552     
                      01553 
                      01554 
                      01555 
                      01556        
                      01557 
MPASM  5.51     PROGRAM_STERUJACY_WERSJA2.ASM   8-7-2014  19:31:38         PAGE 49


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      01558 
                      01559 
                      01560 
                      01561 
                      01562 
                      01563 
                      01564      
                      01565      
                      01566      
                      01567      
                      01568      
                      01569      
                      01570      
                      01571            
02C1                  01572 inicjacja_ds1820_1
                      01573 
                      01574  
                      01575          ;bcf      RCSTA1,CREN
                      01576          
                      01577          
02C1   1683 1303      01578          banksel    tris_ds1820
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
02C3   1286           01579          bcf      tris_ds1820,czujnik_ds1820_1
                      01580        
                      01581          
                      01582 ;ustawiam tmr2 na zliczanie 2 
02C4   30F0           01583          movlw    czas_oczekiwania_480us
02C5   1683 1303      01584          banksel  PR2
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
02C7   0092           01585          movwf    PR2
                      01586          
                      01587 ;ustawiam 480us      
02C8   1283 1303      01588           banksel  T2CON
02CA   304C           01589          movlw    t2con_dla_480us
02CB   0092           01590          movwf    T2CON
                      01591          
02CC   108C           01592          bcf      PIR1,TMR2IF
                      01593 ;wlaczam przerwanie Tmr2
                      01594          ;bsf      STATUS,RP0
                      01595          ;bsf      PIE1,TMR2IE2
                      01596          ;bcf      STATUS,RP0
02CD   22A3           01597          call     PIN_HI_1
02CE   22A9           01598          call     PIN_LO_1
                      01599 ;daje znacznik ze dotyczy to inicjacji ds1820
                      01600          ;bsf      znaczniki_ds,inicjacja
                      01601 ;petla czekania na koniec inicjacji
02CF                  01602 petla_inicjacji1_1
                      01603          
02CF   1C8C           01604          btfss    PIR1,TMR2IF
02D0   2ACF           01605          goto     petla_inicjacji1_1
                      01606 ;teraz przelaczam sie na odbior danych z ds1820
02D1   1683 1303      01607          banksel    tris_ds1820
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
MPASM  5.51     PROGRAM_STERUJACY_WERSJA2.ASM   8-7-2014  19:31:38         PAGE 50


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

02D3   1686           01608          bsf      tris_ds1820,czujnik_ds1820_1
                      01609          
02D4   0000           01610          nop
02D5   1283 1303      01611          banksel     PIR1
02D7   108C           01612          bcf      PIR1,TMR2IF
                      01613 ;sprawdzam czy w ciagu 480us pojawilo sie 0 na porcie czujnika
02D8                  01614 petla_inicjacji2_1
                      01615 
02D8   1E86           01616          btfss    port_ds1820,czujnik_ds1820_1
02D9   2ADD           01617          goto     petla_inicjacji3_1
                      01618          
02DA   1C8C           01619          btfss    PIR1,TMR2IF         
02DB   2AD8           01620          goto     petla_inicjacji2_1
                      01621          
02DC   2AE4           01622          goto     blad_inicjacji_ds
                      01623          
                      01624          
02DD                  01625 petla_inicjacji3_1
02DD   1A86           01626          btfsc    port_ds1820,czujnik_ds1820_1
02DE   2AE1           01627          goto     inicjacja_ok_1
02DF   1C8C           01628          btfss    PIR1,TMR2IF
02E0   2ADD           01629          goto     petla_inicjacji3_1
                      01630          
02E1                  01631 inicjacja_ok_1
                      01632          ;btfsc    markers_pomiary,czy_wywoluje_inicjacje_ds_call
                      01633          ;return
                      01634          
                      01635          ;btfsc    markers,czy_rozkaz
                      01636          ;goto     wysylanie_danych_rozkaz_1
                      01637 
                      01638          ;btfsc    markers,czy_wysylanie_OK
                      01639          ;goto     napisz_ok
02E1   30FF           01640          movlw     0xff
02E2   00DC           01641          movwf     inicjacja_wynik
02E3   0008           01642          return
                      01643          
02E4                  01644 blad_inicjacji_ds         
02E4   3001           01645          movlw     0x01
02E5   00DC           01646          movwf     inicjacja_wynik
02E6   0008           01647          return
                      01648          
                      01649          
                      01650       
                      01651 
                      01652 
                      01653 
                      01654       
                      01655 
02E7                  01656 Pomiary_temperatury
02E7   1143           01657         bcf     markers,wykonaj_pomiar
                      01658         
02E8   01D9           01659         clrf    znak_rozkazu_ds
                      01660         
MPASM  5.51     PROGRAM_STERUJACY_WERSJA2.ASM   8-7-2014  19:31:38         PAGE 51


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

02E9   3009           01661          movlw    9
02EA   00D8           01662          movwf    jak_duzo_bajtow_odbieram_z_ds
                      01663          
                      01664          ; movlw       HIGH rozkaz_pomiaru
                      01665          ; movwf       TBLPTRH
                      01666       
                      01667          ; movlw       LOW rozkaz_pomiaru
                      01668          ; movwf       TBLPTRL
                      01669          
02EB   1745           01670          bsf         markers_pomiary, wysylam_rozkaz_pomiaru
                      01671          
                      01672          ;najpierw wyœlij rozkaz pomiaru
                      01673          ;wykorzystuje procedury które dzia³aj¹ po wybraniu wysy³ania danych przez polecenie
                      01674          ;
                      01675          ;        "*D1scc44"
                      01676          
                      01677          ; bcf    markers,czy_rozkaz
02EC   01D9           01678          clrf   znak_rozkazu_ds
                      01679          
02ED   22C1           01680          call     inicjacja_ds1820_1
                      01681          
02EE   22F2           01682          call     petla_wysylania_rozkazu_1
                      01683 
                      01684          
                      01685          ;pozniej czekaj 1 s
02EF   1345           01686          bcf         markers_pomiary, wysylam_rozkaz_pomiaru
02F0   15C5           01687          bsf      markers_pomiary,czekam_na_odczyt_DS1
                      01688          
02F1   0008           01689          return
                      01690      
                      01691  
                      01692 
                      01693          
                      01694 ;DS18B20
02F2                  01695 petla_wysylania_rozkazu_1
                      01696 
                      01697 
02F2   1B45           01698         btfsc    markers_pomiary, wysylam_rozkaz_pomiaru
02F3   3009           01699         movlw HIGH rozkaz_pomiaru
                      01700         
                      01701         
02F4   1BC5           01702         btfsc    markers_pomiary, wysylam_rozkaz_odbioru
02F5   3009           01703         movlw HIGH rozkaz_odbioru
                      01704         
02F6   008A           01705         movwf    PCLATH
                      01706         
02F7   1B45           01707         btfsc    markers_pomiary, wysylam_rozkaz_pomiaru
Message[306]: Crossing page boundary -- ensure page bits are set.
02F8   2132           01708          call     rozkaz_pomiaru
                      01709  
02F9   1BC5           01710         btfsc    markers_pomiary, wysylam_rozkaz_odbioru
Message[306]: Crossing page boundary -- ensure page bits are set.
02FA   2137           01711         call rozkaz_odbioru
MPASM  5.51     PROGRAM_STERUJACY_WERSJA2.ASM   8-7-2014  19:31:38         PAGE 52


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      01712         
02FB   018A           01713          clrf     PCLATH
                      01714          ;movwf        TABLAT,w
02FC   00DA           01715          movwf     polecenie_wysylane
02FD   3A00           01716          xorlw     0
02FE   1903           01717          btfsc    STATUS,Z
02FF   0008           01718          return             
                      01719           
0300   0AD9           01720          incf   znak_rozkazu_ds,f
                      01721          
                      01722          
                      01723          ;jezeli 0 to skocz do wyswietlania slowa z linii 2
                      01724          
                      01725          
0301   303C           01726          movlw     czas_oczekiwania_60us      
                      01727          ;ustawiam TMR2 na odbieranie
                      01728          
0302   1683 1303      01729          banksel  PR2
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
0304   0092           01730          movwf    PR2
0305   1283 1303      01731          banksel  T2CON
                      01732 ;ustawiam 60us         
0307   3024           01733          movlw    t2con_dla_60us
0308   0092           01734          movwf    T2CON
0309   108C           01735          bcf      PIR1,TMR2IF
030A   0191           01736          clrf      TMR2
030B   3008           01737          movlw     8
030C   00A3           01738          movwf     n
                      01739          
030D                  01740 petla_sending_pomiar_1
                      01741 
030D   1C5A           01742         btfss     polecenie_wysylane,0
030E   22B8           01743         call      send_zero_1
030F   185A           01744         btfsc     polecenie_wysylane,0
0310   22B0           01745         call      send_one_1
0311   1686           01746         bsf       port_ds1820,czujnik_ds1820_1
                      01747         
0312   1003           01748         bcf       STATUS,C
0313   0CDA           01749         rrf       polecenie_wysylane,f
                      01750         
0314   0BA3           01751         decfsz    n,f
0315   2B0D           01752         goto      petla_sending_pomiar_1
                      01753          
0316   2AF2           01754         goto       petla_wysylania_rozkazu_1
                      01755  
                      01756      
                      01757      
                      01758      
                      01759      
                      01760          
                      01761 
0317                  01762 odbierz_pomiary_temp
                      01763 
MPASM  5.51     PROGRAM_STERUJACY_WERSJA2.ASM   8-7-2014  19:31:38         PAGE 53


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

0317   1245           01764        bcf  markers_pomiary,odczytaj_pomiar_DS1
0318   11C5           01765        bcf  markers_pomiary,czekam_na_odczyt_DS1
0319   1045           01766        bcf  markers_pomiary,czy_wykonuje_pomiar_DS1
031A   01D9           01767         clrf    znak_rozkazu_ds
                      01768          
                      01769          
                      01770          
                      01771          
                      01772          ;najpierw wyœlij rozkaz pomiaru
                      01773          ;wykorzystuje procedury które dzia³aj¹ po wybraniu wysy³ania danych przez polecenie
                      01774          ;
                      01775          ;        "*D1sccbe"
                      01776          ; bcf    markers,czy_rozkaz
                      01777          
031B   17C5           01778          bsf         markers_pomiary, wysylam_rozkaz_odbioru
031C   22C1           01779          call     inicjacja_ds1820_1
                      01780          
                      01781          
                      01782          ;LFSR     FSR0, dane_odebrane_z_ds
                      01783          
031D   22F2           01784          call     petla_wysylania_rozkazu_1
031E   13C5           01785          bcf         markers_pomiary, wysylam_rozkaz_odbioru
                      01786 
031F   30A0           01787          movlw     dane_odebrane_z_ds
0320   0084           01788          movwf     FSR
                      01789          
0321   232B           01790          call     petla_odbioru_rozkazu_1
                      01791          
                      01792          
                      01793          ;sprawdz CRC
0322   30A0           01794          movlw  dane_odebrane_z_ds
0323   0084           01795          movwf  FSR        
                      01796          ;9 bajt to CRC
0324   3009           01797          movlw    9
0325   00A3           01798          movwf     n
                      01799          
0326   235E           01800          call     check_CRC_DS
                      01801          
0327   085B           01802          movf     bajt_CRC,w
                      01803          ;jezeli 0 to jest ok
0328   1903           01804          btfsc    STATUS,Z         
0329   2B97           01805          goto      odbierz_pomiary_temp_show_data
                      01806          
                      01807          
                      01808          ; call    wysylac_napis_CRC_notOK
                      01809          
                      01810         
                      01811         
032A   0008           01812          return
                      01813 
                      01814          
                      01815          
                      01816          
MPASM  5.51     PROGRAM_STERUJACY_WERSJA2.ASM   8-7-2014  19:31:38         PAGE 54


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      01817          
                      01818          
                      01819          
                      01820 
                      01821       
                      01822     
                      01823         
032B                  01824 petla_odbioru_rozkazu_1
032B   0858           01825          movf     jak_duzo_bajtow_odbieram_z_ds,w
032C   00A5           01826          movwf    tmp7
                      01827             
032D   303C           01828          movlw     czas_oczekiwania_60us
032E   1683 1303      01829          banksel    PR2
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
0330   0092           01830          movwf    PR2
0331   3024           01831          movlw    t2con_dla_60us
                      01832          
0332   1283 1303      01833          banksel        T2CON
0334   0092           01834          movwf    T2CON
0335   0191           01835          clrf     TMR2
0336   108C           01836          bcf      PIR1,TMR2IF   
                      01837         
                      01838 ;procedura sprawdza czy ds1820 cos wysyla jezeli tak to sprawdza przez 60 us czy jest choc na chwile 0
                      01839 ;normalnie jezeli ds1820 nic nie wysyla to jest caly czas 1 bez rzadnych zmian
0337                  01840 petla_odbioru_z_ds1820_1
0337   3008           01841         movlw     8
0338   00A3           01842         movwf     n
0339   0191           01843         clrf      TMR2
033A   0180           01844         clrf      INDF
033B   108C           01845         bcf       PIR1,TMR2IF
                      01846         
033C                  01847 petla_stan_odebranego_bitu_1
                      01848          
033C   22A9           01849          call     PIN_LO_1
                      01850         
033D   0000           01851          nop
033E   0000           01852          nop
033F   0000           01853          nop
                      01854          
0340   22A3           01855          call     PIN_HI_1
                      01856          
                      01857          
0341   0000           01858          nop
0342   0000           01859          nop
0343   0000           01860          nop
0344   0000           01861          nop
0345   0000           01862          nop
0346   0000           01863          nop
0347   0000           01864          nop
0348   0000           01865          nop
0349   0000           01866          nop
034A   0000           01867          nop
034B   0000           01868          nop
MPASM  5.51     PROGRAM_STERUJACY_WERSJA2.ASM   8-7-2014  19:31:38         PAGE 55


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

034C   0000           01869          nop
034D   0000           01870          nop
034E   0000           01871          nop
034F   0000           01872          nop
                      01873          
0350   1E86           01874          btfss    port_ds1820,czujnik_ds1820_1
0351   1003           01875          bcf      STATUS,C
0352   1A86           01876          btfsc    port_ds1820,czujnik_ds1820_1
0353   1403           01877          bsf      STATUS,C
0354   0C80           01878          rrf     INDF,f
                      01879          
0355                  01880 czekam_na_kolejny_bit_DS_1
0355   1C8C           01881         btfss    PIR1,TMR2IF
0356   2B55           01882         goto      czekam_na_kolejny_bit_DS_1
                      01883         
0357   108C           01884         bcf       PIR1,TMR2IF
                      01885         
0358   0BA3           01886         decfsz    n,f
0359   2B3C           01887         goto      petla_stan_odebranego_bitu_1
035A   0A84           01888         incf      FSR,f
                      01889         
                      01890 ;czy juz przeszly wszystkie bajty z DS
035B   0BA5           01891         decfsz    tmp7,f
035C   2B37           01892         goto      petla_odbioru_z_ds1820_1
                      01893 
035D   0008           01894          return      
                      01895 
                      01896          
                      01897          
                      01898          
                      01899 
035E                  01900 check_CRC_DS 
035E   01DB           01901          clrf  bajt_CRC
                      01902          ;movlw    
                      01903    
                      01904 ;tablica danych DS18b20 musi byc w FSR2
035F                  01905 check_CRC_DS_loop
035F   0800           01906          movf INDF,w   
0360   0A84           01907          incf   FSR,f
0361   06DB           01908          xorwf bajt_CRC,f       
0362   3000           01909          movlw 0     
                      01910          
0363   185B           01911          btfsc bajt_CRC,0 
0364   3A5E           01912          xorlw 0x5e       
                      01913          
0365   18DB           01914          btfsc bajt_CRC,1 
0366   3ABC           01915          xorlw 0xbc 
                      01916          
0367   195B           01917          btfsc bajt_CRC,2 
0368   3A61           01918          xorlw 0x61 
                      01919          
0369   19DB           01920          btfsc bajt_CRC,3 
036A   3AC2           01921          xorlw 0xc2 
MPASM  5.51     PROGRAM_STERUJACY_WERSJA2.ASM   8-7-2014  19:31:38         PAGE 56


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      01922          
036B   1A5B           01923          btfsc bajt_CRC,4 
036C   3A9D           01924          xorlw 0x9d 
                      01925          
036D   1ADB           01926          btfsc bajt_CRC,5 
036E   3A23           01927          xorlw 0x23 
                      01928          
036F   1B5B           01929          btfsc bajt_CRC,6 
0370   3A46           01930          xorlw 0x46 
                      01931          
0371   1BDB           01932          btfsc bajt_CRC,7 
0372   3A8C           01933          xorlw 0x8c 
                      01934          
0373   00DB           01935          movwf bajt_CRC   
                      01936          
0374   0BA3           01937          decfsz n,f 
0375   2B5F           01938          goto check_CRC_DS_loop         
                      01939                      
                      01940 
                      01941          ;movwf bajt_CRC         
                      01942  
                      01943 
0376   0008           01944          return         
                      01945 
                      01946 
                      01947          
                      01948          
                      01949 
0377                  01950 zamien_dane_na_temp
                      01951          ;bajt m³odszy
                      01952          ;sprawdzam czy mam wartosc ujemna
                      01953          
                      01954          
0377   0804           01955          movf   FSR,w
0378   00CE           01956          movwf   wartosc_opcji_hex
                      01957          
0379   0A84           01958          incf      FSR,f
037A   1F80           01959          btfss     INDF,7
037B   2B83           01960          goto     zamien_dane_na_temp_dodatnie
                      01961 
037C   0384           01962         decf    FSR,f
037D   3001           01963          movlw    1
037E   0280           01964         subwf    INDF,f
037F   1803           01965         btfsc    STATUS,C
0380   2B83           01966         goto      zamien_dane_na_temp_dodatnie   
                      01967         
                      01968         ;bylo 0 w INDF
                      01969         ;musze zmniejszyc o 1 pierwszy bajt
                      01970         
0381   0A84           01971         incf    FSR,f
                      01972         
0382   0380           01973         decf    INDF,f
                      01974           
MPASM  5.51     PROGRAM_STERUJACY_WERSJA2.ASM   8-7-2014  19:31:38         PAGE 57


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      01975          
                      01976          
                      01977          
                      01978 
0383                  01979 zamien_dane_na_temp_dodatnie
                      01980         
0383   30A0           01981         movlw     dane_odebrane_z_ds
0384   0084           01982          movwf     FSR
                      01983         
                      01984          
0385   0800           01985          movf    INDF,w
0386   00B0           01986          movwf   wynik01
                      01987          
                      01988          
                      01989          
                      01990          ;zapisuje w temp_ulamek sam mlodsz¹ po³ówkê pierwszego bajtu
                      01991          ;temperatury
0387   300F           01992          movlw    0x0f
0388   0530           01993          andwf    wynik01,w
0389   00B4           01994          movwf    wynik01_temp
038A   0EB4           01995          swapf    wynik01_temp,f
038B   0E00           01996          swapf    INDF,w
038C   0A84           01997          incf      FSR,f
038D   390F           01998          andlw    0x0f
038E   00AD           01999          movwf    dec1_temp
                      02000          
038F   300F           02001          movlw    0x0f
0390   0500           02002          andwf    INDF,w
0391   00AC           02003          movwf    dec10_temp
0392   0E2C           02004          swapf    dec10_temp,w
0393   07AD           02005          addwf    dec1_temp,f
                      02006          
                      02007          ;w bajcie temp_1 jest liczba okreœlaj¹ca szesnastkowo temp
0394   082D           02008          movf     dec1_temp,w
0395   00CD           02009          movwf    wartosc_opcji_temp
                      02010          
                      02011          ; movf     temp_ulamek,w
                      02012          ; movwf    wynik01_temp
                      02013          
0396   0008           02014          return
                      02015          
                      02016          
                      02017          
                      02018          
                      02019       
0397                  02020 odbierz_pomiary_temp_show_data
                      02021          
                      02022                   
0397   30A0           02023          movlw     dane_odebrane_z_ds
0398   0084           02024          movwf     FSR
                      02025          
                      02026          
0399   2377           02027          call     zamien_dane_na_temp
MPASM  5.51     PROGRAM_STERUJACY_WERSJA2.ASM   8-7-2014  19:31:38         PAGE 58


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      02028         
                      02029         
039A   1886           02030          btfsc   port_start_lodowki,pin_start_all      
039B   1643           02031          bsf     markers,reguluj
                      02032         
039C   1DC3           02033          btfss     markers,aktualizuj_temp_co_sekunde
039D   0008           02034          return
                      02035          
                      02036          ;wyswietlaj temperature
                      02037          
                      02038         ; call     check_busy4bit
                      02039 
                      02040          ; movlw   linia_druga
                      02041          ; addlw    polozenie_wartosci
                      02042          ; call    send
                      02043  
                      02044          ; clrf     znak_linia
                      02045          ; call     Znajdz_wartosc_opcji_temper
                      02046          
                      02047          
                      02048          ; call   Wyswietl_menu 
039E   17C3           02049          bsf      markers,odswiez_ekran
039F   0008           02050          return
                      02051 
                      02052 
                      02053 
                      02054 
                      02055      
                      02056      
                      02057      
                      02058      
                      02059          
                      02060          
                      02061          
                      02062          
                      02063          
                      02064          
                      02065          
                      02066          
                      02067          
                      02068          
                      02069          
                      02070          
                      02071          
                      02072          
                      02073 
                      02074          
                      02075 ;procedura rejstracji wcisniecia klawisza 1
                      02076 
                      02077 ;tzn tu trzeba wstawiæ procedury uruchamiane po wcisnieciu i puszczeniu przycisku
                      02078 ; jeden "1"
                      02079 
03A0                  02080 zarejestrowano_klawisz_dol
MPASM  5.51     PROGRAM_STERUJACY_WERSJA2.ASM   8-7-2014  19:31:38         PAGE 59


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      02081 ;moze byc tak ze po zarejstrowaniu przycisku 1 i po czasie oczekiwania, wciaz jest on wcisniety
                      02082 ;wtedy ponownie uruchom odliczanie TMR0
                      02083 
                      02084 
                      02085 ;jezeli klawisz jest wciaz wcisniety to wlacz przerwanie TMR0 i ustaw znowu sprawdzanie TMR0
                      02086 
03A0   1905           02087       btfsc   port_klawisz_dol,pin_klawisz_dol  
03A1   2BA4           02088       goto       procedura_po_wci_pusz_dol
                      02089 ;to wykonuje jezeli wciaz jest wcisniety przycisk
                      02090 ; czyli normalnie ponownie uruchamiam TMR0
                      02091       
                      02092      ;ale z d³u¿szym zliczaniem zanim znów pozwolê sprawdzaæ 
                      02093       
                      02094       
03A2   244C           02095       call  wlacz_przerwanie_tmr0   
03A3   2CA9           02096       goto LOOP
                      02097 
                      02098       
                      02099 
                      02100 
03A4                  02101 procedura_po_wci_pusz_dol
                      02102 ;procedura uruchamiana po zarejestrowano wcisniecia i puszczenia przycisku   
                      02103    
                      02104    
03A4   01A6           02105       clrf  stan_key
03A5   01C4           02106       clrf  markers_klawisze
                      02107 
03A6                  02108 procedura_po_wci_pusz_dol_wcisn      
                      02109       
                      02110        
                      02111       
03A6   1849           02112       btfsc       stan_menu,menu_glowne
03A7   2BAA           02113       goto        klawisz_dol_zmiana_menu
                      02114 
                      02115        
                      02116 
                      02117           
03A8   18C9           02118       btfsc       stan_menu,wybor_opcji
03A9   2BBB           02119       goto        klawisz_dol_zmiana_wartosci
                      02120 
                      02121       
                      02122       
03AA                  02123 klawisz_dol_zmiana_menu      
                      02124       ;jezeli byla teraz ustawiona opcja koncowa to nic nie rob w menu
                      02125       
03AA   0846           02126       movf        opcja_menu,w
03AB   3A03           02127       xorlw       koncowa_opcja_menu
03AC   1903           02128       btfsc       STATUS,Z
03AD   2BB3           02129       goto        procedura_po_wci_pusz_dol_nic
                      02130       
                      02131       
                      02132       ;zwiekszam o jeden  zmienna opcja_menu  - opcja powinna byc wskazywac kolejna opcje
                      02133       
MPASM  5.51     PROGRAM_STERUJACY_WERSJA2.ASM   8-7-2014  19:31:38         PAGE 60


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      02134       
03AE   0AC6           02135       incf        opcja_menu,f
                      02136       
                      02137       ;zaznaczam ze wlaczam przycisk  dol dla wyswietlania menu
                      02138       
03AF   01C8           02139       clrf        znaczniki_klawiszy_menu
                      02140       
03B0   1448           02141       bsf         znaczniki_klawiszy_menu,opcje_po_przycisku_dol
                      02142       
                      02143       ;jezeli jest wieksza od zmiennej 
03B1   20DC           02144       call       Wyswietlanie_Menu 
03B2   2CA9           02145         goto  LOOP
03B3                  02146 procedura_po_wci_pusz_dol_nic      
03B3   01C6           02147       clrf        opcja_menu
                      02148       
                      02149       ;zaznaczam ze wlaczam przycisk  dol dla wyswietlania menu
                      02150       
03B4   1449           02151      bsf  stan_menu,menu_glowne
03B5   3080           02152        movlw    linia_gorna
                      02153        
03B6   00C7           02154          movwf    polozenie_gwiazdka
03B7   01C8           02155          clrf        znaczniki_klawiszy_menu
                      02156          
03B8   14C8           02157          bsf      znaczniki_klawiszy_menu,opcje_po_przycisku_gora
                      02158          
                      02159       ;jezeli jest wieksza od zmiennej 
03B9   20DC           02160       call       Wyswietlanie_Menu 
                      02161       
                      02162       
03BA   2CA9           02163       goto  LOOP
                      02164 
                      02165 
                      02166       
                      02167       
                      02168 
                      02169 
                      02170       
                      02171  ;;;;DOL  DOL DOWN 
                      02172       
03BB                  02173 klawisz_dol_zmiana_wartosci
                      02174 
03BB   0846           02175          movf     opcja_menu,w
                      02176          
03BC   0084           02177          movwf    FSR
                      02178          
03BD   304B           02179          movlw    wartosc_opcji_uruchom
03BE   0784           02180          addwf    FSR,f
                      02181          
                      02182                   
                      02183          ;tu sprawdzam która opcja jest wybrana i któr¹ opcjê zmieniam o ile i jakie s¹ 
                      02184          ;maxima i mimima danej wartoœci opcji
                      02185          
03BF   0846           02186          movf   opcja_menu,w
MPASM  5.51     PROGRAM_STERUJACY_WERSJA2.ASM   8-7-2014  19:31:38         PAGE 61


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

03C0   3A00           02187          xorlw    numer_opcji_uruchom
03C1   1903           02188          btfsc    STATUS,Z
03C2   2BD6           02189          goto     klawisz_dol_zmiana_uruchom
                      02190          
03C3   0846           02191          movf   opcja_menu,w
03C4   3A01           02192          xorlw    numer_opcji_nastawa
03C5   1903           02193          btfsc    STATUS,Z
03C6   2BC9           02194          goto     klawisz_dol_zmiana_nastawa
                      02195          
                      02196          
                      02197          ; movf   opcja_menu,w
                      02198          ; xorlw    numer_opcji_temperatura
                      02199          ; btfsc    STATUS,Z
                      02200          ; goto     klawisz_up_zmiana_temperatura
                      02201          
                      02202          
03C7   0380           02203          decf     INDF,f
                      02204          
03C8   2BE6           02205          goto     klawisz_dol_zmiana_wartosci_end 
                      02206       
                      02207      
                      02208      
                      02209      
                      02210      
                      02211 ;opcja  zmiana nastawy temperatury 
                      02212       
03C9                  02213 klawisz_dol_zmiana_nastawa
                      02214 
                      02215                  
03C9   30E1           02216          movlw    min_temp
03CA   0600           02217          xorwf    INDF,w
03CB   1D03           02218          btfss    STATUS,Z
03CC   2BD1           02219          goto     klawisz_dol_zmiana_nastawa1
                      02220          
03CD   3008           02221          movlw    max_temp
03CE   0080           02222          movwf    INDF
03CF   01D5           02223          clrf   nastawa_temp_01
                      02224          
03D0   2BD5           02225          goto     klawisz_dol_zmiana_nastawa_end
                      02226          
03D1                  02227 klawisz_dol_zmiana_nastawa1
                      02228          ; movlw    o_ile_zmieniam_temp
                      02229          ; subwf    INDF,f
                      02230          
03D1   3080           02231          movlw      0x80
03D2   07D5           02232          addwf      nastawa_temp_01,f
03D3   1803           02233          btfsc          STATUS,C
03D4   0380           02234          decf       INDF,f
                      02235          
                      02236          
03D5                  02237 klawisz_dol_zmiana_nastawa_end         
                      02238         
03D5   2BE6           02239          goto     klawisz_dol_zmiana_wartosci_end
MPASM  5.51     PROGRAM_STERUJACY_WERSJA2.ASM   8-7-2014  19:31:38         PAGE 62


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      02240          
                      02241 
                      02242          
                      02243          
                      02244          
                      02245          
                      02246          
                      02247          
                      02248          
                      02249          
                      02250          
                      02251          
03D6                  02252 klawisz_dol_zmiana_uruchom
                      02253 ;tutaj uruchamiam dzialanie procedur mierzacych temperature 
                      02254 
03D6   304B           02255       movlw    wartosc_opcji_uruchom
03D7   0084           02256       movwf       FSR
                      02257 
                      02258 
03D8   3000           02259         movlw    min_uruchom
03D9   0600           02260          xorwf    INDF,w
03DA   1D03           02261          btfss    STATUS,Z
03DB   2BE1           02262          goto     klawisz_dol_uruchom_wart
                      02263          
03DC   3001           02264          movlw    max_uruchom
03DD   0080           02265          movwf    INDF
                      02266          
                      02267          
                      02268          ;wlaczam prace lodowki
                      02269          
                      02270          
03DE   1486           02271          bsf      port_start_lodowki,pin_start_all
03DF   1006           02272          bcf      port_start_lodowki,pin_kompresor
                      02273          
                      02274          
                      02275          
03E0   2BE6           02276          goto     klawisz_dol_zmiana_wartosci_end
                      02277          
03E1                  02278 klawisz_dol_uruchom_wart
03E1   3001           02279          movlw    o_ile_zmieniam_uruchom
03E2   0280           02280          subwf    INDF,f
                      02281          ;ten pin jesli ustawiony swiadczy o koniecznosci regulacji
                      02282          
03E3   1086           02283          bcf      port_start_lodowki,pin_start_all
03E4   1006           02284          bcf      port_start_lodowki,pin_kompresor
                      02285          
                      02286          
03E5   2BE6           02287          goto     klawisz_dol_zmiana_wartosci_end
                      02288 
                      02289          
                      02290 
                      02291            
                      02292          
MPASM  5.51     PROGRAM_STERUJACY_WERSJA2.ASM   8-7-2014  19:31:38         PAGE 63


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      02293          
                      02294          
                      02295          
03E6                  02296 klawisz_dol_zmiana_wartosci_end      
                      02297       ;jezeli jest wieksza od zmiennej 
03E6   20DC           02298       call       Wyswietlanie_Menu 
                      02299       
                      02300 
                      02301 
                      02302    
                      02303 
                      02304 
                      02305  
                      02306  
03E7   2CA9           02307       goto  LOOP      
                      02308 
                      02309 
                      02310       
                      02311       
                      02312       
                      02313       
                      02314       
                      02315       
                      02316       
                      02317       
                      02318       
                      02319       
                      02320       
                      02321       
                      02322 
03E8                  02323 zarejestrowano_klawisz_gora
                      02324 ;moze byc tak ze po zarejstrowaniu przycisku 1 i po czasie oczekiwania, wciaz jest on wcisniety
                      02325 ;wtedy ponownie uruchom odliczanie TMR0
                      02326 
03E8   1A05           02327       btfsc   port_klawisz_gora,pin_klawisz_gora
03E9   2BEC           02328       goto      procedura_po_wci_pusz_gora
                      02329 ;to wykonuje jezeli wciaz jest wcisniety przycisk
                      02330 ; czyli normalnie ponownie uruchamiam TMR0
                      02331       
                      02332       
03EA   244C           02333       call  wlacz_przerwanie_tmr0   
03EB   2CA9           02334       goto LOOP
                      02335 
03EC                  02336 procedura_po_wci_pusz_gora
                      02337       ;np zapisuje na linii 2 ekranu numer 2
                      02338 ;bcf            portlampki,pin_lampki   
03EC   01A6           02339       clrf  stan_key
03ED   01C4           02340       clrf  markers_klawisze
                      02341 
                      02342       
                      02343       
                      02344       
03EE   1849           02345       btfsc       stan_menu,menu_glowne
MPASM  5.51     PROGRAM_STERUJACY_WERSJA2.ASM   8-7-2014  19:31:38         PAGE 64


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

03EF   2BF2           02346       goto        klawisz_gora_zmiana_menu
                      02347 
                      02348        
                      02349 
                      02350           
03F0   18C9           02351       btfsc       stan_menu,wybor_opcji
03F1   2BFB           02352       goto        klawisz_gora_zmiana_wartosci
                      02353 
                      02354        
                      02355        
                      02356        
03F2                  02357 klawisz_gora_zmiana_menu   
                      02358 
                      02359       ;jezeli byla teraz ustawiona opcja koncowa to nic nie rob w menu
                      02360       
03F2   0846           02361       movf        opcja_menu,w
03F3   3A00           02362       xorlw       0
03F4   1903           02363       btfsc       STATUS,Z
03F5   2BFA           02364       goto        procedura_po_wci_pusz_gora_nic
                      02365       
                      02366       
                      02367       ;zwiekszam o jeden  zmienna opcja_menu  - opcja powinna byc wskazywac kolejna opcje
                      02368       
                      02369       
03F6   03C6           02370       decf        opcja_menu,f
                      02371       
                      02372       ;zaznaczam ze wlaczam przycisk  dol dla wyswietlania menu
                      02373       
03F7   01C8           02374       clrf        znaczniki_klawiszy_menu
                      02375       
03F8   14C8           02376       bsf         znaczniki_klawiszy_menu,opcje_po_przycisku_gora
                      02377       
                      02378       ;jezeli jest wieksza od zmiennej 
03F9   20DC           02379       call       Wyswietlanie_Menu 
                      02380 
                      02381       
03FA                  02382 procedura_po_wci_pusz_gora_nic     
03FA   2CA9           02383        goto  LOOP
                      02384        
                      02385 
                      02386 
                      02387 
                      02388 
                      02389 
                      02390 
                      02391 
                      02392 
                      02393 
                      02394       
                      02395       
                      02396       
                      02397       
                      02398       
MPASM  5.51     PROGRAM_STERUJACY_WERSJA2.ASM   8-7-2014  19:31:38         PAGE 65


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      02399       
                      02400       
                      02401       
                      02402       
                      02403       
                      02404       
                      02405       
                      02406       
                      02407       
                      02408       
                      02409       
03FB                  02410 klawisz_gora_zmiana_wartosci
                      02411 
03FB   0846           02412          movf     opcja_menu,w
                      02413          
03FC   0084           02414          movwf    FSR
                      02415          
03FD   304B           02416          movlw    wartosc_opcji_uruchom
03FE   0784           02417          addwf    FSR,f
                      02418          
                      02419                   
                      02420                ;tu sprawdzam która opcja jest wybrana i któr¹ opcjê zmieniam o ile i jakie s¹ 
                      02421          ;maxima i mimima danej wartoœci opcji
                      02422          
03FF   0846           02423          movf   opcja_menu,w
0400   3A00           02424          xorlw    numer_opcji_uruchom
0401   1903           02425          btfsc    STATUS,Z
0402   2C16           02426          goto     klawisz_up_zmiana_uruchom
                      02427          
0403   0846           02428          movf   opcja_menu,w
0404   3A01           02429          xorlw    numer_opcji_nastawa
0405   1903           02430          btfsc    STATUS,Z
0406   2C09           02431          goto     klawisz_up_zmiana_nastawa
                      02432          
                      02433          
                      02434          ; movf   opcja_menu,w
                      02435          ; xorlw    numer_opcji_temperatura
                      02436          ; btfsc    STATUS,Z
                      02437          ; goto     klawisz_up_zmiana_temperatura
                      02438          
                      02439          
0407   0A80           02440          incf     INDF,f
                      02441          
0408   2C26           02442          goto     klawisz_up_zmiana_wartosci_end 
                      02443       
                      02444      
                      02445      
                      02446      
                      02447      
                      02448 ;opcja  zmiana nastawy temperatury 
                      02449       
0409                  02450 klawisz_up_zmiana_nastawa
                      02451 
MPASM  5.51     PROGRAM_STERUJACY_WERSJA2.ASM   8-7-2014  19:31:38         PAGE 66


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      02452                  
0409   3008           02453          movlw    max_temp
040A   0600           02454          xorwf    INDF,w
040B   1D03           02455          btfss    STATUS,Z
040C   2C11           02456          goto     klawisz_up_1_pr_zmiana
                      02457          
040D   30E1           02458          movlw    min_temp
040E   0080           02459          movwf    INDF
                      02460          
040F   01D5           02461          clrf     nastawa_temp_01
                      02462          
0410   2C26           02463          goto     klawisz_up_zmiana_wartosci_end
                      02464          
0411                  02465 klawisz_up_1_pr_zmiana
                      02466          ; movlw    o_ile_zmieniam_temp
                      02467          ; addwf    INDF,f
                      02468          
0411   3080           02469          movlw          0x80
                      02470          ; subwf          nastawa_temp_01,f
0412   02D5           02471          subwf          nastawa_temp_01,f
0413   1C03           02472          btfss          STATUS,C
0414   0A80           02473          incf           INDF,f
                      02474          
0415                  02475 klawisz_up_1_pr_zmiana_end         
                      02476         
0415   2C26           02477          goto     klawisz_up_zmiana_wartosci_end
                      02478          
                      02479 
                      02480          
                      02481          
                      02482          
                      02483          
                      02484          
                      02485          
                      02486          
                      02487          
                      02488          
                      02489          
0416                  02490 klawisz_up_zmiana_uruchom
                      02491 ;tutaj uruchamiam dzialanie procedur mierzacych temperature 
                      02492 
0416   304B           02493       movlw    wartosc_opcji_uruchom
0417   0084           02494       movwf       FSR
                      02495 
                      02496 
0418   3001           02497         movlw    max_uruchom
0419   0600           02498          xorwf    INDF,w
041A   1D03           02499          btfss    STATUS,Z
041B   2C21           02500          goto     klawisz_up_uruchom_wart
                      02501          
041C   3000           02502          movlw    min_uruchom
041D   0080           02503          movwf    INDF
                      02504          
MPASM  5.51     PROGRAM_STERUJACY_WERSJA2.ASM   8-7-2014  19:31:38         PAGE 67


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      02505          
                      02506          ;wylaczam prace lodowki
                      02507          
                      02508          
041E   1086           02509          bcf      port_start_lodowki,pin_start_all
041F   1006           02510          bcf      port_start_lodowki,pin_kompresor
                      02511          
                      02512          
                      02513          
0420   2C26           02514          goto     klawisz_up_zmiana_wartosci_end
                      02515          
0421                  02516 klawisz_up_uruchom_wart
0421   3001           02517          movlw    o_ile_zmieniam_uruchom
0422   0780           02518          addwf    INDF,f
                      02519          ;ten pin jesli ustawiony swiadczy o koniecznosci regulacji
                      02520          
0423   1486           02521          bsf      port_start_lodowki,pin_start_all
0424   1006           02522          bcf      port_start_lodowki,pin_kompresor
                      02523          
                      02524          
0425   2C26           02525          goto     klawisz_up_zmiana_wartosci_end
                      02526 
                      02527          
                      02528 
                      02529            
                      02530          
                      02531          
                      02532          
                      02533          
0426                  02534 klawisz_up_zmiana_wartosci_end      
                      02535       ;jezeli jest wieksza od zmiennej 
0426   20DC           02536       call       Wyswietlanie_Menu 
                      02537       
                      02538 
                      02539 
                      02540    
                      02541 
                      02542 
                      02543  
                      02544  
0427   2CA9           02545       goto  LOOP      
                      02546             
                      02547       
                      02548       
                      02549       
                      02550       
                      02551       
                      02552       
                      02553       
                      02554       
                      02555       
                      02556       
                      02557       
MPASM  5.51     PROGRAM_STERUJACY_WERSJA2.ASM   8-7-2014  19:31:38         PAGE 68


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      02558       
                      02559       
                      02560       
                      02561       
                      02562       
                      02563       
                      02564       
                      02565       
                      02566       
                      02567       
                      02568       
                      02569       
                      02570       
                      02571       
                      02572       
                      02573       
                      02574       
                      02575       
                      02576 ;;;;;;;;;;;;;;
                      02577 
                      02578 ;                                                         ENTER
                      02579 
                      02580 ;;;;;      
                      02581       
                      02582       
                      02583       
                      02584       
                      02585       
                      02586       
                      02587       
0428                  02588 zarejestrowano_klawisz_enter
                      02589 ;moze byc tak ze po zarejstrowaniu przycisku 1 i po czasie oczekiwania, wciaz jest on wcisniety
                      02590 ;wtedy ponownie uruchom odliczanie TMR0
                      02591 
0428   1985           02592       btfsc   port_klawisz_enter,pin_klawisz_enter
0429   2C2C           02593       goto        procedura_po_wci_pusz_enter
                      02594 ;to wykonuje jezeli wciaz jest wcisniety przycisk
                      02595 ; czyli normalnie ponownie uruchamiam TMR0
                      02596       
                      02597       
042A   244C           02598       call  wlacz_przerwanie_tmr0   
042B   2CA9           02599       goto LOOP
                      02600 
                      02601 
042C                  02602 procedura_po_wci_pusz_enter
                      02603       
                      02604 
042C   01A6           02605       clrf  stan_key
042D   01C4           02606       clrf  markers_klawisze
                      02607 
                      02608       
                      02609       
042E   1849           02610       btfsc       stan_menu,menu_glowne
MPASM  5.51     PROGRAM_STERUJACY_WERSJA2.ASM   8-7-2014  19:31:38         PAGE 69


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

042F   2C32           02611       goto        wybrano_zmiane_opcji
                      02612       
                      02613       
0430   18C9           02614       btfsc       stan_menu,wybor_opcji
0431   2C3A           02615       goto        wybrano_menu_glowne
                      02616       
0432                  02617 wybrano_zmiane_opcji
                      02618 
                      02619          ;je¿eli ustawiona jest opcja wyœwietlaj¹ca pomiar temperatury
                      02620          ;czasu to nie przechodŸ do zmiany opcji
                      02621          
                      02622          
0432   0846           02623          movf   opcja_menu,w
0433   3A02           02624          xorlw    numer_opcji_temperatura
0434   1903           02625          btfsc    STATUS,Z
0435   2CA9           02626          goto     LOOP
                      02627 
                      02628          
                      02629          
                      02630          
                      02631          
                      02632          
                      02633 
0436   1049           02634          bcf     stan_menu,menu_glowne
0437   14C9           02635          bsf     stan_menu,wybor_opcji
                      02636          
                      02637       
                      02638       ;jezeli jest wieksza od zmiennej 
0438   20DC           02639       call       Wyswietlanie_Menu 
                      02640          
0439   2CA9           02641       goto  LOOP
                      02642 
043A                  02643 wybrano_menu_glowne
043A   1449           02644          bsf     stan_menu,menu_glowne
043B   10C9           02645          bcf     stan_menu,wybor_opcji
                      02646          
                      02647          ; clrf        znaczniki_klawiszy_menu
                      02648       
                      02649      ; bsf         znaczniki_klawiszy_menu,opcja_bez_przycisku
                      02650       
                      02651       
043C   2185           02652       call     check_busy4bit
043D   3080           02653          movlw    linia_gorna
043E   3E08           02654          addlw    polozenie_wartosci-1
043F   214D           02655          call send
                      02656          
                      02657          
0440   2185           02658          call     check_busy4bit
0441   3020           02659          movlw    _puste
0442   2163           02660          call   write_lcd
                      02661          
0443   2185           02662          call     check_busy4bit
0444   30C0           02663          movlw    linia_dolna
MPASM  5.51     PROGRAM_STERUJACY_WERSJA2.ASM   8-7-2014  19:31:38         PAGE 70


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

0445   3E08           02664          addlw    polozenie_wartosci-1
0446   214D           02665          call send
                      02666          
                      02667          
0447   2185           02668          call     check_busy4bit
0448   3020           02669          movlw    _puste
0449   2163           02670          call   write_lcd
                      02671       
                      02672       
                      02673       
                      02674       
                      02675     
                      02676       ;jezeli jest wieksza od zmiennej 
044A   20DC           02677       call       Wyswietlanie_Menu 
                      02678       
                      02679          
044B   2CA9           02680       goto  LOOP
                      02681       
                      02682             
                      02683       
                      02684       
                      02685       
                      02686       
                      02687       
                      02688       
                      02689       
                      02690       
                      02691       
                      02692       
                      02693       
                      02694       
                      02695       
                      02696       
                      02697       
                      02698       
                      02699       
                      02700       
                      02701       
                      02702       
                      02703 
                      02704 ;procedura odliczajaca jeden z timerow
                      02705 
044C                  02706 wlacz_przerwanie_tmr0
                      02707 ;tu wlaczane jest przerwanie jednego z zegara
                      02708 ; w tym wypadku zegar TMR0
                      02709 ;mo¿na u¿yc innego dostepnego dla okreslonego procesora
                      02710 ;ustawienia dowolne - minimum oko³o 0,1 sekundy oczekiwania po nacisnieciu klawisza
                      02711 
                      02712 ;ustawienia timera0
                      02713 ; w procedurze inicjacyjnej
                      02714 ; procesor ma czestotliwosc 8 Mhz
                      02715 ;wtedy jedno zliczenie to 1/2000000s
                      02716 ; a wiec przelicznik 1:256 (czyli przerwanie wystepuje po 256*256/2000000)
MPASM  5.51     PROGRAM_STERUJACY_WERSJA2.ASM   8-7-2014  19:31:38         PAGE 71


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      02717 ;czyli oko³o 32 ms
                      02718 ; zrobimy wiec 3 zliczenia zanim zarejestruje przycisk
                      02719      
                      02720       ;tu wlaczam tylko przerwanie TMR0
                      02721 
044C   3003           02722       movlw    jak_duzo_zliczen_TMR0
044D   00C2           02723       movwf     zliczenia_przerwania_TMR0
                      02724 
044E   0181           02725       clrf  TMR0
                      02726 
044F   110B           02727       bcf   INTCON,T0IF
0450   168B           02728       bsf   INTCON,T0IE
                      02729      
                      02730 
0451   1683 1303      02731       banksel OPTION_REG
                      02732 
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
0453   1701           02733       bsf    OPTION_REG,INTEDG
                      02734 
0454   1283 1303      02735       banksel 0
                      02736      
0456   0008           02737       return
                      02738    
                      02739 
0457                  02740 wcisnieto_klawisz_dol
                      02741 
                      02742            
                      02743             
0457   1844           02744       btfsc   markers_klawisze,wcisnieto_klawisz
0458   0008           02745       return
                      02746 
                      02747       
0459   1444           02748       bsf   markers_klawisze,wcisnieto_klawisz
                      02749 
045A   01A6           02750       clrf  stan_key
                      02751 
045B   1426           02752       bsf   stan_key,wcisniety_jest_klawisz_dol
                      02753 
                      02754         ;wlaczam przerwanie zeby sprawdzic czas po ktorym ma byc zarejestrowany klawisz
                      02755       
045C   2C4C           02756       goto  wlacz_przerwanie_tmr0      
                      02757 
                      02758 
                      02759       
                      02760       
                      02761 
045D                  02762 wcisnieto_klawisz_gora
                      02763 
                      02764            
                      02765             
045D   1844           02766       btfsc   markers_klawisze,wcisnieto_klawisz
045E   0008           02767       return
                      02768 
MPASM  5.51     PROGRAM_STERUJACY_WERSJA2.ASM   8-7-2014  19:31:38         PAGE 72


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      02769       
045F   1444           02770       bsf   markers_klawisze,wcisnieto_klawisz
                      02771 
0460   01A6           02772       clrf  stan_key
                      02773 
0461   14A6           02774       bsf   stan_key,wcisniety_jest_klawisz_zmiana
                      02775 
                      02776         ;wlaczam przerwanie zeby sprawdzic czas po ktorym ma byc zarejestrowany klawisz
                      02777       
0462   2C4C           02778       goto  wlacz_przerwanie_tmr0      
                      02779 
                      02780 
0463                  02781 wcisnieto_klawisz_enter
                      02782      
                      02783       
                      02784             
0463   1844           02785       btfsc   markers_klawisze,wcisnieto_klawisz
0464   0008           02786       return
                      02787 
                      02788       
0465   1444           02789       bsf   markers_klawisze,wcisnieto_klawisz
                      02790 
0466   01A6           02791       clrf  stan_key
                      02792 
0467   1526           02793       bsf   stan_key,wcisniety_jest_klawisz_enter
                      02794 
                      02795         ;wlaczam przerwanie zeby sprawdzic czas po ktorym ma byc zarejestrowany klawisz
                      02796       
0468   2C4C           02797       goto  wlacz_przerwanie_tmr0      
                      02798 
                      02799       
                      02800       
                      02801       
                      02802       
                      02803       
                      02804       
                      02805       
                      02806       
                      02807       
                      02808       
                      02809 
0469                  02810 regulacja
                      02811         
                      02812       ; tu jest   procedura regulacji kanalu 1
                      02813         
0469   1243           02814       bcf       markers,reguluj
                      02815          
                      02816          
                      02817          
                      02818 ;porownaj wartosc pomierzona z zadana
                      02819 ; wartosc_opcji_nastawa
                      02820 ; wartosc_opcji_temp
046A   084C           02821         movf      wartosc_opcji_nastawa,w
MPASM  5.51     PROGRAM_STERUJACY_WERSJA2.ASM   8-7-2014  19:31:38         PAGE 73


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

046B   00D6           02822         movwf    nastawa_temp_histereza
                      02823         
046C   0855           02824         movf      nastawa_temp_01,w
046D   00D7           02825         movwf    nastawa_temp_01_histereza
                      02826 
                      02827 
046E   1FD6           02828         btfss  nastawa_temp_histereza,7
046F   2C90           02829          goto   nastawa_jest_wieksza_od_0_inna_regulacja
                      02830 
                      02831         
                      02832 ;uwzgledniam histereze
                      02833 
0470   1806           02834         btfsc     port_start_lodowki,pin_kompresor
0471   2C77           02835         goto      zwieksz_temp_o_histereze
                      02836         
                      02837         ;zmniejsz temperature nastawy o histereze
                      02838         ;bo jest wylaczone
0472   3040           02839         movlw     histereza
0473   02D7           02840         subwf     nastawa_temp_01_histereza,f
                      02841         
0474   1C03           02842         btfss    STATUS,C
0475   0AD6           02843         incf      nastawa_temp_histereza,f
                      02844         
0476   2C7B           02845         goto     regulacja_po_histerezie
0477                  02846 zwieksz_temp_o_histereze    
                      02847         ;jest wlaczone odejmij zwieksz ulamek temp o histereze
                      02848         
                      02849         ;jesli jest np ustawiona 0xed  czyli -18,5  
                      02850         ;to w ulamku jest 0x80
                      02851         ;to wtedy dodajac histereze np 0x30
                      02852         ;wylaczy dopiero gdy jest temperatura -18, 0xb0 w ulamku czyli przy -18,675
                      02853         ;wlaczy ponownie gdy wzrosnie temperatura do -18,3125
0477   3040           02854         movlw     histereza
0478   07D7           02855         addwf     nastawa_temp_01_histereza,f
                      02856         
0479   1803           02857         btfsc    STATUS,C
047A   03D6           02858         decf      nastawa_temp_histereza,f
                      02859 
                      02860 
047B                  02861 regulacja_po_histerezie        
                      02862          
                      02863 ;gdy nastawa jest ujemna
                      02864          
                      02865          ;jezeli aktualny pomiar jest wiekszy od 0
                      02866          ;czyli nastawilem ujemnie
                      02867          ;ale mam +
                      02868          
047B   1FCD           02869          btfss   wartosc_opcji_temp,7
047C   2C8C           02870          goto    wlacz_kompresor_lodowki
                      02871          
                      02872          
                      02873          ;jezeli obydwie sa ujemna to sprawdzam ktora wartosc jest mniejsza
                      02874          ;zalozmy ze ustawiona wartosc jest -10 czyli 0xf5
MPASM  5.51     PROGRAM_STERUJACY_WERSJA2.ASM   8-7-2014  19:31:38         PAGE 74


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      02875          ;jezeli zmierzona jest wieksza znaczy ze trzeba wciaz chlodzic
                      02876          ;np -8  to 0xf7
                      02877          
047D   0856           02878          movf     nastawa_temp_histereza,w
                      02879          ;pomiarh - jaka_wartosc_regulujeH
                      02880          ;  file  - Wreg
                      02881          ; wartosc_opcji_temp - wartosc_opcji_nastawa
047E   024D           02882          subwf    wartosc_opcji_temp,w
                      02883 ;sprawdz czy to samo czy wieksze
047F   1903           02884          btfsc    STATUS,Z
0480   2C84           02885          goto     sa_rowne_sprawdz_ulamek
                      02886          ;C jest ustawione przy odejmowaniu jesli wynik nie byl wartoscia ujemna czyli jesli 
                      02887          ;wartosc_opcji_temp > wartosc_opcji_nastawa
                      02888          ;np 0xf8 > 0xf5
                      02889          ; czyli -7   i  -10
0481   1803           02890          btfsc    STATUS,C 
0482   2C8C           02891          goto     wlacz_kompresor_lodowki
                      02892 ;tzn nastawa<pomiaru temp  wiec wylacz grzanie
0483   2C8E           02893          goto     off_kompresor_lodowki
                      02894                            
0484                  02895 sa_rowne_sprawdz_ulamek
                      02896 ;tak samo
                      02897 
0484   0834           02898         movf    wynik01_temp,w
                      02899         
                      02900 ;ulamek z pomiaru dsa jest inwersja prawdziwej wartosci 
0485   1FD6           02901         btfss   nastawa_temp_histereza,7
0486   2C88           02902         goto   sa_rowne_sprawdz_ulamek_bez_odw
                      02903 
0487   0934           02904         comf    wynik01_temp,w
                      02905         ; addlw   1
                      02906         
0488                  02907 sa_rowne_sprawdz_ulamek_bez_odw        
                      02908         ;od nastawy odejmuje ulamek temperatury zmierzonej
                      02909         ;  nastawa_temp_01_histereza  -  wynik01_temp
                      02910         ;jesli nastawa_temp_01 > wynik01_temp  wtedy C jest ustawione  
                      02911         ;co oznacza ze temp jest nizsza niz ustawiona
0488   0257           02912         subwf   nastawa_temp_01_histereza,w
0489   1C03           02913         btfss   STATUS,C
048A   2C8E           02914         goto    off_kompresor_lodowki
                      02915         
048B   2C8C           02916         goto     wlacz_kompresor_lodowki
                      02917         
                      02918                 
                      02919 
                      02920 
                      02921         
048C                  02922 wlacz_kompresor_lodowki
048C   1406           02923         bsf     port_start_lodowki,pin_kompresor
                      02924         
048D   0008           02925         return
                      02926          
                      02927 ; nastawa_jest_wieksza_od_0         
MPASM  5.51     PROGRAM_STERUJACY_WERSJA2.ASM   8-7-2014  19:31:38         PAGE 75


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

048E                  02928 off_kompresor_lodowki
048E   1006           02929         bcf     port_start_lodowki,pin_kompresor
                      02930         
048F   0008           02931         return       
                      02932       
                      02933       
                      02934       
                      02935       
                      02936       
                      02937 
                      02938 ;gdy nastawa jest dodatnia analize przeprowadza sie na odwrot niz w procedurach dla nastawy
                      02939 ;ujemnej
                      02940 ;np histereza przy wylaczeniu mocy - temp powinna wzrosnac -np z 5 na 5,3 zeby znowu wlaczyc
                      02941 ;w przypadku nastawy ujemnej - 5 musialo wzrosnac na -4,7
                      02942 
Warning[208]: Label truncated at 32 characters. (nastawa_jest_wieksza_od_0_inna_regulacja)
0490                  02943 nastawa_jest_wieksza_od_0_inna_regulacja
                      02944         
                      02945 ;uwzgledniam histereze
                      02946 
0490   1806           02947         btfsc     port_start_lodowki,pin_kompresor
0491   2C97           02948         goto      zmniejsz_temp_o_histereze
                      02949         
                      02950         ;zmniejsz temperature nastawy o histereze
                      02951         ;bo jest wylaczone
0492   3040           02952         movlw     histereza
0493   07D7           02953         addwf     nastawa_temp_01_histereza,f
                      02954         
0494   1803           02955         btfsc    STATUS,C
0495   0AD6           02956         incf      nastawa_temp_histereza,f
                      02957         
0496   2C9B           02958         goto     regulacja_po_histerezie_dodatnia
0497                  02959 zmniejsz_temp_o_histereze    
                      02960         ;jest wlaczone odejmij zwieksz ulamek temp o histereze
                      02961         
                      02962         ;jesli jest np ustawiona 0x05  czyli 5  
                      02963         ;to w ulamku jest 0x00
                      02964         ;to wtedy dodajac histereze np 0x30
                      02965         ;wylaczy dopiero gdy jest temperatura 5, 0x30 w ulamku czyli przy 4,635
                      02966         ;wlaczy ponownie gdy wzrosnie temperatura do 5,375
0497   3040           02967         movlw     histereza
0498   02D7           02968         subwf     nastawa_temp_01_histereza,f
                      02969         
0499   1C03           02970         btfss    STATUS,C
049A   03D6           02971         decf      nastawa_temp_histereza,f
                      02972 
                      02973 
                      02974       
049B                  02975 regulacja_po_histerezie_dodatnia      
                      02976       ; goto     wlacz_kompresor_lodowki
                      02977       
                      02978       
                      02979       
MPASM  5.51     PROGRAM_STERUJACY_WERSJA2.ASM   8-7-2014  19:31:38         PAGE 76


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      02980       ;jezeli aktualny pomiar jest mniejszy od 0
                      02981          ;tzn ze ponizej nastawy
049B   1BCD           02982          btfsc   wartosc_opcji_temp,7
049C   2C8E           02983          goto    off_kompresor_lodowki
                      02984          
                      02985          
                      02986          ;jezeli obydwie sa dodatnie to sprawdzam ktora wartosc jest wieksza
                      02987          ;zalozmy ze ustawiona wartosc jest 5 czyli 0x05
                      02988          ;jezeli zmierzona jest wieksza znaczy ze trzeba wciaz chlodzic
                      02989          ;np 6  to 0x06
                      02990          
049D   0856           02991          movf     nastawa_temp_histereza,w
                      02992          ;pomiarh - jaka_wartosc_regulujeH
                      02993          ;  file  - Wreg
                      02994          ; wartosc_opcji_temp - wartosc_opcji_nastawa
049E   024D           02995          subwf    wartosc_opcji_temp,w
                      02996 ;sprawdz czy to samo czy wieksze
049F   1903           02997          btfsc    STATUS,Z
04A0   2CA4           02998          goto     sa_rowne_sprawdz_ulamek_dodatnie
                      02999          ;C jest ustawione przy odejmowaniu jesli wynik nie byl wartoscia ujemna czyli jesli 
                      03000          ;wartosc_opcji_temp > wartosc_opcji_nastawa
                      03001          ;np 0x07 > 0x05
                      03002          ; czyli 7   i  5 - temperatura za wysoka trzeba chlodzic
04A1   1803           03003          btfsc    STATUS,C 
04A2   2C8C           03004          goto     wlacz_kompresor_lodowki
                      03005          
                      03006          
                      03007         ;tzn nastawa>pomiaru temp  wiec wylacz grzanie
04A3   2C8E           03008          goto     off_kompresor_lodowki
                      03009 
04A4                  03010 sa_rowne_sprawdz_ulamek_dodatnie
                      03011 ;tak samo
                      03012 
04A4   0834           03013         movf    wynik01_temp,w
                      03014         
                      03015         
04A5                  03016 sa_rowne_sprawdz_ulamek_bez_odw2        
                      03017         ;od nastawy odejmuje ulamek temperatury zmierzonej
                      03018         ;  nastawa_temp_01_histereza  -  wynik01_temp
                      03019         ;np 5.5  - 5.2
                      03020         ;jesli nastawa_temp_01 > wynik01_temp  wtedy C jest ustawione  
                      03021         ;co oznacza ze temp jest nizsza niz ustawiona
04A5   0257           03022         subwf   nastawa_temp_01_histereza,w
04A6   1803           03023         btfsc   STATUS,C
04A7   2C8E           03024         goto    off_kompresor_lodowki
                      03025         
04A8   2C8C           03026         goto     wlacz_kompresor_lodowki
                      03027         
                      03028                 
                      03029 
                      03030 
                      03031 
                      03032 
MPASM  5.51     PROGRAM_STERUJACY_WERSJA2.ASM   8-7-2014  19:31:38         PAGE 77


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      03033 
                      03034          
                      03035 ;;;;;;;;;;;;;;;   G£ÓWNA PÊTLA!      
                      03036       
                      03037       
                      03038       
                      03039       
                      03040 
                      03041                   
04A9                  03042 LOOP
04A9   1A43           03043         btfsc   markers,reguluj
04AA   2469           03044         call    regulacja
                      03045 
04AB   1943           03046         btfsc   markers,wykonaj_pomiar
04AC   22E7           03047         call    Pomiary_temperatury
                      03048          
                      03049          
04AD   1A45           03050         btfsc       markers_pomiary,odczytaj_pomiar_DS1
04AE   2317           03051         call      odbierz_pomiary_temp
                      03052        
                      03053          
                      03054          
04AF   1BC3           03055         btfsc   markers,odswiez_ekran
04B0   20DC           03056         call    Wyswietlanie_Menu
                      03057          
                      03058       
                      03059          ; btfsc    markers,zmierz_temperature
                      03060          ; call     Zmierz_DS18b20
                      03061       
04B1                  03062 LOOP_klawisze         
04B1   1CC4           03063       btfss       markers_klawisze,minal_czas_zlicz_po_wcisnieciu
04B2   2CBA           03064       goto        LOOP_sprawdz_wcisniecie_klawisz
                      03065 
                      03066 
04B3   10C4           03067       bcf       markers_klawisze,minal_czas_zlicz_po_wcisnieciu
                      03068 
                      03069 
04B4                  03070 LOOP_sprawdz_ktory_wcisnieto
                      03071 ;ta procedura jest uruchamiana po tym jak zostanie zliczony pewien czas przez jeden z timerow
                      03072 ; i w tym czasie wciaz byl wcisniety przycisk
                      03073 ;czyli to jest rzeczywista procedura uruchamiania opcji menu
                      03074 
04B4   1826           03075       btfsc   stan_key,wcisniety_jest_klawisz_dol
04B5   2BA0           03076       goto    zarejestrowano_klawisz_dol
                      03077                   
04B6   18A6           03078       btfsc    stan_key,wcisniety_jest_klawisz_zmiana
04B7   2BE8           03079       goto     zarejestrowano_klawisz_gora
                      03080                            
04B8   1926           03081       btfsc    stan_key,wcisniety_jest_klawisz_enter
04B9   2C28           03082       goto     zarejestrowano_klawisz_enter
                      03083          
                      03084          
                      03085                   
MPASM  5.51     PROGRAM_STERUJACY_WERSJA2.ASM   8-7-2014  19:31:38         PAGE 78


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      03086          
                      03087          
                      03088          
04BA                  03089 LOOP_sprawdz_wcisniecie_klawisz
                      03090 ;jezeli juz zarejestrowano klawisz to nie sprawdzaj klawiszy
04BA   1844           03091          btfsc   markers_klawisze,wcisnieto_klawisz
04BB   2CC2           03092          goto     LOOP2
                      03093 
04BC   1D05           03094       btfss   port_klawisz_dol,pin_klawisz_dol
04BD   2457           03095       call    wcisnieto_klawisz_dol
                      03096                   
04BE   1E05           03097       btfss    port_klawisz_gora,pin_klawisz_gora
04BF   245D           03098       call     wcisnieto_klawisz_gora
                      03099                            
04C0   1D85           03100       btfss    port_klawisz_enter,pin_klawisz_enter
04C1   2463           03101       call     wcisnieto_klawisz_enter
                      03102          
                      03103 
                      03104 
04C2                  03105 LOOP2                            
                      03106        
                      03107     
                      03108          
                      03109 
04C2   2CA9           03110          goto     LOOP
                      03111          
                      03112          
                      03113             
                      03114         
                      03115         
                      03116   
                      03117 
                      03118 
                      03119 
                      03120             
                      03121         
                      03122         
                      03123         
                      03124         
                      03125          
                      03126          
                      03127          
                      03128          
                      03129          
                      03130 
                      03131         
                      03132         
                      03133         
                      03134         
                      03135         
                      03136         
                      03137         
                      03138         
MPASM  5.51     PROGRAM_STERUJACY_WERSJA2.ASM   8-7-2014  19:31:38         PAGE 79


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      03139         
                      03140         
                      03141         
                      03142          
                      03143 ; org    800h
                      03144 ;ta funkcja zlicza nacisniecia klawisza rb0Ã³Å‚Å„Å¼Ä…
                      03145 ;funkcja odczekuj?ca
                      03146 
                      03147 
                      03148 
                      03149          
                      03150 ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
                      03151 
                      03152 ;POCZATEK
                      03153 ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;       
0800                  03154          org      0800h    
                      03155 
                      03156 
                      03157                 
0800                  03158 inicjacja
0800   0183           03159          clrf    STATUS ;czyszcze status
                      03160          
                      03161          ;clrf    czas;
0801   0185           03162          clrf     PORTA
0802   0186           03163          clrf     PORTB
0803   0187           03164          clrf     PORTC
                      03165          
                      03166          ;clrf ADCON0
                      03167          ;wylaczony
0804   3000           03168          movlw  b'00000000'
0805   009F           03169          movwf  ADCON0
                      03170          ;movlw   0x15
                      03171          ;movwf   tmp
                      03172          ;rlf     tmp,f
                      03173          ;movlw   0x93
                      03174          ;xorwf   tmp,w
                      03175 ;ustawiam TMR1
                      03176         
0806   3035           03177          movlw    b'00110101'       
0807   0090           03178          movwf    T1CON
                      03179 ;przerwania
0808   018B           03180          clrf     INTCON
0809   138B           03181          bcf      INTCON,GIE
080A   130B           03182          bcf      INTCON,PEIE
                      03183          
080B   128B           03184          bcf     INTCON,T0IE
080C   110B           03185          bcf     INTCON,T0IF
                      03186          ;bcf      TRISE,PSPMODE
080D   1294           03187          bcf      SSPCON,SSPEN
080E   1398           03188          BCF      RCSTA,SPEN
                      03189          
                      03190          ;movlw   b'00000000'       ;wszystkie linie na wysoko
                      03191          ;ovwf    PORTB
MPASM  5.51     PROGRAM_STERUJACY_WERSJA2.ASM   8-7-2014  19:31:38         PAGE 80


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

080F   3000           03192          movlw    0
0810   0097           03193          movwf    CCP1CON
                      03194          ;BCF     
0811   0191           03195          clrf     TMR2
0812                  03196 BEGIN2lcd_init
                      03197 
0812   100C           03198         bcf     PIR1,TMR1IF        
                      03199 
                      03200 ;tu wpisuje ustawienia dla drugiego banku
0813   1683           03201          bsf      STATUS,RP0        ;bank 1
                      03202 
                      03203 
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
0814   018C           03204          clrf     PIE1
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
0815   018D           03205          clrf     PIE2
                      03206          
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
0816   140C           03207          bsf      PIE1,TMR1IE
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
0817   130C           03208          bcf      PIE1,ADIE
                      03209      ;ustawiam na wyjscia 1 -wejscie
                      03210         ;movlw   b'11111111'
                      03211          
0818   303F           03212          movlw    b'00111111'
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
0819   0085           03213          movwf    TRISA
                      03214          
                      03215          
081A   30FC           03216          movlw   b'11111100'
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
081B   0086           03217          movwf    TRISB
                      03218                   
081C   3080           03219         movlw   b'10000000'
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
081D   0087           03220          movwf    TRISC
                      03221          
                      03222 ;tu sie zminienia dla kabli
                      03223         ;movlw   b'00000000'
                      03224          ;movwf    TRISD
                      03225          
                      03226          ;movlw   b'00000000'
                      03227          ;movwf    TRISE
                      03228          
                      03229          
                      03230 ;ustawienia timera0
                      03231 ; procesor ma czestotliwosc 20 Mhz
                      03232 ;wtedy jedno zliczenie to 1/2000000s
                      03233 ; a wiec przelicznik 1:256 (czyli przerwanie wystepuje po 256*256/5000000)
                      03234 ;czyli oko³o 13 ms
                      03235 ; zrobimy wiec 3 zliczenia zanim zarejestruje przycisk
081E   30D7           03236         movlw     b'11010111'
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
MPASM  5.51     PROGRAM_STERUJACY_WERSJA2.ASM   8-7-2014  19:31:38         PAGE 81


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

081F   0081           03237         movwf     OPTION_REG
                      03238  
                      03239 ;wylaczam wszystkie analogowe wejscia
0820   3060           03240          movlw    b'01100000'
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
0821   009F           03241          movwf    ADCON1
                      03242 ;90  czyli 5a
                      03243 ;50      32
                      03244 ;210(200us) d2
                      03245 ;196(190us) c4    
                      03246 ;        movlw    b'11010010'
0822   3037           03247          movlw    0x37
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
0823   0092           03248          movwf    PR2
                      03249          
                      03250 ;bank 0
                      03251        
                      03252 
0824   301A           03253          movlw    0x1a
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
0825   0099           03254          movwf    SPBRG
                      03255          
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
0826   0198           03256          clrf     TXSTA
                      03257                  
                      03258 ;wylaczam przerwanie szeregu
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
0827   128C           03259          bcf      PIE1,RCIE
                      03260 ;        bsf      PIE1,TXIE
0828   1283           03261          bcf      STATUS,RP0
0829   0198           03262          clrf     RCSTA
                      03263          
                      03264          
                      03265          ;wylaczam modul LCD
                      03266          
082A   1283 1703      03267          banksel LCDCON
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
082C   0187           03268          clrf     LCDCON
                      03269          
082D   1683 1303      03270          banksel  ANSEL
082F   3000           03271          movlw          b'00000000'
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
0830   0091           03272          movwf  ANSEL
                      03273          
0831   1683 1303      03274          banksel CMCON0
0833   3007           03275          movlw  b'00000111'
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
0834   009C           03276          movwf  CMCON0
                      03277          
0835   1283 1303      03278          banksel        0
                      03279          
                      03280          
                      03281          
MPASM  5.51     PROGRAM_STERUJACY_WERSJA2.ASM   8-7-2014  19:31:38         PAGE 82


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      03282 ;wyczyscic trzeba pamiec na zmienne
                      03283 ;jezeli tego nie zrobie to
                      03284 ;po wlaczeniu zasilani moga pojawic
                      03285 ; sie problemy bo moga tam byc losowe dane
                      03286 
0837   3020           03287          movlw    0x20
0838   0084           03288          movwf    FSR
0839                  03289 next
                      03290          ;movlw   0
0839   0180           03291          clrf     INDF
083A   0A84           03292          INCF     FSR,f
083B   307F           03293          movlw    07fh
083C   0604           03294          xorwf    FSR,w
083D   1D03           03295          BTFSS    STATUS,Z
083E   2839           03296          goto     next
                      03297          
                      03298          
                      03299          
                      03300          
083F   30A0           03301          movlw    0a0h
0840   0084           03302          movwf    FSR
0841                  03303 next2
0841   0180           03304          clrf     INDF
0842   0A84           03305          INCF     FSR,f
0843   30FF           03306          movlw    0ffh
0844   0604           03307          xorwf    FSR,w
0845   1D03           03308          BTFSS    STATUS,Z
0846   2841           03309          goto     next2
                      03310          
                      03311     
                      03312 ;w przyadku testowania
                      03313 
                      03314          ;movlw    0xa0
                      03315          ;movwf    FSR
                      03316          
                      03317 
                      03318          
0847   118A 120A      03319          Pagesel Start
                      03320          
Message[306]: Crossing page boundary -- ensure page bits are set.
0849   2A8F           03321          goto    Start
                      03322                   
                      03323 
                      03324 
                      03325 
0900                  03326       org      0900h    
                      03327 
                      03328 
                      03329 ;;;;;;;;;;;;;;ZBIOR NAPISóW
                      03330 ;;;kolejne poziomy menu pojawiaja sie w wybranych czescich ekranu
                      03331 
                      03332  
                      03333 
MPASM  5.51     PROGRAM_STERUJACY_WERSJA2.ASM   8-7-2014  19:31:38         PAGE 83


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      03334      
0900                  03335 opcja0
0900   084A           03336          movf     znak_linia,w
0901   0782           03337          addwf    PCL,f
0902   3475 3472 3475 03338          dt "uruchom  ",0
       3463 3468 346F 
       346D 3420 3420 
       3400 
                      03339          
090C                  03340 opcja1  
090C   084A           03341          movf     znak_linia,w
090D   0782           03342          addwf    PCL,f
090E   346E 3461 3473 03343          dt     "nastawa  ",0
       3474 3461 3477 
       3461 3420 3420 
       3400 
                      03344          
                      03345          
0918                  03346 opcja2         
0918   084A           03347          movf     znak_linia,w
0919   0782           03348          addwf    PCL,f
091A   3474 3465 346D 03349          dt     "temp ",0
       3470 3420 3400 
                      03350 
0920                  03351 opcja3         
0920   084A           03352          movf     znak_linia,w
0921   0782           03353          addwf    PCL,f
0922   3468 3465 3478 03354          dt     "hex. ",0
       342E 3420 3400 
                      03355 
                      03356          
                      03357          
0928                  03358 opcja4
0928   084A           03359          movf     znak_linia,w
0929   0782           03360          addwf    PCL,f
092A   3475 3472 3475 03361          dt     "uruchom",0
       3463 3468 346F 
       346D 3400 
                      03362 
                      03363     
                      03364          
0932                  03365 rozkaz_pomiaru         
0932   0859           03366         movf     znak_rozkazu_ds,w
0933   0782           03367          addwf    PCL,f         
0934   34CC 3444 3400 03368          dt   0xcc,0x44,0x00
                      03369 
0937                  03370 rozkaz_odbioru
0937   0859           03371         movf     znak_rozkazu_ds,w
0938   0782           03372          addwf    PCL,f
0939   34CC 34BE 3400 03373          dt   0xcc,0xbe,0x00
                      03374          
093C                  03375 rozkac_id
093C   0859           03376         movf     znak_rozkazu_ds,w
MPASM  5.51     PROGRAM_STERUJACY_WERSJA2.ASM   8-7-2014  19:31:38         PAGE 84


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

093D   0782           03377          addwf    PCL,f
093E   3433 3400      03378          dt       0x33,0x00
                      03379          
                      03380          
                      03381          end
MPASM  5.51     PROGRAM_STERUJACY_WERSJA2.ASM   8-7-2014  19:31:38         PAGE 85


SYMBOL TABLE
  LABEL                             VALUE 

ADCON0                            0000001F
ADCON1                            0000009F
ADCS0                             00000004
ADCS1                             00000005
ADCS2                             00000006
ADDEN                             00000003
ADFM                              00000007
ADIE                              00000006
ADIF                              00000006
ADON                              00000000
ADRESH                            0000001E
ADRESL                            0000009E
AN0                               00000000
AN1                               00000001
AN2                               00000002
AN3                               00000003
AN4                               00000004
ANS0                              00000000
ANS1                              00000001
ANS2                              00000002
ANS3                              00000003
ANS4                              00000004
ANSEL                             00000091
BEGIN                             00000000
BEGIN2lcd_init                    00000812
BF                                00000000
BIASMD                            00000006
BRGH                              00000002
C                                 00000000
C1IE                              00000005
C1IF                              00000005
C1INV                             00000004
C1OUT                             00000006
C2IE                              00000006
C2IF                              00000006
C2INV                             00000005
C2OUT                             00000007
C2SYNC                            00000000
CCP1CON                           00000017
CCP1IE                            00000002
CCP1IF                            00000002
CCP1M0                            00000000
CCP1M1                            00000001
CCP1M2                            00000002
CCP1M3                            00000003
CCP1X                             00000005
CCP1Y                             00000004
CCPR1                             00000015
CCPR1H                            00000016
CCPR1L                            00000015
CHS0                              00000002
CHS1                              00000003
CHS2                              00000004
MPASM  5.51     PROGRAM_STERUJACY_WERSJA2.ASM   8-7-2014  19:31:38         PAGE 86


SYMBOL TABLE
  LABEL                             VALUE 

CIS                               00000003
CKE                               00000006
CKP                               00000004
CM0                               00000000
CM1                               00000001
CM2                               00000002
CMCON0                            0000009C
CMCON1                            00000097
CREN                              00000004
CS0                               00000002
CS1                               00000003
CSRC                              00000007
D                                 00000005
DATA_ADDRESS                      00000005
DC                                00000001
D_A                               00000005
D_NOT_A                           00000005
EEADR                             0000010D
EEADRH                            0000010F
EEADRH0                           00000000
EEADRH1                           00000001
EEADRH2                           00000002
EEADRH3                           00000003
EEADRH4                           00000004
EEADRL                            0000010D
EEADRL0                           00000000
EEADRL1                           00000001
EEADRL2                           00000002
EEADRL3                           00000003
EEADRL4                           00000004
EEADRL5                           00000005
EEADRL6                           00000006
EEADRL7                           00000007
EECON1                            0000018C
EECON2                            0000018D
EEDATA                            0000010C
EEDATH                            0000010E
EEDATH0                           00000000
EEDATH1                           00000001
EEDATH2                           00000002
EEDATH3                           00000003
EEDATH4                           00000004
EEDATH5                           00000005
EEDATL                            0000010C
EEDATL0                           00000000
EEDATL1                           00000001
EEDATL2                           00000002
EEDATL3                           00000003
EEDATL4                           00000004
EEDATL5                           00000005
EEDATL6                           00000006
EEDATL7                           00000007
EEIE                              00000007
MPASM  5.51     PROGRAM_STERUJACY_WERSJA2.ASM   8-7-2014  19:31:38         PAGE 87


SYMBOL TABLE
  LABEL                             VALUE 

EEIF                              00000007
EEPGD                             00000007
EERD                              00000000
EEWR                              00000001
F                                 00000001
FERR                              00000002
FSR                               00000004
GIE                               00000007
GO                                00000001
GO_DONE                           00000001
GO_NOT_DONE                       00000001
HTS                               00000002
I2C_DATA                          00000005
I2C_READ                          00000002
I2C_START                         00000003
I2C_STOP                          00000004
INDF                              00000000
INTCON                            0000000B
INTE                              00000004
INTEDG                            00000006
INTF                              00000001
IOC                               00000096
IOC4                              00000004
IOC5                              00000005
IOC6                              00000006
IOC7                              00000007
IOCB                              00000096
IOCB4                             00000004
IOCB5                             00000005
IOCB6                             00000006
IOCB7                             00000007
IRCF0                             00000004
IRCF1                             00000005
IRCF2                             00000006
IRP                               00000007
IRVST                             00000005
LCDA                              00000005
LCDCON                            00000107
LCDDATA0                          00000110
LCDDATA1                          00000111
LCDDATA10                         0000011A
LCDDATA3                          00000113
LCDDATA4                          00000114
LCDDATA6                          00000116
LCDDATA7                          00000117
LCDDATA9                          00000119
LCDEN                             00000007
LCDIE                             00000004
LCDIF                             00000004
LCDPS                             00000108
LCDSE0                            0000011C
LCDSE1                            0000011D
LMUX0                             00000000
MPASM  5.51     PROGRAM_STERUJACY_WERSJA2.ASM   8-7-2014  19:31:38         PAGE 88


SYMBOL TABLE
  LABEL                             VALUE 

LMUX1                             00000001
LOOP                              000004A9
LOOP2                             000004C2
LOOP_klawisze                     000004B1
LOOP_sprawdz_ktory_wcisnieto      000004B4
LOOP_sprawdz_wcisniecie_klawisz   000004BA
LP0                               00000000
LP1                               00000001
LP2                               00000002
LP3                               00000003
LTS                               00000001
LVDCON                            00000109
LVDEN                             00000004
LVDIE                             00000002
LVDIF                             00000002
LVDL0                             00000000
LVDL1                             00000001
LVDL2                             00000002
NOT_A                             00000005
NOT_ADDRESS                       00000005
NOT_BO                            00000000
NOT_BOR                           00000000
NOT_DONE                          00000001
NOT_PD                            00000003
NOT_POR                           00000001
NOT_RBPU                          00000007
NOT_RC8                           00000006
NOT_T1SYNC                        00000002
NOT_TO                            00000004
NOT_TX8                           00000006
NOT_W                             00000002
NOT_WRITE                         00000002
OERR                              00000001
OPTION_REG                        00000081
OSCCON                            0000008F
OSCTUNE                           00000090
OSFIE                             00000007
OSFIF                             00000007
OSTS                              00000003
P                                 00000004
PCL                               00000002
PCLATH                            0000000A
PCON                              0000008E
PEIE                              00000006
PIE1                              0000008C
PIE2                              0000008D
PIN_HI_1                          000002A3
PIN_LO_1                          000002A9
PIR1                              0000000C
PIR2                              0000000D
PORTA                             00000005
PORTB                             00000006
PORTC                             00000007
MPASM  5.51     PROGRAM_STERUJACY_WERSJA2.ASM   8-7-2014  19:31:38         PAGE 89


SYMBOL TABLE
  LABEL                             VALUE 

PORTE                             00000009
PR2                               00000092
PS0                               00000000
PS1                               00000001
PS2                               00000002
PSA                               00000003
Pomiary_temperatury               000002E7
R                                 00000002
RA0                               00000000
RA1                               00000001
RA2                               00000002
RA3                               00000003
RA4                               00000004
RA5                               00000005
RA6                               00000006
RA7                               00000007
RB0                               00000000
RB1                               00000001
RB2                               00000002
RB3                               00000003
RB4                               00000004
RB5                               00000005
RB6                               00000006
RB7                               00000007
RBIE                              00000003
RBIF                              00000000
RC0                               00000000
RC1                               00000001
RC2                               00000002
RC3                               00000003
RC4                               00000004
RC5                               00000005
RC6                               00000006
RC7                               00000007
RC8_9                             00000006
RC9                               00000006
RCD8                              00000000
RCIE                              00000005
RCIF                              00000005
RCREG                             0000001A
RCSTA                             00000018
RD                                00000000
RE3                               00000003
READ_WRITE                        00000002
RP0                               00000005
RP1                               00000006
RX9                               00000006
RX9D                              00000000
R_NOT_W                           00000002
R_W                               00000002
S                                 00000003
S0C0                              00000000
S0C1                              00000000
MPASM  5.51     PROGRAM_STERUJACY_WERSJA2.ASM   8-7-2014  19:31:38         PAGE 90


SYMBOL TABLE
  LABEL                             VALUE 

S0C2                              00000000
S0C3                              00000000
S10C0                             00000002
S10C1                             00000002
S10C2                             00000002
S10C3                             00000002
S11C0                             00000003
S11C1                             00000003
S11C2                             00000003
S11C3                             00000003
S12C0                             00000004
S12C1                             00000004
S12C2                             00000004
S12C3                             00000004
S13C0                             00000005
S13C1                             00000005
S13C2                             00000005
S13C3                             00000005
S14C0                             00000006
S14C1                             00000006
S14C2                             00000006
S14C3                             00000006
S15C0                             00000007
S15C1                             00000007
S15C2                             00000007
S15C3                             00000007
S1C0                              00000001
S1C1                              00000001
S1C2                              00000001
S1C3                              00000001
S2C0                              00000002
S2C1                              00000002
S2C2                              00000002
S2C3                              00000002
S3C0                              00000003
S3C1                              00000003
S3C2                              00000003
S3C3                              00000003
S4C0                              00000004
S4C1                              00000004
S4C2                              00000004
S4C3                              00000004
S5C0                              00000005
S5C1                              00000005
S5C2                              00000005
S5C3                              00000005
S6C0                              00000006
S6C1                              00000006
S6C2                              00000006
S6C3                              00000006
S7C0                              00000007
S7C1                              00000007
S7C2                              00000007
MPASM  5.51     PROGRAM_STERUJACY_WERSJA2.ASM   8-7-2014  19:31:38         PAGE 91


SYMBOL TABLE
  LABEL                             VALUE 

S7C3                              00000007
S8C0                              00000000
S8C1                              00000000
S8C2                              00000000
S8C3                              00000000
S9C0                              00000001
S9C1                              00000001
S9C2                              00000001
S9C3                              00000001
SBOREN                            00000004
SCS                               00000000
SE0                               00000000
SE1                               00000001
SE10                              00000002
SE11                              00000003
SE12                              00000004
SE13                              00000005
SE14                              00000006
SE15                              00000007
SE2                               00000002
SE3                               00000003
SE4                               00000004
SE5                               00000005
SE6                               00000006
SE7                               00000007
SE8                               00000000
SE9                               00000001
SEG0                              00000000
SEG0COM0                          00000000
SEG0COM1                          00000000
SEG0COM2                          00000000
SEG0COM3                          00000000
SEG1                              00000001
SEG10                             00000002
SEG10COM0                         00000002
SEG10COM1                         00000002
SEG10COM2                         00000002
SEG10COM3                         00000002
SEG11                             00000003
SEG11COM0                         00000003
SEG11COM1                         00000003
SEG11COM2                         00000003
SEG11COM3                         00000003
SEG12                             00000004
SEG12COM0                         00000004
SEG12COM1                         00000004
SEG12COM2                         00000004
SEG12COM3                         00000004
SEG13                             00000005
SEG13COM0                         00000005
SEG13COM1                         00000005
SEG13COM2                         00000005
SEG13COM3                         00000005
MPASM  5.51     PROGRAM_STERUJACY_WERSJA2.ASM   8-7-2014  19:31:38         PAGE 92


SYMBOL TABLE
  LABEL                             VALUE 

SEG14                             00000006
SEG14COM0                         00000006
SEG14COM1                         00000006
SEG14COM2                         00000006
SEG14COM3                         00000006
SEG15                             00000007
SEG15COM0                         00000007
SEG15COM1                         00000007
SEG15COM2                         00000007
SEG15COM3                         00000007
SEG1COM0                          00000001
SEG1COM1                          00000001
SEG1COM2                          00000001
SEG1COM3                          00000001
SEG2                              00000002
SEG2COM0                          00000002
SEG2COM1                          00000002
SEG2COM2                          00000002
SEG2COM3                          00000002
SEG3                              00000003
SEG3COM0                          00000003
SEG3COM1                          00000003
SEG3COM2                          00000003
SEG3COM3                          00000003
SEG4                              00000004
SEG4COM0                          00000004
SEG4COM1                          00000004
SEG4COM2                          00000004
SEG4COM3                          00000004
SEG5                              00000005
SEG5COM0                          00000005
SEG5COM1                          00000005
SEG5COM2                          00000005
SEG5COM3                          00000005
SEG6                              00000006
SEG6COM0                          00000006
SEG6COM1                          00000006
SEG6COM2                          00000006
SEG6COM3                          00000006
SEG7                              00000007
SEG7COM0                          00000007
SEG7COM1                          00000007
SEG7COM2                          00000007
SEG7COM3                          00000007
SEG8                              00000000
SEG8COM0                          00000000
SEG8COM1                          00000000
SEG8COM2                          00000000
SEG8COM3                          00000000
SEG9                              00000001
SEG9COM0                          00000001
SEG9COM1                          00000001
SEG9COM2                          00000001
MPASM  5.51     PROGRAM_STERUJACY_WERSJA2.ASM   8-7-2014  19:31:38         PAGE 93


SYMBOL TABLE
  LABEL                             VALUE 

SEG9COM3                          00000001
SEGEN0                            00000000
SEGEN1                            00000001
SEGEN10                           00000002
SEGEN11                           00000003
SEGEN12                           00000004
SEGEN13                           00000005
SEGEN14                           00000006
SEGEN15                           00000007
SEGEN2                            00000002
SEGEN3                            00000003
SEGEN4                            00000004
SEGEN5                            00000005
SEGEN6                            00000006
SEGEN7                            00000007
SEGEN8                            00000000
SEGEN9                            00000001
SLPEN                             00000006
SMP                               00000007
SPBRG                             00000099
SPEN                              00000007
SREN                              00000005
SSPADD                            00000093
SSPBUF                            00000013
SSPCON                            00000014
SSPEN                             00000005
SSPIE                             00000003
SSPIF                             00000003
SSPM0                             00000000
SSPM1                             00000001
SSPM2                             00000002
SSPM3                             00000003
SSPOV                             00000006
SSPSTAT                           00000094
STATUS                            00000003
SWDTE                             00000000
SWDTEN                            00000000
SYNC                              00000004
Start                             0000028F
T0CS                              00000005
T0IE                              00000005
T0IF                              00000002
T0SE                              00000004
T1CKPS0                           00000004
T1CKPS1                           00000005
T1CON                             00000010
T1GE                              00000006
T1GINV                            00000007
T1GSS                             00000001
T1INSYNC                          00000002
T1OSCEN                           00000003
T1SYNC                            00000002
T2CKPS0                           00000000
MPASM  5.51     PROGRAM_STERUJACY_WERSJA2.ASM   8-7-2014  19:31:38         PAGE 94


SYMBOL TABLE
  LABEL                             VALUE 

T2CKPS1                           00000001
T2CON                             00000012
TMR0                              00000001
TMR0IE                            00000005
TMR0IF                            00000002
TMR1                              0000000E
TMR1CS                            00000001
TMR1GE                            00000006
TMR1H                             0000000F
TMR1IE                            00000000
TMR1IF                            00000000
TMR1L                             0000000E
TMR1ON                            00000000
TMR2                              00000011
TMR2IE                            00000001
TMR2IF                            00000001
TMR2ON                            00000002
TOUTPS0                           00000003
TOUTPS1                           00000004
TOUTPS2                           00000005
TOUTPS3                           00000006
TRISA                             00000085
TRISA0                            00000000
TRISA1                            00000001
TRISA2                            00000002
TRISA3                            00000003
TRISA4                            00000004
TRISA5                            00000005
TRISA6                            00000006
TRISA7                            00000007
TRISB                             00000086
TRISB0                            00000000
TRISB1                            00000001
TRISB2                            00000002
TRISB3                            00000003
TRISB4                            00000004
TRISB5                            00000005
TRISB6                            00000006
TRISB7                            00000007
TRISC                             00000087
TRISC0                            00000000
TRISC1                            00000001
TRISC2                            00000002
TRISC3                            00000003
TRISC4                            00000004
TRISC5                            00000005
TRISC6                            00000006
TRISC7                            00000007
TRISE                             00000089
TRISE3                            00000003
TRMT                              00000001
TUN0                              00000000
TUN1                              00000001
MPASM  5.51     PROGRAM_STERUJACY_WERSJA2.ASM   8-7-2014  19:31:38         PAGE 95


SYMBOL TABLE
  LABEL                             VALUE 

TUN2                              00000002
TUN3                              00000003
TUN4                              00000004
TX8_9                             00000006
TX9                               00000006
TX9D                              00000000
TXD8                              00000000
TXEN                              00000005
TXIE                              00000004
TXIF                              00000004
TXREG                             00000019
TXSTA                             00000098
UA                                00000001
VCFG0                             00000005
VCFG1                             00000006
VLCDEN                            00000004
VR0                               00000000
VR1                               00000001
VR2                               00000002
VR3                               00000003
VRCON                             0000009D
VREN                              00000007
VRR                               00000005
W                                 00000000
WA                                00000004
WCOL                              00000007
WDTCON                            00000105
WDTPS0                            00000001
WDTPS1                            00000002
WDTPS2                            00000003
WDTPS3                            00000004
WERR                              00000005
WFT                               00000007
WPU                               00000095
WPU0                              00000000
WPU1                              00000001
WPU2                              00000002
WPU3                              00000003
WPU4                              00000004
WPU5                              00000005
WPU6                              00000006
WPU7                              00000007
WPUB                              00000095
WPUB0                             00000000
WPUB1                             00000001
WPUB2                             00000002
WPUB3                             00000003
WPUB4                             00000004
WPUB5                             00000005
WPUB6                             00000006
WPUB7                             00000007
WR                                00000001
WREN                              00000002
MPASM  5.51     PROGRAM_STERUJACY_WERSJA2.ASM   8-7-2014  19:31:38         PAGE 96


SYMBOL TABLE
  LABEL                             VALUE 

WRERR                             00000003
Wyswie_Menu_gwiazd_normal_opcje   0000013A
Wyswiet_Menu_linia_1_Val_kol_cyl  000000FD
Wyswiet_Menu_linia_2_Val_kol_cyl  0000011E
Wyswietl_Menu_linia_2_poczatek    00000102
Wyswietlanie_Menu                 000000DC
Wyswietlanie_Menu_gwiazdka        00000123
Wyswietlanie_Menu_linia_1         000000E6
Wyswietlanie_Menu_linia_1_Value   000000F7
Wyswietlanie_Menu_linia_2         00000107
Wyswietlanie_Menu_linia_2_Value   00000118
Z                                 00000002
Znajdz_litere_dla_linii           000000C9
Znajdz_wartosc_10                 00000280
Znajdz_wartosc_100_pisz           0000027E
Znajdz_wartosc_100_zero           00000279
Znajdz_wartosc_10_pisz            00000289
Znajdz_wartosc_10_zero            00000283
Znajdz_wartosc_opcji              00000044
Znajdz_wartosc_opcji_10           00000287
Znajdz_wartosc_opcji_100          0000027C
Znajdz_wartosc_opcji_hex          000000AF
Znajdz_wartosc_opcji_nastawy      00000082
Znajdz_wartosc_opcji_nastawy1     00000089
Znajdz_wartosc_opcji_temper       00000059
Znajdz_wartosc_opcji_temper_1     00000062
Znajdz_wartosc_opcji_temper_2     0000006D
_1                                00000031
_2                                00000032
_3                                00000033
_4                                00000034
_5                                00000035
_6                                00000036
_7                                00000037
_8                                00000038
_9                                00000039
_A                                00000041
_B                                00000042
_BOD_NSLEEP                       00003EFF
_BOD_OFF                          00003CFF
_BOD_ON                           00003FFF
_BOD_SBODEN                       00003DFF
_BOREN_NSLEEP                     00003EFF
_BOREN_OFF                        00003CFF
_BOREN_ON                         00003FFF
_BOREN_SBODEN                     00003DFF
_C                                00000043
_CONFIG                           00002007
_CPD_OFF                          00003FFF
_CPD_ON                           00003F7F
_CP_OFF                           00003FFF
_CP_ON                            00003FBF
_D                                00000044
MPASM  5.51     PROGRAM_STERUJACY_WERSJA2.ASM   8-7-2014  19:31:38         PAGE 97


SYMBOL TABLE
  LABEL                             VALUE 

_DEBUG_OFF                        00003FFF
_DEBUG_ON                         00002FFF
_DEVID1                           00002006
_E                                00000045
_EC_OSC                           00003FFB
_EXTRC                            00003FFF
_EXTRCIO                          00003FFE
_EXTRC_OSC_CLKOUT                 00003FFF
_EXTRC_OSC_NOCLKOUT               00003FFE
_F                                00000046
_FCMEN_OFF                        000037FF
_FCMEN_ON                         00003FFF
_FOSC_EC                          00003FFB
_FOSC_EXTRCCLK                    00003FFF
_FOSC_EXTRCIO                     00003FFE
_FOSC_HS                          00003FFA
_FOSC_INTOSCCLK                   00003FFD
_FOSC_INTOSCIO                    00003FFC
_FOSC_LP                          00003FF8
_FOSC_XT                          00003FF9
_G                                00000047
_H                                00000048
_HS_OSC                           00003FFA
_I                                00000049
_IDLOC0                           00002000
_IDLOC1                           00002001
_IDLOC2                           00002002
_IDLOC3                           00002003
_IESO_OFF                         00003BFF
_IESO_ON                          00003FFF
_INTOSC                           00003FFD
_INTOSCIO                         00003FFC
_INTRC_OSC_CLKOUT                 00003FFD
_INTRC_OSC_NOCLKOUT               00003FFC
_J                                0000004A
_K                                0000004B
_L                                0000004C
_LP_OSC                           00003FF8
_M                                0000004D
_MCLRE_OFF                        00003FDF
_MCLRE_ON                         00003FFF
_N                                0000004E
_O                                0000004F
_P                                00000050
_PWRTE_OFF                        00003FFF
_PWRTE_ON                         00003FEF
_Q                                00000051
_R                                00000052
_S                                00000053
_T                                00000054
_U                                00000055
_V                                00000056
_W                                00000057
MPASM  5.51     PROGRAM_STERUJACY_WERSJA2.ASM   8-7-2014  19:31:38         PAGE 98


SYMBOL TABLE
  LABEL                             VALUE 

_WDTE_OFF                         00003FF7
_WDTE_ON                          00003FFF
_WDT_OFF                          00003FF7
_WDT_ON                           00003FFF
_X                                00000058
_XT_OSC                           00003FF9
_Y                                00000059
_Z                                0000005A
__16F916                          00000001
_a                                00000061
_b                                00000062
_c                                00000063
_d                                00000064
_dwukropek                        0000003A
_e                                00000065
_f                                00000066
_g                                00000067
_h                                00000068
_i                                00000069
_j                                0000006A
_k                                0000006B
_kropka                           0000002E
_l                                0000006C
_linia_pionowa                    0000007C
_m                                0000006D
_minus                            0000002D
_mniejszosci                      0000003C
_n                                0000006E
_o                                0000006F
_p                                00000070
_plus                             0000002B
_procent                          00000025
_przecinek                        0000002C
_puste                            00000020
_q                                00000071
_r                                00000072
_s                                00000073
_star                             0000002A
_stopni                           000000DF
_t                                00000074
_u                                00000075
_up                               0000005E
_v                                00000076
_w                                00000077
_wiekszosci                       0000003E
_x                                00000078
_y                                00000079
_z                                0000007A
aktualizuj_temp_co_sekunde        00000003
bajt_CRC                          0000005B
blad_inicjacji_ds                 000002E4
brak_zera_przejdz_do_dzielenia    000001DD
check                             00000190
MPASM  5.51     PROGRAM_STERUJACY_WERSJA2.ASM   8-7-2014  19:31:38         PAGE 99


SYMBOL TABLE
  LABEL                             VALUE 

check_CRC_DS                      0000035E
check_CRC_DS_loop                 0000035F
check_busy4bit                    00000185
clear_line                        0000017B
clear_line_old                    00000169
clear_line_old2                   00000172
clear_line_petla                  0000017D
cmd_off                           00000167
cyfry_0_9                         000000AC
czas_oczekiwania_480us            000000F0
czas_oczekiwania_60us             0000003C
czekam_na_kolejny_bit_DS_1        00000355
czekam_na_odczyt_DS1              00000003
czestotliwosc                     20000000
czujnik_ds1820_1                  00000005
czy_czytam_ID_DS1                 00000002
czy_wykonuje_pomiar_DS1           00000000
czy_wywoluje_inicjacje_ds_call    00000001
dane_lcd                          0000003F
dane_odebrane_z_ds                000000A0
dd_addres_set                     00000080
dec01_temp                        0000002E
dec1                              00000029
dec10                             00000028
dec100                            00000027
dec100_temp                       0000002B
dec10_temp                        0000002C
dec1_temp                         0000002D
disp_home                         00000002
display1_4b                       00000000
display2_4b                       0000000F
display_2                         0000000F
display_clear                     00000001
display_clear1_4b                 00000000
display_clear2_4b                 00000001
display_off                       00000008
display_on                        0000000C
display_set                       0000000C
dzielenie                         000001D3
dzielenie_end                     000001ED
dzielenie_ulamek                  000001F5
dzielenie_ulamek_1bajt            00000217
dzielenie_ulamek_2bajty           000001F8
dzielenie_ulamek_end_2bajty       00000206
dzielenie_ulamek_petla_2bajty     000001FF
dzielona                          0000003B
dzielonah                         0000003C
dziesiatki                        0000022A
enable                            00000006
entry                             00000006
entry1_4b                         00000000
entry2_4b                         0000000C
fsr_temp                          00000041
MPASM  5.51     PROGRAM_STERUJACY_WERSJA2.ASM   8-7-2014  19:31:38         PAGE 100


SYMBOL TABLE
  LABEL                             VALUE 

function_set1_4b                  00000003
function_set2                     00000008
function_set2_4b                  00000008
hex2dec                           00000223
hex2dec_ulamek_tysieczny          00000234
histereza                         00000040
ile_TMR2_dla_PWM                  000000C3
ile_zliczen_TMR2_do_100           00000050
ile_zliczen_do_pomiaru_temp       00000052
ile_zliczen_przerwania_TMR2_PWM   0000004F
ile_znakow                        00000016
inicjacja                         00000800
inicjacja_ds1820_1                000002C1
inicjacja_ok_1                    000002E1
inicjacja_wynik                   0000005C
init_8bit                         00000030
jak_duzo_bajtow_odbieram_z_ds     00000058
jak_duzo_zliczen_TMR0             00000003
jak_duzo_zliczen_TMR1_do_pomiaru  0000000A
jednosci                          00000231
kb_sprawdz                        00000007
kb_wcisnieto                      00000006
klawisz_dol_uruchom_wart          000003E1
klawisz_dol_zmiana_menu           000003AA
klawisz_dol_zmiana_nastawa        000003C9
klawisz_dol_zmiana_nastawa1       000003D1
klawisz_dol_zmiana_nastawa_end    000003D5
klawisz_dol_zmiana_uruchom        000003D6
klawisz_dol_zmiana_wartosci       000003BB
klawisz_dol_zmiana_wartosci_end   000003E6
klawisz_gora_zmiana_menu          000003F2
klawisz_gora_zmiana_wartosci      000003FB
klawisz_up_1_pr_zmiana            00000411
klawisz_up_1_pr_zmiana_end        00000415
klawisz_up_uruchom_wart           00000421
klawisz_up_zmiana_nastawa         00000409
klawisz_up_zmiana_uruchom         00000416
klawisz_up_zmiana_wartosci_end    00000426
koncowa_opcja_menu                00000003
ktore_bity_lcd_tris               0000000F
ktore_bity_uzywane_na_lcd         000000F0
lcd_init                          000001A5
lcd_init_3_petla                  000001AD
linia_czwarta                     000000D0
linia_dolna                       000000C0
linia_druga                       000000C0
linia_gorna                       00000080
linia_pierwsza                    00000080
linia_trzecia                     00000090
marker_opcji                      0000002A
markers                           00000043
markers_klawisze                  00000044
markers_pomiary                   00000045
MPASM  5.51     PROGRAM_STERUJACY_WERSJA2.ASM   8-7-2014  19:31:38         PAGE 101


SYMBOL TABLE
  LABEL                             VALUE 

max_temp                          00000008
max_uruchom                       00000001
menu_glowne                       00000000
min_temp                          000000E1
min_uruchom                       00000000
minal_czas_zlicz_po_wcisnieciu    00000001
mnoze_przez_wynik01_2bajty        0000020C
mnoze_przez_wynik01_2bajty_LOOP   00000211
mnozenie                          00000250
mnozenie_h                        0000026E
mnozenie_l                        00000255
mnozenie_l2                       00000259
mnozona                           0000003A
mnozonah                          00000039
n                                 00000023
nastawa_jest_wieksza_od_0_inna_r  00000490
nastawa_temp                      00000054
nastawa_temp_01                   00000055
nastawa_temp_01_histereza         00000057
nastawa_temp_histereza            00000056
next                              00000839
next2                             00000841
normalne_ustawienie_tris_lcd      00000080
numer_opcji_nastawa               00000001
numer_opcji_temperatura           00000002
numer_opcji_uruchom               00000000
o_ile_zmieniam_temp               00000001
o_ile_zmieniam_uruchom            00000001
odbierz_pomiary_temp              00000317
odbierz_pomiary_temp_show_data    00000397
odczytaj_pomiar_DS1               00000004
odswiez_ekran                     00000007
off_kompresor_lodowki             0000048E
opcja0                            00000900
opcja1                            0000090C
opcja2                            00000918
opcja3                            00000920
opcja4                            00000928
opcja_bez_przycisku               00000002
opcja_menu                        00000046
opcje_po_przycisku_dol            00000000
opcje_po_przycisku_gora           00000001
operandh                          00000037
operandl                          00000038
pclath_temp                       00000022
petla_dzielenia                   000001DD
petla_dzielenia2                  000001E9
petla_inicjacji1_1                000002CF
petla_inicjacji2_1                000002D8
petla_inicjacji3_1                000002DD
petla_odbioru_rozkazu_1           0000032B
petla_odbioru_z_ds1820_1          00000337
petla_send_one_1                  000002B5
MPASM  5.51     PROGRAM_STERUJACY_WERSJA2.ASM   8-7-2014  19:31:38         PAGE 102


SYMBOL TABLE
  LABEL                             VALUE 

petla_send_zero_1                 000002BD
petla_sending_pomiar_1            0000030D
petla_stan_odebranego_bitu_1      0000033C
petla_wysylania_rozkazu_1         000002F2
pin_klawisz_dol                   00000002
pin_klawisz_enter                 00000003
pin_klawisz_gora                  00000004
pin_kompresor                     00000000
pin_lampka                        00000005
pin_start_all                     00000001
polecenie_wysylane                0000005A
polozenie_danych_lcd              00000000
polozenie_gwiazdka                00000047
polozenie_gwiazdki_opcji          00000008
polozenie_wartosci                00000009
poprzednio_cyfra_zero             00000000
port_ds1820                       00000006
port_klawisz_dol                  00000005
port_klawisz_enter                00000005
port_klawisz_gora                 00000005
port_lampka                       00000005
port_lcd                          00000007
port_lcd_e                        00000007
port_lcd_rs                       00000007
port_lcd_rw                       00000007
port_start_lodowki                00000006
procedura_po_wci_pusz_dol         000003A4
procedura_po_wci_pusz_dol_nic     000003B3
procedura_po_wci_pusz_dol_wcisn   000003A6
procedura_po_wci_pusz_enter       0000042C
procedura_po_wci_pusz_gora        000003EC
procedura_po_wci_pusz_gora_nic    000003FA
przerwanie                        00000004
przerwanie_0                      00000015
przerwanie_1                      00000015
przerwanie_2                      0000001D
przerwanie_3                      00000023
przerwanie_4                      00000023
przerwanie_5                      00000023
regulacja                         00000469
regulacja_po_histerezie           0000047B
regulacja_po_histerezie_dodatnia  0000049B
reguluj                           00000004
reszta_operacji                   0000002A
rozkac_id                         0000093C
rozkaz_odbioru                    00000937
rozkaz_pomiaru                    00000932
rs                                00000004
rw                                00000005
sa_rowne_sprawdz_ulamek           00000484
sa_rowne_sprawdz_ulamek_bez_odw   00000488
sa_rowne_sprawdz_ulamek_bez_odw2  000004A5
sa_rowne_sprawdz_ulamek_dodatnie  000004A4
MPASM  5.51     PROGRAM_STERUJACY_WERSJA2.ASM   8-7-2014  19:31:38         PAGE 103


SYMBOL TABLE
  LABEL                             VALUE 

send                              0000014D
send4bit                          0000014D
send_one_1                        000002B0
send_zero_1                       000002B8
set_4bit                          00000028
set_8bit                          0000003C
set_entry                         00000006
stan_key                          00000026
stan_menu                         00000049
status_temp                       00000021
t2con_dla_480us                   0000004C
t2con_dla_60us                    00000024
tmp                               00000024
tmp7                              00000025
tmp_lcd                           00000040
tmp_linia                         00000053
tris_ds1820                       00000086
tris_lcd                          00000087
ulamek22                          00000266
ulamekh                           0000003D
ulamekl                           0000003E
w_temp                            00000020
wait                              00000140
wait1                             00000143
wait2                             00000146
wait3                             00000149
wartosc_opcji_czas_wlaczenia01    00000051
wartosc_opcji_hex                 0000004E
wartosc_opcji_nastawa             0000004C
wartosc_opcji_temp                0000004D
wartosc_opcji_uruchom             0000004B
wartosc_ujemna                    00000001
wcisnieto_klawisz                 00000000
wcisnieto_klawisz_dol             00000457
wcisnieto_klawisz_enter           00000463
wcisnieto_klawisz_gora            0000045D
wcisniety_jest_klawisz_dol        00000000
wcisniety_jest_klawisz_enter      00000002
wcisniety_jest_klawisz_zmiana     00000001
wlacz_kompresor_lodowki           0000048C
wlacz_przerwanie_tmr0             0000044C
write                             00000040
write_4bit                        00000010
write_lcd                         00000163
wybor_opcji                       00000001
wybrano_menu_glowne               0000043A
wybrano_zmiane_opcji              00000432
wyjscie_przerwanie                00000023
wykonaj_pomiar                    00000002
wykryto_t0                        0000002C
wykryto_t1                        00000037
wykryto_t1_1                      00000041
wykryto_t1_nakaz_odczytu          00000040
MPASM  5.51     PROGRAM_STERUJACY_WERSJA2.ASM   8-7-2014  19:31:38         PAGE 104


SYMBOL TABLE
  LABEL                             VALUE 

wykryto_t2                        00000042
wynik                             00000031
wynik001                          0000002F
wynik001_temp                     00000033
wynik01                           00000030
wynik01_temp                      00000034
wynik_temp                        00000035
wynikh                            00000032
wynikh_temp                       00000036
wyswietl_liczbe_1bajtowa          00000274
wyswietl_wartosc_dziesietna       00000005
wysylam_rozkaz_odbioru            00000007
wysylam_rozkaz_pomiaru            00000006
zamien_dane_na_temp               00000377
zamien_dane_na_temp_dodatnie      00000383
zamien_na_hex                     000000A4
zapal_t1                          00000041
zarejestrowano_klawisz_dol        000003A0
zarejestrowano_klawisz_enter      00000428
zarejestrowano_klawisz_gora       000003E8
zliczenia_przerwania_TMR0         00000042
zmniejsz_temp_o_histereze         00000497
znaczniki_klawiszy_menu           00000048
znak_linia                        0000004A
znak_rozkazu_ds                   00000059
zwieksz_temp_o_histereze          00000477


MEMORY USAGE MAP ('X' = Used,  '-' = Unused)

0000 : XXX-XXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
0040 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
0080 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
00C0 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
0100 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
0140 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
0180 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
01C0 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
0200 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
0240 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
0280 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
02C0 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
0300 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
0340 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
0380 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
03C0 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
MPASM  5.51     PROGRAM_STERUJACY_WERSJA2.ASM   8-7-2014  19:31:38         PAGE 105


MEMORY USAGE MAP ('X' = Used,  '-' = Unused)


0400 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
0440 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
0480 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
04C0 : XXX------------- ---------------- ---------------- ----------------
0800 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
0840 : XXXXXXXXXX------ ---------------- ---------------- ----------------
0900 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
2000 : -------X-------- ---------------- ---------------- ----------------

All other memory blocks unused.

Program Memory Words Used:  1356
Program Memory Words Free:  6836


Errors   :     0
Warnings :     1 reported,     0 suppressed
Messages :    37 reported,     0 suppressed

